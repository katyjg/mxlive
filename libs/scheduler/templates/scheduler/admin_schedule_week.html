{% extends "wp-admin.html" %}
{% load get_version %}

{% block extra-header %}
    <link href="/static/css/datepicker.css" rel="stylesheet" type="text/css">
    <link rel="stylesheet" href="/static/css/jquery.fancybox-1.3.4.css" />
    <link rel="stylesheet" href="/static/css/style.css" />

    <script type="text/javascript" src="/static/js/jquery.easing.1.3.js"></script>
    <script type="text/javascript" src="/static/js/jquery.mousewheel-3.0.6.pack.js"></script>
    <script type="Text/Javascript">
        $(document).ready(function() {
            initModals();
            startTime();
            var date=window.location.pathname.split('/')[3].split('-');
            $("#datepicker").datepicker({
                showWeek: true,
                currentText: "Today",
                minDate:		new Date(2010, 2-1, 1),
                dateFormat: "yy-mm-dd", /* Choose appropriate date format for path */
                onSelect: function(dateText,inst){
                /* replace "/admin_calendar/" with appropriate path */
                var ext = {% if admin %}'admin/'{% else %}'staff/'{% endif %}
 		                window.location['pathname'] = '/beamtime/' + ext + dateText + '/';
                }
            });
            $("#datepicker").datepicker("setDate", new Date(date[0], date[1]-1, date[2]));
        });
    </script>
  	<script language="JavaScript">
		function startTime() {
			var today=new Date();
			var h=today.getHours();
			var m=today.getMinutes();
			var s=today.getSeconds();
			var d=today.getDate();
			var mon=today.getMonth();
			var wkd=today.getDay();
			var y=today.getFullYear();
			var month=["Jan","Feb","Mar","Apr","May","June","July","Aug","Sep","Oct","Nov","Dec"];
			var weekday=["Sun","Mon","Tue","Wed","Thu","Fri","Sat"];
			m=checkTime(m);
			s=checkTime(s);
			wkd=weekday[wkd];
			mon=month[mon];
			document.getElementById("txt").innerHTML=h+":"+m+":"+s+"&nbsp;&nbsp;&nbsp;&nbsp;"+wkd+", "+mon+" "+d+", "+y;
			t=setTimeout(function(){startTime()},500);
		}
		function checkTime(i) {
			if (i<10) {
				i = "0"+i;
			}
			return i;
		}
	</script>    
    
{% endblock %}
	
{% block "page-content" %}
	<div id="headline">
	    <div class="wrapper">
	        <h2>{{ title }}</h2>
	    </div>
	</div>
	
	<div id="pagebody">
	    <div id="bodyContent" class="wrapper">
	        <div id="schedule" class="col-9">
                 {% include 'scheduler/schedule_week.html' %}
	        </div>
	    
	        <div id="sidebar" class="calendar col-3">
	            <div id="txt" title="Local time in Saskatoon"></div>
	            <!-- include this div in the right position of your page -->
	            <div id="datepicker"></div>
	            <h2>Get Shifts by Proposal</h2>
	            <a target="_blank" href='https://user.lightsource.ca/portal.jsp?Cy3uQUnbK9L2RmSZs02CjVw+NzBMn25xE0d93h/z3QCY6K/hRn0K45w==L'>Print from Proposal System</a>
	            {% include 'scheduler/get_shifts_form.html' %}
	            <h2><span>Colour Legend</span></h2>
	            <table class="legend">
	                <tr><td class="NormalMode">User Beamtime</td></tr>
	                <tr><td class="Maintenance">Maintenance</td></tr>
	                <tr><td class="Development">Development/Commissioning</td></tr>
	                <tr><td class="Shutdown">Shutdown</td></tr>
	                <tr><td class="Special">Special Beam Requests</td></tr>
	                <tr><td>TBA</td></tr>
	            </table>
	        </div>
	    </div>
	</div>
	
	<!--<br class="clear">-->
{% endblock %}
	
