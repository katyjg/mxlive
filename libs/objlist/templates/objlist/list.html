{% load objlist %}
<div class="object-list row-fluid">
	{% if not show_grid %}
	<table class="table table-hover">
		<thead><tr>
			{% for header in headers %}
			<th class='{{header.style}}'>{% if header.url %}<a href='{{header.url}}'>{{header.text}}</a>{% else %}{{header.text}}{% endif %}
				{% endfor %}
		</tr></thead>
		<tbody>
		{% for obj in object_list %}
		{% show_row obj %}
		{% empty %}
		<tr><td colspan="{{headers|length}}"  class="empty">None Found</td></tr>
		{% endfor %}
		</tbody>
	</table>
	{% else %}
	<div class="grid row narrow-gutter">
		{% for obj in object_list %}
		{% show_grid_cell obj %}
		{% empty %}
		<div class="empty" style="height: 150px;">None Found</div>
		{% endfor %}
		<div class="spacer"></div>
	</div>
	{% endif %}
	{% include 'objlist/pagination.html' %}
</div>
<div id="objlist-form"></div>

<script type="text/javascript">
	$('tr[data-detail-url]').click(function(){
	    var sel = getSelection().toString();
        if(!sel) {
            {% if view.detail_target and view.detail_ajax %}
            $("{{view.detail_target}}").load($(this).attr('data-detail-url'));
            $('{{view.detail_target}}').modal();
            {% elif view.detail_target %}
            $("{{view.detail_target}}").load($(this).attr('data-detail-url'));
            {% else %}
            window.location = $(this).attr('data-detail-url');
            {% endif %}
        }
	});
	$('[data-add-url]').click(function(e) {
	    var sel = getSelection().toString();
        if(!sel) {
            if ($(this).is('[data-add-target]')) {
			    $($(this).attr('data-add-target')).load($(this).attr('data-add-url'));
            } else {
                $('#objlist-form').load($(this).attr('data-add-url'));
            }
        }
	});
</script>
