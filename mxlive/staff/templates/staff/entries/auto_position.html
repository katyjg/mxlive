{% load truncate_filters %}
{% load math_filters %}
<td {% if not container %}{% if object.is_editable %}class="empty automounter droppable droppable-add"   
    accept="container" 
    parent="{{ object.id }}"
    automounter_location="{{ letter }}"{% endif %}{% endif %}>
    <ul class="{% if container.json_dict.type == "Basket" %}basket{% else %}unipuck{% endif %}"><li><text>{{letter.1}}</text>

    {% if container %}<a style="font-size:80%;" {% if container %}href="{% url "staff-container-detail" container.pk %}" title="Go to Container {{container.name }} ({{container.project|capfirst}})"{% endif %}>{{ container.name|truncate_chars:7 }} {% if container %}({{container.project|capfirst|truncate_chars:3}}){% endif %}</a>
    {% if container %}{% if object.is_editable %}
        <a class="remove"
           rel="{% url "staff-runlist-remove-container" object.pk container.pk %}"
           href="#"
           onclick="remove_item(this);"
           title="Remove container from automounter"></a>
    {% endif %}{% endif %}</li></ul>
    <div class="{% if container.json_dict.type == "Basket" %}basket-xsm{% else %}unipuck-xsm{% endif %}" title="">
    {% for loc, crystal in container.loc_and_xtal.items %}
        <div class="crystal loc-{{loc}} {% if crystal %}{% if crystal.is_started %}started{% endif %} occupied{% else %}empty{% endif %}-xs"
           {% if crystal %}title="<strong>({{loc}}) {{ crystal }}</strong><br>{{ crystal.is_started }}"{% endif %}>
            &nbsp;
        </div>
    {% endfor %}
    {% endif %}
    </div>
</td>

