{% extends "base.html" %}
{% load objlist %}
{% load stats_extras %}

{% block headline %}
<h2 class="{{ol.object_type}}">{{ ol.opts.verbose_name_plural|capfirst }}</h2>
{% endblock %}

{% block object-tools %}
<div class="object-tools">
    <div class="left-element">
        <form class="search-object-list" style="display: inline;" action="{{ handler }}" method="get">
            <input class="field search" type="text" size="20" name="q" id="searchbar" value="Search . . ." id="searchbar" onfocus="if(this.value==this.defaultValue)this.value='';" onblur="if(this.value=='')this.value=this.defaultValue;" />
        </form>
    </div>
    <div class="mid-element">
        {% show_all_filters ol handler %}
    </div>
    <ul class="toolbar">
        {% if can_add %}
            <li class="add-tool" title="Add a new {{ol.object_type}} to the list">
                <a class="modal-form"  href='{{ handler }}new/'>Add Account</a>
            </li>
        {% endif %}
        <li class="toolbar-separator"></li>
        <li class="help-tool left-separator">
            <a class="modal-iframe" href="/help/index.html" title="User guide">Help</a>
        </li>
    </ul>
    <div class="clear"></div>
</div>
{% endblock %}

{% block content %}
<div class="object-list">
<div class="list-tools">
    {% if ol.multi_page %}
        {% include "objlist/pagination.html" %}
    {% endif %}
    {% if not ol.all_shown %}
        Showing {{ol.result_count}} of {{ol.result_count}} total | <a href="?all=1">Show all</a>
    {% endif %}
</div>
<table id="objlist-list-table" width="100%" cellspacing="0" cellpadding="2" border="0">
	<thead>
		<th>Username</th>
		<th>Contact</th>
		<th>Phone</th>
		<th>City</th>
		<th>Shipments this Year</th>
		<th>Forms</th>
	<thead>
		
    <tbody>
    {% for user in ol.object_list %}
    <tr class="{% cycle 'odd' 'even' %} link-row">
    	<td class="modal" href="{% url "staff-profile-edit" user.id %}">{{user.name}}</td>
    	<td class="modal" href="{% url "staff-profile-edit" user.id %}">{{user.contact_person|default_if_none:""}}</td>
    	<td class="modal" href="{% url "staff-profile-edit" user.id %}">{{user.contact_phone|default_if_none:""|truncatechars:16}}</td>
    	<td class="modal" href="{% url "staff-profile-edit" user.id %}">{{user.city|default_if_none:""}}</td>
    	<td class="modal" href="{% url "staff-profile-edit" user.id %}">{{user.shipment_count|default:""}}</td>
    	<td><a href="{% url "staff-shipment-form" user.pk %}"><img src="/static/img/pdf-icon-sm.png" title="Get shipping labels for {{user.name}}"/></a></td>
	</tr>
    {% endfor %}
    </tbody>
</table>
</div>
{% endblock %}