/* @license C3.js v0.7.8 | (c) C3 Team and other contributors | http://c3js.org/ */(function(e,t){"object"==typeof exports&&"undefined"!=typeof module?module.exports=t():"function"==typeof define&&define.amd?define(t):(e=e||self,e.c3=t())})(this,function(){'use strict';var p=Math.round,_=Math.abs,u=Math.cos,m=Math.sqrt,S=String.prototype,f=Math.sin,T=Math.PI,A=Math.max,b=Math.min,P=Math.pow,C=Math.ceil,L=Math.LN10,V=Math.log;function e(t){return e="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},e(t)}function t(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function i(e){return r(e)||o(e)||n()}function r(e){if(Array.isArray(e)){for(var t=0,a=Array(e.length);t<e.length;t++)a[t]=e[t];return a}}function o(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}function n(){throw new TypeError("Invalid attempt to spread non-iterable instance")}function s(e){var t=this;t.d3=window.d3?window.d3:"undefined"==typeof require?void 0:require("d3"),t.api=e,t.config=t.getDefaultConfig(),t.data={},t.cache={},t.axes={}}function d(e){this.internal=new s(this),this.internal.loadConfig(e),this.internal.beforeInit(e),this.internal.init(),this.internal.afterInit(e),function e(t,a,i){Object.keys(t).forEach(function(r){a[r]=t[r].bind(i),0<Object.keys(t[r]).length&&e(t[r],a[r],i)})}(d.prototype,this,this)}function l(e,t){var a=this;a.component=e,a.params=t||{},a.d3=e.d3,a.scale=a.d3.scaleLinear(),a.range,a.orient="bottom",a.innerTickSize=6,a.outerTickSize=this.params.withOuterTick?6:0,a.tickPadding=3,a.tickValues=null,a.tickFormat,a.tickArguments,a.tickOffset=0,a.tickCulling=!0,a.tickCentered,a.tickTextCharSize,a.tickTextRotate=a.params.tickTextRotate,a.tickLength,a.axis=a.generateAxis()}function g(e){return 1==e/P(10,C(V(e)/L-1e-12))}var G=function(e){return C(e)+.5},w=function(e){return 10*C(e/10)},E=function(e){return e[1]-e[0]},I=function(e,t,a){return D(e[t])?e[t]:a},R=function(e){var t=k(e),a=[e.pathSegList.getItem(0),e.pathSegList.getItem(1)],i=a[0].x,r=b(a[0].y,a[1].y);return{x:i,y:r,width:t.width,height:t.height}},k=function(e){try{return e.getBBox()}catch(e){return{x:0,y:0,width:0,height:0}}},O=function(e,t){var a=!1;return Object.keys(e).forEach(function(i){e[i]===t&&(a=!0)}),a},F=function(e){return Array.isArray(e)},D=function(e){return"undefined"!=typeof e},X=function(t){return"undefined"==typeof t||null===t||B(t)&&0===t.length||"object"===e(t)&&0===Object.keys(t).length},z=function(e){return"function"==typeof e},H=function(e){return"number"==typeof e},B=function(e){return"string"==typeof e},Y=function(e){return"undefined"==typeof e},M=function(e){return e||0===e},N=function(e){return!X(e)},U=function(e){return"string"==typeof e?e.replace(/</g,"&lt;").replace(/>/g,"&gt;"):e},W=function(e){var t;return Array.isArray(e)?(t=[]).concat.apply(t,i(e)):[]};l.prototype.axisX=function(e,t,a){e.attr("transform",function(e){return"translate("+C(t(e)+a)+", 0)"})},l.prototype.axisY=function(e,t){e.attr("transform",function(e){return"translate(0,"+C(t(e))+")"})},l.prototype.scaleExtent=function(e){var t=e[0],a=e[e.length-1];return t<a?[t,a]:[a,t]},l.prototype.generateTicks=function(e){var t=this,a=[],r,o;if(e.ticks)return e.ticks.apply(e,t.tickArguments);for(o=e.domain(),r=C(o[0]);r<o[1];r++)a.push(r);return 0<a.length&&0<a[0]&&a.unshift(a[0]-(a[1]-a[0])),a},l.prototype.copyScale=function(){var e=this,t=e.scale.copy(),a;return e.params.isCategory&&(a=e.scale.domain(),t.domain([a[0],a[1]-1])),t},l.prototype.textFormatted=function(e){var t=this,a=t.tickFormat?t.tickFormat(e):e;return"undefined"==typeof a?"":a},l.prototype.updateRange=function(){var e=this;return e.range=e.scale.rangeExtent?e.scale.rangeExtent():e.scaleExtent(e.scale.range()),e.range},l.prototype.updateTickTextCharSize=function(e){var t=this;if(t.tickTextCharSize)return t.tickTextCharSize;var a={h:11.5,w:5.5};return e.select("text").text(function(e){return t.textFormatted(e)}).each(function(e){var i=k(this),r=t.textFormatted(e),o=i.height,n=r?i.width/r.length:void 0;o&&n&&(a.h=o,a.w=n)}).text(""),t.tickTextCharSize=a,a},l.prototype.isVertical=function(){return"left"===this.orient||"right"===this.orient},l.prototype.tspanData=function(e,t,a){var i=this,r=i.params.tickMultiline?i.splitTickText(e,a):[].concat(i.textFormatted(e));return i.params.tickMultiline&&0<i.params.tickMultilineMax&&(r=i.ellipsify(r,i.params.tickMultilineMax)),r.map(function(e){return{index:t,splitted:e,length:r.length}})},l.prototype.splitTickText=function(e,t){function a(e,t){d=void 0;for(var o=1;o<t.length;o++)if(" "===t.charAt(o)&&(d=o),s=t.substr(0,o+1),l=r.tickTextCharSize.w*s.length,n<l)return a(e.concat(t.substr(0,d?d:o)),t.slice(d?d+1:o));return e.concat(t)}var r=this,o=r.textFormatted(e),n=r.params.tickWidth,s,d,l;return"[object Array]"===Object.prototype.toString.call(o)?o:((!n||0>=n)&&(n=r.isVertical()?95:r.params.isCategory?C(t(1)-t(0))-12:110),a([],o+""))},l.prototype.ellipsify=function(e,t){if(e.length<=t)return e;for(var a=e.slice(0,t),r=3,o=t-1,n;0<=o&&(n=a[o].length,a[o]=a[o].substr(0,n-r).padEnd(n,"."),r-=n,!(0>=r));o--);return a},l.prototype.updateTickLength=function(){var e=this;e.tickLength=A(e.innerTickSize,0)+e.tickPadding},l.prototype.lineY2=function(e){var t=this,a=t.scale(e)+(t.tickCentered?0:t.tickOffset);return t.range[0]<a&&a<t.range[1]?t.innerTickSize:0},l.prototype.textY=function(){var e=this,t=e.tickTextRotate;return t?11.5-2.5*(t/15)*(0<t?1:-1):e.tickLength},l.prototype.textTransform=function(){var e=this,t=e.tickTextRotate;return t?"rotate("+t+")":""},l.prototype.textTextAnchor=function(){var e=this,t=e.tickTextRotate;return t?0<t?"start":"end":"middle"},l.prototype.tspanDx=function(){var e=this,t=e.tickTextRotate;return t?8*f(T*(t/180)):0},l.prototype.tspanDy=function(e,t){var a=this,i=a.tickTextCharSize.h;return 0===t&&(a.isVertical()?i=-((e.length-1)*(a.tickTextCharSize.h/2)-3):i=".71em"),i},l.prototype.generateAxis=function(){function e(i,o){var n;return i.each(function(){var i=e.g=a.select(this),s=this.__chart__||t.scale,l=this.__chart__=t.copyScale(),g=t.tickValues?t.tickValues:t.generateTicks(l),p=i.selectAll(".tick").data(g,l),c=p.enter().insert("g",".domain").attr("class","tick").style("opacity",1e-6),h=p.exit().remove(),_=p.merge(c),y,u,m;r.isCategory?(t.tickOffset=C((l(1)-l(0))/2),u=t.tickCentered?0:t.tickOffset,m=t.tickCentered?t.tickOffset:0):t.tickOffset=u=0,t.updateRange(),t.updateTickLength(),t.updateTickTextCharSize(i.select(".tick"));var S=_.select("line").merge(c.append("line")),f=_.select("text").merge(c.append("text")),T=_.selectAll("text").selectAll("tspan").data(function(e,a){return t.tspanData(e,a,l)}),A=T.enter().append("tspan"),b=A.merge(T).text(function(e){return e.splitted});T.exit().remove();var P=i.selectAll(".domain").data([0]),v=P.enter().append("path").merge(P).attr("class","domain");switch(t.orient){case"bottom":{y=t.axisX,S.attr("x1",u).attr("x2",u).attr("y2",function(e,a){return t.lineY2(e,a)}),f.attr("x",0).attr("y",function(e,a){return t.textY(e,a)}).attr("transform",function(e,a){return t.textTransform(e,a)}).style("text-anchor",function(e,a){return t.textTextAnchor(e,a)}),b.attr("x",0).attr("dy",function(e,a){return t.tspanDy(e,a)}).attr("dx",function(e,a){return t.tspanDx(e,a)}),v.attr("d","M"+t.range[0]+","+t.outerTickSize+"V0H"+t.range[1]+"V"+t.outerTickSize);break}case"top":{y=t.axisX,S.attr("x1",u).attr("x2",u).attr("y2",function(e,a){return-1*t.lineY2(e,a)}),f.attr("x",0).attr("y",function(e,a){return-1*t.textY(e,a)-(r.isCategory?2:t.tickLength-2)}).attr("transform",function(e,a){return t.textTransform(e,a)}).style("text-anchor",function(e,a){return t.textTextAnchor(e,a)}),b.attr("x",0).attr("dy",function(e,a){return t.tspanDy(e,a)}).attr("dx",function(e,a){return t.tspanDx(e,a)}),v.attr("d","M"+t.range[0]+","+-t.outerTickSize+"V0H"+t.range[1]+"V"+-t.outerTickSize);break}case"left":{y=t.axisY,S.attr("x2",-t.innerTickSize).attr("y1",m).attr("y2",m),f.attr("x",-t.tickLength).attr("y",t.tickOffset).style("text-anchor","end"),b.attr("x",-t.tickLength).attr("dy",function(e,a){return t.tspanDy(e,a)}),v.attr("d","M"+-t.outerTickSize+","+t.range[0]+"H0V"+t.range[1]+"H"+-t.outerTickSize);break}case"right":{y=t.axisY,S.attr("x2",t.innerTickSize).attr("y1",m).attr("y2",m),f.attr("x",t.tickLength).attr("y",t.tickOffset).style("text-anchor","start"),b.attr("x",t.tickLength).attr("dy",function(e,a){return t.tspanDy(e,a)}),v.attr("d","M"+t.outerTickSize+","+t.range[0]+"H0V"+t.range[1]+"H"+t.outerTickSize);break}}if(l.rangeBand){var L=l,x=L.rangeBand()/2;s=l=function(e){return L(e)+x}}else s.rangeBand?s=l:h.call(y,l,t.tickOffset);c.call(y,s,t.tickOffset),n=(o?_.transition(o):_).style("opacity",1).call(y,l,t.tickOffset)}),n}var t=this,a=t.d3,r=t.params;return e.scale=function(a){return arguments.length?(t.scale=a,e):t.scale},e.orient=function(a){return arguments.length?(t.orient=a in{top:1,right:1,bottom:1,left:1}?a+"":"bottom",e):t.orient},e.tickFormat=function(a){return arguments.length?(t.tickFormat=a,e):t.tickFormat},e.tickCentered=function(a){return arguments.length?(t.tickCentered=a,e):t.tickCentered},e.tickOffset=function(){return t.tickOffset},e.tickInterval=function(){var a,i;return r.isCategory?a=2*t.tickOffset:(i=e.g.select("path.domain").node().getTotalLength()-2*t.outerTickSize,a=i/e.g.selectAll("line").size()),a===1/0?0:a},e.ticks=function(){return arguments.length?(t.tickArguments=arguments,e):t.tickArguments},e.tickCulling=function(a){return arguments.length?(t.tickCulling=a,e):t.tickCulling},e.tickValues=function(a){if("function"==typeof a)t.tickValues=function(){return a(t.scale.domain())};else{if(!arguments.length)return t.tickValues;t.tickValues=a}return e},e};var Q={target:"c3-target",chart:"c3-chart",chartLine:"c3-chart-line",chartLines:"c3-chart-lines",chartBar:"c3-chart-bar",chartBars:"c3-chart-bars",chartText:"c3-chart-text",chartTexts:"c3-chart-texts",chartArc:"c3-chart-arc",chartArcs:"c3-chart-arcs",chartArcsTitle:"c3-chart-arcs-title",chartArcsBackground:"c3-chart-arcs-background",chartArcsGaugeUnit:"c3-chart-arcs-gauge-unit",chartArcsGaugeMax:"c3-chart-arcs-gauge-max",chartArcsGaugeMin:"c3-chart-arcs-gauge-min",selectedCircle:"c3-selected-circle",selectedCircles:"c3-selected-circles",eventRect:"c3-event-rect",eventRects:"c3-event-rects",eventRectsSingle:"c3-event-rects-single",eventRectsMultiple:"c3-event-rects-multiple",zoomRect:"c3-zoom-rect",brush:"c3-brush",dragZoom:"c3-drag-zoom",focused:"c3-focused",defocused:"c3-defocused",region:"c3-region",regions:"c3-regions",title:"c3-title",tooltipContainer:"c3-tooltip-container",tooltip:"c3-tooltip",tooltipName:"c3-tooltip-name",shape:"c3-shape",shapes:"c3-shapes",line:"c3-line",lines:"c3-lines",bar:"c3-bar",bars:"c3-bars",circle:"c3-circle",circles:"c3-circles",arc:"c3-arc",arcLabelLine:"c3-arc-label-line",arcs:"c3-arcs",area:"c3-area",areas:"c3-areas",empty:"c3-empty",text:"c3-text",texts:"c3-texts",gaugeValue:"c3-gauge-value",grid:"c3-grid",gridLines:"c3-grid-lines",xgrid:"c3-xgrid",xgrids:"c3-xgrids",xgridLine:"c3-xgrid-line",xgridLines:"c3-xgrid-lines",xgridFocus:"c3-xgrid-focus",ygrid:"c3-ygrid",ygrids:"c3-ygrids",ygridLine:"c3-ygrid-line",ygridLines:"c3-ygrid-lines",colorScale:"c3-colorscale",stanfordElements:"c3-stanford-elements",stanfordLine:"c3-stanford-line",stanfordLines:"c3-stanford-lines",stanfordRegion:"c3-stanford-region",stanfordRegions:"c3-stanford-regions",stanfordText:"c3-stanford-text",stanfordTexts:"c3-stanford-texts",axis:"c3-axis",axisX:"c3-axis-x",axisXLabel:"c3-axis-x-label",axisY:"c3-axis-y",axisYLabel:"c3-axis-y-label",axisY2:"c3-axis-y2",axisY2Label:"c3-axis-y2-label",legendBackground:"c3-legend-background",legendItem:"c3-legend-item",legendItemEvent:"c3-legend-item-event",legendItemTile:"c3-legend-item-tile",legendItemHidden:"c3-legend-item-hidden",legendItemFocused:"c3-legend-item-focused",dragarea:"c3-dragarea",EXPANDED:"_expanded_",SELECTED:"_selected_",INCLUDED:"_included_"},j=function e(a){t(this,e),this.owner=a,this.d3=a.d3,this.internal=l};j.prototype.init=function(){var e=this.owner,t=e.config,a=e.main;e.axes.x=a.append("g").attr("class",Q.axis+" "+Q.axisX).attr("clip-path",t.axis_x_inner?"":e.clipPathForXAxis).attr("transform",e.getTranslate("x")).style("visibility",t.axis_x_show?"visible":"hidden"),e.axes.x.append("text").attr("class",Q.axisXLabel).attr("transform",t.axis_rotated?"rotate(-90)":"").style("text-anchor",this.textAnchorForXAxisLabel.bind(this)),e.axes.y=a.append("g").attr("class",Q.axis+" "+Q.axisY).attr("clip-path",t.axis_y_inner?"":e.clipPathForYAxis).attr("transform",e.getTranslate("y")).style("visibility",t.axis_y_show?"visible":"hidden"),e.axes.y.append("text").attr("class",Q.axisYLabel).attr("transform",t.axis_rotated?"":"rotate(-90)").style("text-anchor",this.textAnchorForYAxisLabel.bind(this)),e.axes.y2=a.append("g").attr("class",Q.axis+" "+Q.axisY2).attr("transform",e.getTranslate("y2")).style("visibility",t.axis_y2_show?"visible":"hidden"),e.axes.y2.append("text").attr("class",Q.axisY2Label).attr("transform",t.axis_rotated?"":"rotate(-90)").style("text-anchor",this.textAnchorForY2AxisLabel.bind(this))},j.prototype.getXAxis=function(e,t,a,i,r,o,n){var s=this.owner,d=s.config,l={isCategory:s.isCategorized(),withOuterTick:r,tickMultiline:d.axis_x_tick_multiline,tickMultilineMax:d.axis_x_tick_multiline?+d.axis_x_tick_multilineMax:0,tickWidth:d.axis_x_tick_width,tickTextRotate:n?0:d.axis_x_tick_rotate,withoutTransition:o},g=new this.internal(this,l).axis.scale(e).orient(t);return s.isTimeSeries()&&i&&"function"!=typeof i&&(i=i.map(function(e){return s.parseDate(e)})),g.tickFormat(a).tickValues(i),s.isCategorized()&&(g.tickCentered(d.axis_x_tick_centered),X(d.axis_x_tick_culling)&&(d.axis_x_tick_culling=!1)),g},j.prototype.updateXAxisTickValues=function(e,t){var a=this.owner,i=a.config,r;return(i.axis_x_tick_fit||i.axis_x_tick_count)&&(r=this.generateTickValues(a.mapTargetsToUniqueXs(e),i.axis_x_tick_count,a.isTimeSeries())),t?t.tickValues(r):(a.xAxis.tickValues(r),a.subXAxis.tickValues(r)),r},j.prototype.getYAxis=function(e,t,a,i,r,o,n){var s=this.owner,d=s.config,l=d["axis_".concat(e,"_tick_format")];!l&&s.isAxisNormalized(e)&&(l=function(e){return"".concat(e,"%")});var g=new this.internal(this,{withOuterTick:r,withoutTransition:o,tickTextRotate:n?0:d.axis_y_tick_rotate}).axis.scale(t).orient(a);return l&&g.tickFormat(l),s.isTimeSeriesY()?g.ticks(d.axis_y_tick_time_type,d.axis_y_tick_time_interval):g.tickValues(i),g},j.prototype.getId=function(e){var t=this.owner.config;return e in t.data_axes?t.data_axes[e]:"y"},j.prototype.getXAxisTickFormat=function(){var e=this.owner,t=e.config,a=e.isTimeSeries()?e.defaultAxisTimeFormat:e.isCategorized()?e.categoryName:function(e){return e};return t.axis_x_tick_format&&(z(t.axis_x_tick_format)?a=t.axis_x_tick_format:e.isTimeSeries()&&(a=function(a){return a?e.axisTimeFormat(t.axis_x_tick_format)(a):""})),z(a)?function(t){return a.call(e,t)}:a},j.prototype.getTickValues=function(e,t){return e?e:t?t.tickValues():void 0},j.prototype.getXAxisTickValues=function(){return this.getTickValues(this.owner.config.axis_x_tick_values,this.owner.xAxis)},j.prototype.getYAxisTickValues=function(){return this.getTickValues(this.owner.config.axis_y_tick_values,this.owner.yAxis)},j.prototype.getY2AxisTickValues=function(){return this.getTickValues(this.owner.config.axis_y2_tick_values,this.owner.y2Axis)},j.prototype.getLabelOptionByAxisId=function(e){var t=this.owner,a=t.config,i;return"y"===e?i=a.axis_y_label:"y2"===e?i=a.axis_y2_label:"x"==e&&(i=a.axis_x_label),i},j.prototype.getLabelText=function(e){var t=this.getLabelOptionByAxisId(e);return B(t)?t:t?t.text:null},j.prototype.setLabelText=function(e,t){var a=this.owner,i=a.config,r=this.getLabelOptionByAxisId(e);B(r)?"y"===e?i.axis_y_label=t:"y2"===e?i.axis_y2_label=t:"x"==e&&(i.axis_x_label=t):r&&(r.text=t)},j.prototype.getLabelPosition=function(t,a){var i=this.getLabelOptionByAxisId(t),r=i&&"object"===e(i)&&i.position?i.position:a;return{isInner:0<=r.indexOf("inner"),isOuter:0<=r.indexOf("outer"),isLeft:0<=r.indexOf("left"),isCenter:0<=r.indexOf("center"),isRight:0<=r.indexOf("right"),isTop:0<=r.indexOf("top"),isMiddle:0<=r.indexOf("middle"),isBottom:0<=r.indexOf("bottom")}},j.prototype.getXAxisLabelPosition=function(){return this.getLabelPosition("x",this.owner.config.axis_rotated?"inner-top":"inner-right")},j.prototype.getYAxisLabelPosition=function(){return this.getLabelPosition("y",this.owner.config.axis_rotated?"inner-right":"inner-top")},j.prototype.getY2AxisLabelPosition=function(){return this.getLabelPosition("y2",this.owner.config.axis_rotated?"inner-right":"inner-top")},j.prototype.getLabelPositionById=function(e){return"y2"===e?this.getY2AxisLabelPosition():"y"===e?this.getYAxisLabelPosition():this.getXAxisLabelPosition()},j.prototype.textForXAxisLabel=function(){return this.getLabelText("x")},j.prototype.textForYAxisLabel=function(){return this.getLabelText("y")},j.prototype.textForY2AxisLabel=function(){return this.getLabelText("y2")},j.prototype.xForAxisLabel=function(e,t){var a=this.owner;return e?t.isLeft?0:t.isCenter?a.width/2:a.width:t.isBottom?-a.height:t.isMiddle?-a.height/2:0},j.prototype.dxForAxisLabel=function(e,t){return e?t.isLeft?"0.5em":t.isRight?"-0.5em":"0":t.isTop?"-0.5em":t.isBottom?"0.5em":"0"},j.prototype.textAnchorForAxisLabel=function(e,t){return e?t.isLeft?"start":t.isCenter?"middle":"end":t.isBottom?"start":t.isMiddle?"middle":"end"},j.prototype.xForXAxisLabel=function(){return this.xForAxisLabel(!this.owner.config.axis_rotated,this.getXAxisLabelPosition())},j.prototype.xForYAxisLabel=function(){return this.xForAxisLabel(this.owner.config.axis_rotated,this.getYAxisLabelPosition())},j.prototype.xForY2AxisLabel=function(){return this.xForAxisLabel(this.owner.config.axis_rotated,this.getY2AxisLabelPosition())},j.prototype.dxForXAxisLabel=function(){return this.dxForAxisLabel(!this.owner.config.axis_rotated,this.getXAxisLabelPosition())},j.prototype.dxForYAxisLabel=function(){return this.dxForAxisLabel(this.owner.config.axis_rotated,this.getYAxisLabelPosition())},j.prototype.dxForY2AxisLabel=function(){return this.dxForAxisLabel(this.owner.config.axis_rotated,this.getY2AxisLabelPosition())},j.prototype.dyForXAxisLabel=function(){var e=this.owner,t=e.config,a=this.getXAxisLabelPosition();return t.axis_rotated?a.isInner?"1.2em":-25-(e.config.axis_x_inner?0:this.getMaxTickWidth("x")):a.isInner?"-0.5em":e.getHorizontalAxisHeight("x")-10},j.prototype.dyForYAxisLabel=function(){var e=this.owner,t=this.getYAxisLabelPosition();return e.config.axis_rotated?t.isInner?"-0.5em":"3em":t.isInner?"1.2em":-10-(e.config.axis_y_inner?0:this.getMaxTickWidth("y")+10)},j.prototype.dyForY2AxisLabel=function(){var e=this.owner,t=this.getY2AxisLabelPosition();return e.config.axis_rotated?t.isInner?"1.2em":"-2.2em":t.isInner?"-0.5em":15+(e.config.axis_y2_inner?0:this.getMaxTickWidth("y2")+15)},j.prototype.textAnchorForXAxisLabel=function(){var e=this.owner;return this.textAnchorForAxisLabel(!e.config.axis_rotated,this.getXAxisLabelPosition())},j.prototype.textAnchorForYAxisLabel=function(){var e=this.owner;return this.textAnchorForAxisLabel(e.config.axis_rotated,this.getYAxisLabelPosition())},j.prototype.textAnchorForY2AxisLabel=function(){var e=this.owner;return this.textAnchorForAxisLabel(e.config.axis_rotated,this.getY2AxisLabelPosition())},j.prototype.getMaxTickWidth=function(e,t){var a=this.owner,i=0,r,o,n,s,d;return t&&a.currentMaxTickWidths[e]?a.currentMaxTickWidths[e]:(a.svg&&(r=a.filterTargetsToShow(a.data.targets),"y"===e?(o=a.y.copy().domain(a.getYDomain(r,"y")),n=this.getYAxis(e,o,a.yOrient,a.yAxisTickValues,!1,!0,!0)):"y2"===e?(o=a.y2.copy().domain(a.getYDomain(r,"y2")),n=this.getYAxis(e,o,a.y2Orient,a.y2AxisTickValues,!1,!0,!0)):(o=a.x.copy().domain(a.getXDomain(r)),n=this.getXAxis(o,a.xOrient,a.xAxisTickFormat,a.xAxisTickValues,!1,!0,!0),this.updateXAxisTickValues(r,n)),s=a.d3.select("body").append("div").classed("c3",!0),d=s.append("svg").style("visibility","hidden").style("position","fixed").style("top",0).style("left",0),d.append("g").call(n).each(function(){a.d3.select(this).selectAll("text").each(function(){var e=k(this);i<e.width&&(i=e.width)}),s.remove()})),a.currentMaxTickWidths[e]=0>=i?a.currentMaxTickWidths[e]:i,a.currentMaxTickWidths[e])},j.prototype.updateLabels=function(e){var t=this.owner,a=t.main.select("."+Q.axisX+" ."+Q.axisXLabel),i=t.main.select("."+Q.axisY+" ."+Q.axisYLabel),r=t.main.select("."+Q.axisY2+" ."+Q.axisY2Label);(e?a.transition():a).attr("x",this.xForXAxisLabel.bind(this)).attr("dx",this.dxForXAxisLabel.bind(this)).attr("dy",this.dyForXAxisLabel.bind(this)).text(this.textForXAxisLabel.bind(this)),(e?i.transition():i).attr("x",this.xForYAxisLabel.bind(this)).attr("dx",this.dxForYAxisLabel.bind(this)).attr("dy",this.dyForYAxisLabel.bind(this)).text(this.textForYAxisLabel.bind(this)),(e?r.transition():r).attr("x",this.xForY2AxisLabel.bind(this)).attr("dx",this.dxForY2AxisLabel.bind(this)).attr("dy",this.dyForY2AxisLabel.bind(this)).text(this.textForY2AxisLabel.bind(this))},j.prototype.getPadding=function(e,t,a,i){var r="number"==typeof e?e:e[t];return M(r)?"ratio"===e.unit?e[t]*i:this.convertPixelsToAxisPadding(r,i):a},j.prototype.convertPixelsToAxisPadding=function(e,t){var a=this.owner,i=a.config.axis_rotated?a.width:a.height;return t*(e/i)},j.prototype.generateTickValues=function(e,t,a){var r=e,o,n,s,d,l,g,p;if(t)if(o=z(t)?t():t,1===o)r=[e[0]];else if(2===o)r=[e[0],e[e.length-1]];else if(2<o){for(d=o-2,n=e[0],s=e[e.length-1],l=(s-n)/(d+1),r=[n],g=0;g<d;g++)p=+n+l*(g+1),r.push(a?new Date(p):p);r.push(s)}return a||(r=r.sort(function(e,t){return e-t})),r},j.prototype.generateTransitions=function(e){var t=this.owner,a=t.axes;return{axisX:e?a.x.transition().duration(e):a.x,axisY:e?a.y.transition().duration(e):a.y,axisY2:e?a.y2.transition().duration(e):a.y2,axisSubX:e?a.subx.transition().duration(e):a.subx}},j.prototype.redraw=function(e,t){var a=this.owner,i=e?a.d3.transition().duration(e):null;a.axes.x.style("opacity",t?0:1).call(a.xAxis,i),a.axes.y.style("opacity",t?0:1).call(a.yAxis,i),a.axes.y2.style("opacity",t?0:1).call(a.y2Axis,i),a.axes.subx.style("opacity",t?0:1).call(a.subXAxis,i)};var Z={version:"0.7.8",chart:{fn:d.prototype,internal:{fn:s.prototype,axis:{fn:j.prototype,internal:{fn:l.prototype}}}},generate:function(e){return new d(e)}};s.prototype.beforeInit=function(){},s.prototype.afterInit=function(){},s.prototype.init=function(){var e=this,t=e.config;if(e.initParams(),t.data_url)e.convertUrlToData(t.data_url,t.data_mimeType,t.data_headers,t.data_keys,e.initWithData);else if(t.data_json)e.initWithData(e.convertJsonToData(t.data_json,t.data_keys));else if(t.data_rows)e.initWithData(e.convertRowsToData(t.data_rows));else if(t.data_columns)e.initWithData(e.convertColumnsToData(t.data_columns));else throw Error("url or json or rows or columns is required.")},s.prototype.initParams=function(){var e=this,t=e.d3,a=e.config;e.clipId="c3-"+ +new Date+"-clip",e.clipIdForXAxis=e.clipId+"-xaxis",e.clipIdForYAxis=e.clipId+"-yaxis",e.clipIdForGrid=e.clipId+"-grid",e.clipIdForSubchart=e.clipId+"-subchart",e.clipPath=e.getClipPath(e.clipId),e.clipPathForXAxis=e.getClipPath(e.clipIdForXAxis),e.clipPathForYAxis=e.getClipPath(e.clipIdForYAxis),e.clipPathForGrid=e.getClipPath(e.clipIdForGrid),e.clipPathForSubchart=e.getClipPath(e.clipIdForSubchart),e.dragStart=null,e.dragging=!1,e.flowing=!1,e.cancelClick=!1,e.mouseover=!1,e.transiting=!1,e.color=e.generateColor(),e.levelColor=e.generateLevelColor(),e.dataTimeParse=(a.data_xLocaltime?t.timeParse:t.utcParse)(e.config.data_xFormat),e.axisTimeFormat=a.axis_x_localtime?t.timeFormat:t.utcFormat,e.defaultAxisTimeFormat=function(e){return e.getMilliseconds()?t.timeFormat(".%L")(e):e.getSeconds()?t.timeFormat(":%S")(e):e.getMinutes()?t.timeFormat("%I:%M")(e):e.getHours()?t.timeFormat("%I %p")(e):e.getDay()&&1!==e.getDate()?t.timeFormat("%-m/%-d")(e):1===e.getDate()?e.getMonth()?t.timeFormat("%-m/%-d")(e):t.timeFormat("%Y/%-m/%-d")(e):t.timeFormat("%-m/%-d")(e)},e.hiddenTargetIds=[],e.hiddenLegendIds=[],e.focusedTargetIds=[],e.defocusedTargetIds=[],e.xOrient=a.axis_rotated?a.axis_x_inner?"right":"left":a.axis_x_inner?"top":"bottom",e.yOrient=a.axis_rotated?a.axis_y_inner?"top":"bottom":a.axis_y_inner?"right":"left",e.y2Orient=a.axis_rotated?a.axis_y2_inner?"bottom":"top":a.axis_y2_inner?"left":"right",e.subXOrient=a.axis_rotated?"left":"bottom",e.isLegendRight="right"===a.legend_position,e.isLegendInset="inset"===a.legend_position,e.isLegendTop="top-left"===a.legend_inset_anchor||"top-right"===a.legend_inset_anchor,e.isLegendLeft="top-left"===a.legend_inset_anchor||"bottom-left"===a.legend_inset_anchor,e.legendStep=0,e.legendItemWidth=0,e.legendItemHeight=0,e.currentMaxTickWidths={x:0,y:0,y2:0},e.rotated_padding_left=30,e.rotated_padding_right=a.axis_rotated&&!a.axis_x_show?0:30,e.rotated_padding_top=5,e.withoutFadeIn={},e.intervalForObserveInserted=void 0,e.axes.subx=t.selectAll([])},s.prototype.initChartElements=function(){this.initBar&&this.initBar(),this.initLine&&this.initLine(),this.initArc&&this.initArc(),this.initGauge&&this.initGauge(),this.initText&&this.initText()},s.prototype.initWithData=function(e){var t=this,a=t.d3,i=t.config,r=!0,o,n;t.axis=new j(t),t.selectChart=i.bindto?"function"==typeof i.bindto.node?i.bindto:a.select(i.bindto):a.selectAll([]),t.selectChart.empty()&&(t.selectChart=a.select(document.createElement("div")).style("opacity",0),t.observeInserted(t.selectChart),r=!1),t.selectChart.html("").classed("c3",!0),t.data.xs={},t.data.targets=t.convertDataToTargets(e),i.data_filter&&(t.data.targets=t.data.targets.filter(i.data_filter)),i.data_hide&&t.addHiddenTargetIds(!0===i.data_hide?t.mapToIds(t.data.targets):i.data_hide),i.legend_hide&&t.addHiddenLegendIds(!0===i.legend_hide?t.mapToIds(t.data.targets):i.legend_hide),t.isStanfordGraphType()&&t.initStanfordData(),t.updateSizes(),t.updateScales(),t.x.domain(a.extent(t.getXDomain(t.data.targets))),t.y.domain(t.getYDomain(t.data.targets,"y")),t.y2.domain(t.getYDomain(t.data.targets,"y2")),t.subX.domain(t.x.domain()),t.subY.domain(t.y.domain()),t.subY2.domain(t.y2.domain()),t.orgXDomain=t.x.domain(),t.svg=t.selectChart.append("svg").style("overflow","hidden").on("mouseenter",function(){return i.onmouseover.call(t)}).on("mouseleave",function(){return i.onmouseout.call(t)}),t.config.svg_classname&&t.svg.attr("class",t.config.svg_classname),o=t.svg.append("defs"),t.clipChart=t.appendClip(o,t.clipId),t.clipXAxis=t.appendClip(o,t.clipIdForXAxis),t.clipYAxis=t.appendClip(o,t.clipIdForYAxis),t.clipGrid=t.appendClip(o,t.clipIdForGrid),t.clipSubchart=t.appendClip(o,t.clipIdForSubchart),t.updateSvgSize(),n=t.main=t.svg.append("g").attr("transform",t.getTranslate("main")),t.initPie&&t.initPie(),t.initDragZoom&&t.initDragZoom(),t.initSubchart&&t.initSubchart(),t.initTooltip&&t.initTooltip(),t.initLegend&&t.initLegend(),t.initTitle&&t.initTitle(),t.initZoom&&t.initZoom(),t.isStanfordGraphType()&&t.drawColorScale(),t.initSubchartBrush&&t.initSubchartBrush(),n.append("text").attr("class",Q.text+" "+Q.empty).attr("text-anchor","middle").attr("dominant-baseline","middle"),t.initRegion(),t.initGrid(),n.append("g").attr("clip-path",t.clipPath).attr("class",Q.chart),i.grid_lines_front&&t.initGridLines(),t.initStanfordElements(),t.initEventRect(),t.initChartElements(),t.axis.init(),t.updateTargets(t.data.targets),i.axis_x_selection&&t.brush.selectionAsValue(t.getDefaultSelection()),r&&(t.updateDimension(),t.config.oninit.call(t),t.redraw({withTransition:!1,withTransform:!0,withUpdateXDomain:!0,withUpdateOrgXDomain:!0,withTransitionForAxis:!1})),t.bindResize(),t.bindWindowFocus(),t.api.element=t.selectChart.node()},s.prototype.smoothLines=function(e,t){var a=this;"grid"===t&&e.each(function(){var e=a.d3.select(this),t=e.attr("x1"),i=e.attr("x2"),r=e.attr("y1"),o=e.attr("y2");e.attr({x1:C(t),x2:C(i),y1:C(r),y2:C(o)})})},s.prototype.updateSizes=function(){var e=this,t=e.config,a=e.legend?e.getLegendHeight():0,i=e.legend?e.getLegendWidth():0,r=e.isLegendRight||e.isLegendInset?0:a,o=e.hasArcType(),n=t.axis_rotated||o?0:e.getHorizontalAxisHeight("x"),s=t.subchart_show&&!o?t.subchart_size_height+n:0;e.currentWidth=e.getCurrentWidth(),e.currentHeight=e.getCurrentHeight(),e.margin=t.axis_rotated?{top:e.getHorizontalAxisHeight("y2")+e.getCurrentPaddingTop(),right:o?0:e.getCurrentPaddingRight(),bottom:e.getHorizontalAxisHeight("y")+r+e.getCurrentPaddingBottom(),left:s+(o?0:e.getCurrentPaddingLeft())}:{top:4+e.getCurrentPaddingTop(),right:o?0:e.getCurrentPaddingRight(),bottom:n+s+r+e.getCurrentPaddingBottom(),left:o?0:e.getCurrentPaddingLeft()},e.margin2=t.axis_rotated?{top:e.margin.top,right:NaN,bottom:20+r,left:e.rotated_padding_left}:{top:e.currentHeight-s-r,right:NaN,bottom:n+r,left:e.margin.left},e.margin3={top:0,right:NaN,bottom:0,left:0},e.updateSizeForLegend&&e.updateSizeForLegend(a,i),e.width=e.currentWidth-e.margin.left-e.margin.right,e.height=e.currentHeight-e.margin.top-e.margin.bottom,0>e.width&&(e.width=0),0>e.height&&(e.height=0),e.width2=t.axis_rotated?e.margin.left-e.rotated_padding_left-e.rotated_padding_right:e.width,e.height2=t.axis_rotated?e.height:e.currentHeight-e.margin2.top-e.margin2.bottom,0>e.width2&&(e.width2=0),0>e.height2&&(e.height2=0),e.arcWidth=e.width-(e.isLegendRight?i+10:0),e.arcHeight=e.height-(e.isLegendRight?0:10),e.hasType("gauge")&&!t.gauge_fullCircle&&(e.arcHeight+=e.height-e.getGaugeLabelHeight()),e.updateRadius&&e.updateRadius(),e.isLegendRight&&o&&(e.margin3.left=e.arcWidth/2+1.1*e.radiusExpanded)},s.prototype.updateTargets=function(e){var t=this;t.updateTargetsForText(e),t.updateTargetsForBar(e),t.updateTargetsForLine(e),t.hasArcType()&&t.updateTargetsForArc&&t.updateTargetsForArc(e),t.updateTargetsForSubchart&&t.updateTargetsForSubchart(e),t.showTargets()},s.prototype.showTargets=function(){var e=this;e.svg.selectAll("."+Q.target).filter(function(t){return e.isTargetToShow(t.id)}).transition().duration(e.config.transition_duration).style("opacity",1)},s.prototype.redraw=function(e,t){var a=this,r=a.main,o=a.d3,n=a.config,s=a.getShapeIndices(a.isAreaType),d=a.getShapeIndices(a.isBarType),l=a.getShapeIndices(a.isLineType),g=a.hasArcType(),p=a.filterTargetsToShow(a.data.targets),c=a.xv.bind(a),h,_,x,y,u,m,S,f,T,A,b,P,v,C,L,V,G,w,E,R,k,O,F,D,X,z,H,B,Y,M,N;if(e=e||{},h=I(e,"withY",!0),_=I(e,"withSubchart",!0),x=I(e,"withTransition",!0),m=I(e,"withTransform",!1),S=I(e,"withUpdateXDomain",!1),f=I(e,"withUpdateOrgXDomain",!1),T=I(e,"withTrimXDomain",!0),v=I(e,"withUpdateXAxis",S),A=I(e,"withLegend",!1),b=I(e,"withEventRect",!0),P=I(e,"withDimension",!0),y=I(e,"withTransitionForExit",x),u=I(e,"withTransitionForAxis",x),E=x?n.transition_duration:0,R=y?E:0,k=u?E:0,t=t||a.axis.generateTransitions(k),A&&n.legend_show?a.updateLegend(a.mapToIds(a.data.targets),e,t):P&&a.updateDimension(!0),a.isCategorized()&&0===p.length&&a.x.domain([0,a.axes.x.selectAll(".tick").size()]),p.length?(a.updateXDomain(p,S,f,T),!n.axis_x_tick_values&&(z=a.axis.updateXAxisTickValues(p))):(a.xAxis.tickValues([]),a.subXAxis.tickValues([])),n.zoom_rescale&&!e.flow&&(Y=a.x.orgDomain()),a.y.domain(a.getYDomain(p,"y",Y)),a.y2.domain(a.getYDomain(p,"y2",Y)),!n.axis_y_tick_values&&n.axis_y_tick_count&&a.yAxis.tickValues(a.axis.generateTickValues(a.y.domain(),n.axis_y_tick_count)),!n.axis_y2_tick_values&&n.axis_y2_tick_count&&a.y2Axis.tickValues(a.axis.generateTickValues(a.y2.domain(),n.axis_y2_tick_count)),a.axis.redraw(k,g),a.axis.updateLabels(x),(S||v)&&p.length)if(n.axis_x_tick_culling&&z){for(H=1;H<z.length;H++)if(z.length/H<n.axis_x_tick_culling_max){B=H;break}a.svg.selectAll("."+Q.axisX+" .tick text").each(function(t){var e=z.indexOf(t);0<=e&&o.select(this).style("display",e%B?"none":"block")})}else a.svg.selectAll("."+Q.axisX+" .tick text").style("display","block");C=a.generateDrawArea?a.generateDrawArea(s,!1):void 0,L=a.generateDrawBar?a.generateDrawBar(d):void 0,V=a.generateDrawLine?a.generateDrawLine(l,!1):void 0,G=a.generateXYForText(s,d,l,!0),w=a.generateXYForText(s,d,l,!1),a.updateCircleY(),M=(a.config.axis_rotated?a.circleY:a.circleX).bind(a),N=(a.config.axis_rotated?a.circleX:a.circleY).bind(a),h&&(a.subY.domain(a.getYDomain(p,"y")),a.subY2.domain(a.getYDomain(p,"y2"))),a.updateXgridFocus(),r.select("text."+Q.text+"."+Q.empty).attr("x",a.width/2).attr("y",a.height/2).text(n.data_empty_label_text).transition().style("opacity",p.length?0:1),b&&a.redrawEventRect(),a.updateGrid(E),a.updateStanfordElements(E),a.updateRegion(E),a.updateBar(R),a.updateLine(R),a.updateArea(R),a.updateCircle(M,N),a.hasDataLabel()&&a.updateText(G,w,R),a.redrawTitle&&a.redrawTitle(),a.redrawArc&&a.redrawArc(E,R,m),a.redrawSubchart&&a.redrawSubchart(_,t,E,R,s,d,l),a.isStanfordGraphType()&&a.drawColorScale(),r.selectAll("."+Q.selectedCircles).filter(a.isBarType.bind(a)).selectAll("circle").remove(),e.flow&&(D=a.generateFlow({targets:p,flow:e.flow,duration:e.flow.duration,drawBar:L,drawLine:V,drawArea:C,cx:M,cy:N,xv:c,xForText:G,yForText:w})),E&&a.isTabVisible()?(X=o.transition().duration(E),O=[],[a.redrawBar(L,!0,X),a.redrawLine(V,!0,X),a.redrawArea(C,!0,X),a.redrawCircle(M,N,!0,X),a.redrawText(G,w,e.flow,!0,X),a.redrawRegion(!0,X),a.redrawGrid(!0,X)].forEach(function(e){e.forEach(function(e){O.push(e)})}),F=a.generateWait(),O.forEach(function(e){F.add(e)}),F(function(){D&&D(),n.onrendered&&n.onrendered.call(a)})):(a.redrawBar(L),a.redrawLine(V),a.redrawArea(C),a.redrawCircle(M,N),a.redrawText(G,w,e.flow),a.redrawRegion(),a.redrawGrid(),D&&D(),n.onrendered&&n.onrendered.call(a)),a.mapToIds(a.data.targets).forEach(function(e){a.withoutFadeIn[e]=!0})},s.prototype.updateAndRedraw=function(e){var t=this,a=t.config,i;e=e||{},e.withTransition=I(e,"withTransition",!0),e.withTransform=I(e,"withTransform",!1),e.withLegend=I(e,"withLegend",!1),e.withUpdateXDomain=I(e,"withUpdateXDomain",!0),e.withUpdateOrgXDomain=I(e,"withUpdateOrgXDomain",!0),e.withTransitionForExit=!1,e.withTransitionForTransform=I(e,"withTransitionForTransform",e.withTransition),t.updateSizes(),e.withLegend&&a.legend_show||(i=t.axis.generateTransitions(e.withTransitionForAxis?a.transition_duration:0),t.updateScales(),t.updateSvgSize(),t.transformAll(e.withTransitionForTransform,i)),t.redraw(e,i)},s.prototype.redrawWithoutRescale=function(){this.redraw({withY:!1,withSubchart:!1,withEventRect:!1,withTransitionForAxis:!1})},s.prototype.isTimeSeries=function(){return"timeseries"===this.config.axis_x_type},s.prototype.isCategorized=function(){return 0<=this.config.axis_x_type.indexOf("categor")},s.prototype.isCustomX=function(){var e=this,t=e.config;return!e.isTimeSeries()&&(t.data_x||N(t.data_xs))},s.prototype.isTimeSeriesY=function(){return"timeseries"===this.config.axis_y_type},s.prototype.getTranslate=function(e){var t=this,a=t.config,i,r;return"main"===e?(i=G(t.margin.left),r=G(t.margin.top)):"context"===e?(i=G(t.margin2.left),r=G(t.margin2.top)):"legend"===e?(i=t.margin3.left,r=t.margin3.top):"x"===e?(i=0,r=a.axis_rotated?0:t.height):"y"===e?(i=0,r=a.axis_rotated?t.height:0):"y2"===e?(i=a.axis_rotated?0:t.width,r=a.axis_rotated?1:0):"subx"===e?(i=0,r=a.axis_rotated?0:t.height2):"arc"==e&&(i=t.arcWidth/2,r=t.arcHeight/2-(t.hasType("gauge")?6:0)),"translate("+i+","+r+")"},s.prototype.initialOpacity=function(e){return null!==e.value&&this.withoutFadeIn[e.id]?1:0},s.prototype.initialOpacityForCircle=function(e){return null!==e.value&&this.withoutFadeIn[e.id]?this.opacityForCircle(e):0},s.prototype.opacityForCircle=function(e){var t=z(this.config.point_show)?this.config.point_show(e):this.config.point_show,a=t||this.isStanfordType(e)?1:0;return M(e.value)?this.isScatterType(e)?.5:a:0},s.prototype.opacityForText=function(){return this.hasDataLabel()?1:0},s.prototype.xx=function(e){return e?this.x(e.x):null},s.prototype.xvCustom=function(e,t){var a=this,i=t?e[t]:e.value;return a.isTimeSeries()?i=a.parseDate(e.value):a.isCategorized()&&"string"==typeof e.value&&(i=a.config.axis_x_categories.indexOf(e.value)),C(a.x(i))},s.prototype.yvCustom=function(e,t){var a=this,i=e.axis&&"y2"===e.axis?a.y2:a.y,r=t?e[t]:e.value;return C(i(r))},s.prototype.xv=function(e){var t=this,a=e.value;return t.isTimeSeries()?a=t.parseDate(e.value):t.isCategorized()&&"string"==typeof e.value&&(a=t.config.axis_x_categories.indexOf(e.value)),C(t.x(a))},s.prototype.yv=function(e){var t=this,a=e.axis&&"y2"===e.axis?t.y2:t.y;return C(a(e.value))},s.prototype.subxx=function(e){return e?this.subX(e.x):null},s.prototype.transformMain=function(e,t){var a=this,i,r,o;t&&t.axisX?i=t.axisX:(i=a.main.select("."+Q.axisX),e&&(i=i.transition())),t&&t.axisY?r=t.axisY:(r=a.main.select("."+Q.axisY),e&&(r=r.transition())),t&&t.axisY2?o=t.axisY2:(o=a.main.select("."+Q.axisY2),e&&(o=o.transition())),(e?a.main.transition():a.main).attr("transform",a.getTranslate("main")),i.attr("transform",a.getTranslate("x")),r.attr("transform",a.getTranslate("y")),o.attr("transform",a.getTranslate("y2")),a.main.select("."+Q.chartArcs).attr("transform",a.getTranslate("arc"))},s.prototype.transformAll=function(e,t){var a=this;a.transformMain(e,t),a.config.subchart_show&&a.transformContext(e,t),a.legend&&a.transformLegend(e)},s.prototype.updateSvgSize=function(){var e=this,t=e.svg.select(".c3-brush .overlay");e.svg.attr("width",e.currentWidth).attr("height",e.currentHeight),e.svg.selectAll(["#"+e.clipId,"#"+e.clipIdForGrid]).select("rect").attr("width",e.width).attr("height",e.height),e.svg.select("#"+e.clipIdForXAxis).select("rect").attr("x",e.getXAxisClipX.bind(e)).attr("y",e.getXAxisClipY.bind(e)).attr("width",e.getXAxisClipWidth.bind(e)).attr("height",e.getXAxisClipHeight.bind(e)),e.svg.select("#"+e.clipIdForYAxis).select("rect").attr("x",e.getYAxisClipX.bind(e)).attr("y",e.getYAxisClipY.bind(e)).attr("width",e.getYAxisClipWidth.bind(e)).attr("height",e.getYAxisClipHeight.bind(e)),e.svg.select("#"+e.clipIdForSubchart).select("rect").attr("width",e.width).attr("height",t.size()?t.attr("height"):0),e.selectChart.style("max-height",e.currentHeight+"px")},s.prototype.updateDimension=function(e){var t=this;e||(t.config.axis_rotated?(t.axes.x.call(t.xAxis),t.axes.subx.call(t.subXAxis)):(t.axes.y.call(t.yAxis),t.axes.y2.call(t.y2Axis))),t.updateSizes(),t.updateScales(),t.updateSvgSize(),t.transformAll(!1)},s.prototype.observeInserted=function(e){var t=this,a;return"undefined"==typeof MutationObserver?void window.console.error("MutationObserver not defined."):void(a=new MutationObserver(function(i){i.forEach(function(i){"childList"===i.type&&i.previousSibling&&(a.disconnect(),t.intervalForObserveInserted=window.setInterval(function(){e.node().parentNode&&(window.clearInterval(t.intervalForObserveInserted),t.updateDimension(),t.brush&&t.brush.update(),t.config.oninit.call(t),t.redraw({withTransform:!0,withUpdateXDomain:!0,withUpdateOrgXDomain:!0,withTransition:!1,withTransitionForTransform:!1,withLegend:!0}),e.transition().style("opacity",1))},10))})}),a.observe(e.node(),{attributes:!0,childList:!0,characterData:!0}))},s.prototype.bindResize=function(){var e=this,t=e.config;if(e.resizeFunction=e.generateResize(),e.resizeFunction.add(function(){t.onresize.call(e)}),t.resize_auto&&e.resizeFunction.add(function(){void 0!==e.resizeTimeout&&window.clearTimeout(e.resizeTimeout),e.resizeTimeout=window.setTimeout(function(){delete e.resizeTimeout,e.updateAndRedraw({withUpdateXDomain:!1,withUpdateOrgXDomain:!1,withTransition:!1,withTransitionForTransform:!1,withLegend:!0}),e.brush&&e.brush.update()},100)}),e.resizeFunction.add(function(){t.onresized.call(e)}),e.resizeIfElementDisplayed=function(){null!=e.api&&e.api.element.offsetParent&&e.resizeFunction()},window.attachEvent)window.attachEvent("onresize",e.resizeIfElementDisplayed);else if(window.addEventListener)window.addEventListener("resize",e.resizeIfElementDisplayed,!1);else{var a=window.onresize;a?(!a.add||!a.remove)&&(a=e.generateResize(),a.add(window.onresize)):a=e.generateResize(),a.add(e.resizeFunction),window.onresize=function(){e.api.element.offsetParent&&a()}}},s.prototype.bindWindowFocus=function(){var e=this;this.windowFocusHandler||(this.windowFocusHandler=function(){e.redraw()},window.addEventListener("focus",this.windowFocusHandler))},s.prototype.unbindWindowFocus=function(){window.removeEventListener("focus",this.windowFocusHandler),delete this.windowFocusHandler},s.prototype.generateResize=function(){function e(){t.forEach(function(e){e()})}var t=[];return e.add=function(e){t.push(e)},e.remove=function(e){for(var a=0;a<t.length;a++)if(t[a]===e){t.splice(a,1);break}},e},s.prototype.endall=function(e,t){var a=0;e.each(function(){++a}).on("end",function(){--a||t.apply(this,arguments)})},s.prototype.generateWait=function(){var e=this,t=[],a=function(a){var i=setInterval(function(){if(e.isTabVisible()){var r=0;t.forEach(function(e){if(e.empty())return void(r+=1);try{e.transition()}catch(t){r+=1}}),r===t.length&&(clearInterval(i),a&&a())}},50)};return a.add=function(e){t.push(e)},a},s.prototype.parseDate=function(t){var a=this,i;return t instanceof Date?i=t:"string"==typeof t?i=a.dataTimeParse(t):"object"===e(t)?i=new Date(+t):"number"==typeof t&&!isNaN(t)&&(i=new Date(+t)),(!i||isNaN(+i))&&window.console.error("Failed to parse x '"+t+"' to Date object"),i},s.prototype.isTabVisible=function(){return!document.hidden},s.prototype.getPathBox=R,s.prototype.CLASS=Q,function(){"SVGPathSeg"in window||(window.SVGPathSeg=function(e,t,a){this.pathSegType=e,this.pathSegTypeAsLetter=t,this._owningPathSegList=a},window.SVGPathSeg.prototype.classname="SVGPathSeg",window.SVGPathSeg.PATHSEG_UNKNOWN=0,window.SVGPathSeg.PATHSEG_CLOSEPATH=1,window.SVGPathSeg.PATHSEG_MOVETO_ABS=2,window.SVGPathSeg.PATHSEG_MOVETO_REL=3,window.SVGPathSeg.PATHSEG_LINETO_ABS=4,window.SVGPathSeg.PATHSEG_LINETO_REL=5,window.SVGPathSeg.PATHSEG_CURVETO_CUBIC_ABS=6,window.SVGPathSeg.PATHSEG_CURVETO_CUBIC_REL=7,window.SVGPathSeg.PATHSEG_CURVETO_QUADRATIC_ABS=8,window.SVGPathSeg.PATHSEG_CURVETO_QUADRATIC_REL=9,window.SVGPathSeg.PATHSEG_ARC_ABS=10,window.SVGPathSeg.PATHSEG_ARC_REL=11,window.SVGPathSeg.PATHSEG_LINETO_HORIZONTAL_ABS=12,window.SVGPathSeg.PATHSEG_LINETO_HORIZONTAL_REL=13,window.SVGPathSeg.PATHSEG_LINETO_VERTICAL_ABS=14,window.SVGPathSeg.PATHSEG_LINETO_VERTICAL_REL=15,window.SVGPathSeg.PATHSEG_CURVETO_CUBIC_SMOOTH_ABS=16,window.SVGPathSeg.PATHSEG_CURVETO_CUBIC_SMOOTH_REL=17,window.SVGPathSeg.PATHSEG_CURVETO_QUADRATIC_SMOOTH_ABS=18,window.SVGPathSeg.PATHSEG_CURVETO_QUADRATIC_SMOOTH_REL=19,window.SVGPathSeg.prototype._segmentChanged=function(){this._owningPathSegList&&this._owningPathSegList.segmentChanged(this)},window.SVGPathSegClosePath=function(e){window.SVGPathSeg.call(this,window.SVGPathSeg.PATHSEG_CLOSEPATH,"z",e)},window.SVGPathSegClosePath.prototype=Object.create(window.SVGPathSeg.prototype),window.SVGPathSegClosePath.prototype.toString=function(){return"[object SVGPathSegClosePath]"},window.SVGPathSegClosePath.prototype._asPathString=function(){return this.pathSegTypeAsLetter},window.SVGPathSegClosePath.prototype.clone=function(){return new window.SVGPathSegClosePath(void 0)},window.SVGPathSegMovetoAbs=function(e,t,a){window.SVGPathSeg.call(this,window.SVGPathSeg.PATHSEG_MOVETO_ABS,"M",e),this._x=t,this._y=a},window.SVGPathSegMovetoAbs.prototype=Object.create(window.SVGPathSeg.prototype),window.SVGPathSegMovetoAbs.prototype.toString=function(){return"[object SVGPathSegMovetoAbs]"},window.SVGPathSegMovetoAbs.prototype._asPathString=function(){return this.pathSegTypeAsLetter+" "+this._x+" "+this._y},window.SVGPathSegMovetoAbs.prototype.clone=function(){return new window.SVGPathSegMovetoAbs(void 0,this._x,this._y)},Object.defineProperty(window.SVGPathSegMovetoAbs.prototype,"x",{get:function(){return this._x},set:function(e){this._x=e,this._segmentChanged()},enumerable:!0}),Object.defineProperty(window.SVGPathSegMovetoAbs.prototype,"y",{get:function(){return this._y},set:function(e){this._y=e,this._segmentChanged()},enumerable:!0}),window.SVGPathSegMovetoRel=function(e,t,a){window.SVGPathSeg.call(this,window.SVGPathSeg.PATHSEG_MOVETO_REL,"m",e),this._x=t,this._y=a},window.SVGPathSegMovetoRel.prototype=Object.create(window.SVGPathSeg.prototype),window.SVGPathSegMovetoRel.prototype.toString=function(){return"[object SVGPathSegMovetoRel]"},window.SVGPathSegMovetoRel.prototype._asPathString=function(){return this.pathSegTypeAsLetter+" "+this._x+" "+this._y},window.SVGPathSegMovetoRel.prototype.clone=function(){return new window.SVGPathSegMovetoRel(void 0,this._x,this._y)},Object.defineProperty(window.SVGPathSegMovetoRel.prototype,"x",{get:function(){return this._x},set:function(e){this._x=e,this._segmentChanged()},enumerable:!0}),Object.defineProperty(window.SVGPathSegMovetoRel.prototype,"y",{get:function(){return this._y},set:function(e){this._y=e,this._segmentChanged()},enumerable:!0}),window.SVGPathSegLinetoAbs=function(e,t,a){window.SVGPathSeg.call(this,window.SVGPathSeg.PATHSEG_LINETO_ABS,"L",e),this._x=t,this._y=a},window.SVGPathSegLinetoAbs.prototype=Object.create(window.SVGPathSeg.prototype),window.SVGPathSegLinetoAbs.prototype.toString=function(){return"[object SVGPathSegLinetoAbs]"},window.SVGPathSegLinetoAbs.prototype._asPathString=function(){return this.pathSegTypeAsLetter+" "+this._x+" "+this._y},window.SVGPathSegLinetoAbs.prototype.clone=function(){return new window.SVGPathSegLinetoAbs(void 0,this._x,this._y)},Object.defineProperty(window.SVGPathSegLinetoAbs.prototype,"x",{get:function(){return this._x},set:function(e){this._x=e,this._segmentChanged()},enumerable:!0}),Object.defineProperty(window.SVGPathSegLinetoAbs.prototype,"y",{get:function(){return this._y},set:function(e){this._y=e,this._segmentChanged()},enumerable:!0}),window.SVGPathSegLinetoRel=function(e,t,a){window.SVGPathSeg.call(this,window.SVGPathSeg.PATHSEG_LINETO_REL,"l",e),this._x=t,this._y=a},window.SVGPathSegLinetoRel.prototype=Object.create(window.SVGPathSeg.prototype),window.SVGPathSegLinetoRel.prototype.toString=function(){return"[object SVGPathSegLinetoRel]"},window.SVGPathSegLinetoRel.prototype._asPathString=function(){return this.pathSegTypeAsLetter+" "+this._x+" "+this._y},window.SVGPathSegLinetoRel.prototype.clone=function(){return new window.SVGPathSegLinetoRel(void 0,this._x,this._y)},Object.defineProperty(window.SVGPathSegLinetoRel.prototype,"x",{get:function(){return this._x},set:function(e){this._x=e,this._segmentChanged()},enumerable:!0}),Object.defineProperty(window.SVGPathSegLinetoRel.prototype,"y",{get:function(){return this._y},set:function(e){this._y=e,this._segmentChanged()},enumerable:!0}),window.SVGPathSegCurvetoCubicAbs=function(e,t,a,i,r,o,n){window.SVGPathSeg.call(this,window.SVGPathSeg.PATHSEG_CURVETO_CUBIC_ABS,"C",e),this._x=t,this._y=a,this._x1=i,this._y1=r,this._x2=o,this._y2=n},window.SVGPathSegCurvetoCubicAbs.prototype=Object.create(window.SVGPathSeg.prototype),window.SVGPathSegCurvetoCubicAbs.prototype.toString=function(){return"[object SVGPathSegCurvetoCubicAbs]"},window.SVGPathSegCurvetoCubicAbs.prototype._asPathString=function(){return this.pathSegTypeAsLetter+" "+this._x1+" "+this._y1+" "+this._x2+" "+this._y2+" "+this._x+" "+this._y},window.SVGPathSegCurvetoCubicAbs.prototype.clone=function(){return new window.SVGPathSegCurvetoCubicAbs(void 0,this._x,this._y,this._x1,this._y1,this._x2,this._y2)},Object.defineProperty(window.SVGPathSegCurvetoCubicAbs.prototype,"x",{get:function(){return this._x},set:function(e){this._x=e,this._segmentChanged()},enumerable:!0}),Object.defineProperty(window.SVGPathSegCurvetoCubicAbs.prototype,"y",{get:function(){return this._y},set:function(e){this._y=e,this._segmentChanged()},enumerable:!0}),Object.defineProperty(window.SVGPathSegCurvetoCubicAbs.prototype,"x1",{get:function(){return this._x1},set:function(e){this._x1=e,this._segmentChanged()},enumerable:!0}),Object.defineProperty(window.SVGPathSegCurvetoCubicAbs.prototype,"y1",{get:function(){return this._y1},set:function(e){this._y1=e,this._segmentChanged()},enumerable:!0}),Object.defineProperty(window.SVGPathSegCurvetoCubicAbs.prototype,"x2",{get:function(){return this._x2},set:function(e){this._x2=e,this._segmentChanged()},enumerable:!0}),Object.defineProperty(window.SVGPathSegCurvetoCubicAbs.prototype,"y2",{get:function(){return this._y2},set:function(e){this._y2=e,this._segmentChanged()},enumerable:!0}),window.SVGPathSegCurvetoCubicRel=function(e,t,a,i,r,o,n){window.SVGPathSeg.call(this,window.SVGPathSeg.PATHSEG_CURVETO_CUBIC_REL,"c",e),this._x=t,this._y=a,this._x1=i,this._y1=r,this._x2=o,this._y2=n},window.SVGPathSegCurvetoCubicRel.prototype=Object.create(window.SVGPathSeg.prototype),window.SVGPathSegCurvetoCubicRel.prototype.toString=function(){return"[object SVGPathSegCurvetoCubicRel]"},window.SVGPathSegCurvetoCubicRel.prototype._asPathString=function(){return this.pathSegTypeAsLetter+" "+this._x1+" "+this._y1+" "+this._x2+" "+this._y2+" "+this._x+" "+this._y},window.SVGPathSegCurvetoCubicRel.prototype.clone=function(){return new window.SVGPathSegCurvetoCubicRel(void 0,this._x,this._y,this._x1,this._y1,this._x2,this._y2)},Object.defineProperty(window.SVGPathSegCurvetoCubicRel.prototype,"x",{get:function(){return this._x},set:function(e){this._x=e,this._segmentChanged()},enumerable:!0}),Object.defineProperty(window.SVGPathSegCurvetoCubicRel.prototype,"y",{get:function(){return this._y},set:function(e){this._y=e,this._segmentChanged()},enumerable:!0}),Object.defineProperty(window.SVGPathSegCurvetoCubicRel.prototype,"x1",{get:function(){return this._x1},set:function(e){this._x1=e,this._segmentChanged()},enumerable:!0}),Object.defineProperty(window.SVGPathSegCurvetoCubicRel.prototype,"y1",{get:function(){return this._y1},set:function(e){this._y1=e,this._segmentChanged()},enumerable:!0}),Object.defineProperty(window.SVGPathSegCurvetoCubicRel.prototype,"x2",{get:function(){return this._x2},set:function(e){this._x2=e,this._segmentChanged()},enumerable:!0}),Object.defineProperty(window.SVGPathSegCurvetoCubicRel.prototype,"y2",{get:function(){return this._y2},set:function(e){this._y2=e,this._segmentChanged()},enumerable:!0}),window.SVGPathSegCurvetoQuadraticAbs=function(e,t,a,i,r){window.SVGPathSeg.call(this,window.SVGPathSeg.PATHSEG_CURVETO_QUADRATIC_ABS,"Q",e),this._x=t,this._y=a,this._x1=i,this._y1=r},window.SVGPathSegCurvetoQuadraticAbs.prototype=Object.create(window.SVGPathSeg.prototype),window.SVGPathSegCurvetoQuadraticAbs.prototype.toString=function(){return"[object SVGPathSegCurvetoQuadraticAbs]"},window.SVGPathSegCurvetoQuadraticAbs.prototype._asPathString=function(){return this.pathSegTypeAsLetter+" "+this._x1+" "+this._y1+" "+this._x+" "+this._y},window.SVGPathSegCurvetoQuadraticAbs.prototype.clone=function(){return new window.SVGPathSegCurvetoQuadraticAbs(void 0,this._x,this._y,this._x1,this._y1)},Object.defineProperty(window.SVGPathSegCurvetoQuadraticAbs.prototype,"x",{get:function(){return this._x},set:function(e){this._x=e,this._segmentChanged()},enumerable:!0}),Object.defineProperty(window.SVGPathSegCurvetoQuadraticAbs.prototype,"y",{get:function(){return this._y},set:function(e){this._y=e,this._segmentChanged()},enumerable:!0}),Object.defineProperty(window.SVGPathSegCurvetoQuadraticAbs.prototype,"x1",{get:function(){return this._x1},set:function(e){this._x1=e,this._segmentChanged()},enumerable:!0}),Object.defineProperty(window.SVGPathSegCurvetoQuadraticAbs.prototype,"y1",{get:function(){return this._y1},set:function(e){this._y1=e,this._segmentChanged()},enumerable:!0}),window.SVGPathSegCurvetoQuadraticRel=function(e,t,a,i,r){window.SVGPathSeg.call(this,window.SVGPathSeg.PATHSEG_CURVETO_QUADRATIC_REL,"q",e),this._x=t,this._y=a,this._x1=i,this._y1=r},window.SVGPathSegCurvetoQuadraticRel.prototype=Object.create(window.SVGPathSeg.prototype),window.SVGPathSegCurvetoQuadraticRel.prototype.toString=function(){return"[object SVGPathSegCurvetoQuadraticRel]"},window.SVGPathSegCurvetoQuadraticRel.prototype._asPathString=function(){return this.pathSegTypeAsLetter+" "+this._x1+" "+this._y1+" "+this._x+" "+this._y},window.SVGPathSegCurvetoQuadraticRel.prototype.clone=function(){return new window.SVGPathSegCurvetoQuadraticRel(void 0,this._x,this._y,this._x1,this._y1)},Object.defineProperty(window.SVGPathSegCurvetoQuadraticRel.prototype,"x",{get:function(){return this._x},set:function(e){this._x=e,this._segmentChanged()},enumerable:!0}),Object.defineProperty(window.SVGPathSegCurvetoQuadraticRel.prototype,"y",{get:function(){return this._y},set:function(e){this._y=e,this._segmentChanged()},enumerable:!0}),Object.defineProperty(window.SVGPathSegCurvetoQuadraticRel.prototype,"x1",{get:function(){return this._x1},set:function(e){this._x1=e,this._segmentChanged()},enumerable:!0}),Object.defineProperty(window.SVGPathSegCurvetoQuadraticRel.prototype,"y1",{get:function(){return this._y1},set:function(e){this._y1=e,this._segmentChanged()},enumerable:!0}),window.SVGPathSegArcAbs=function(e,t,a,i,r,o,n,s){window.SVGPathSeg.call(this,window.SVGPathSeg.PATHSEG_ARC_ABS,"A",e),this._x=t,this._y=a,this._r1=i,this._r2=r,this._angle=o,this._largeArcFlag=n,this._sweepFlag=s},window.SVGPathSegArcAbs.prototype=Object.create(window.SVGPathSeg.prototype),window.SVGPathSegArcAbs.prototype.toString=function(){return"[object SVGPathSegArcAbs]"},window.SVGPathSegArcAbs.prototype._asPathString=function(){return this.pathSegTypeAsLetter+" "+this._r1+" "+this._r2+" "+this._angle+" "+(this._largeArcFlag?"1":"0")+" "+(this._sweepFlag?"1":"0")+" "+this._x+" "+this._y},window.SVGPathSegArcAbs.prototype.clone=function(){return new window.SVGPathSegArcAbs(void 0,this._x,this._y,this._r1,this._r2,this._angle,this._largeArcFlag,this._sweepFlag)},Object.defineProperty(window.SVGPathSegArcAbs.prototype,"x",{get:function(){return this._x},set:function(e){this._x=e,this._segmentChanged()},enumerable:!0}),Object.defineProperty(window.SVGPathSegArcAbs.prototype,"y",{get:function(){return this._y},set:function(e){this._y=e,this._segmentChanged()},enumerable:!0}),Object.defineProperty(window.SVGPathSegArcAbs.prototype,"r1",{get:function(){return this._r1},set:function(e){this._r1=e,this._segmentChanged()},enumerable:!0}),Object.defineProperty(window.SVGPathSegArcAbs.prototype,"r2",{get:function(){return this._r2},set:function(e){this._r2=e,this._segmentChanged()},enumerable:!0}),Object.defineProperty(window.SVGPathSegArcAbs.prototype,"angle",{get:function(){return this._angle},set:function(e){this._angle=e,this._segmentChanged()},enumerable:!0}),Object.defineProperty(window.SVGPathSegArcAbs.prototype,"largeArcFlag",{get:function(){return this._largeArcFlag},set:function(e){this._largeArcFlag=e,this._segmentChanged()},enumerable:!0}),Object.defineProperty(window.SVGPathSegArcAbs.prototype,"sweepFlag",{get:function(){return this._sweepFlag},set:function(e){this._sweepFlag=e,this._segmentChanged()},enumerable:!0}),window.SVGPathSegArcRel=function(e,t,a,i,r,o,n,s){window.SVGPathSeg.call(this,window.SVGPathSeg.PATHSEG_ARC_REL,"a",e),this._x=t,this._y=a,this._r1=i,this._r2=r,this._angle=o,this._largeArcFlag=n,this._sweepFlag=s},window.SVGPathSegArcRel.prototype=Object.create(window.SVGPathSeg.prototype),window.SVGPathSegArcRel.prototype.toString=function(){return"[object SVGPathSegArcRel]"},window.SVGPathSegArcRel.prototype._asPathString=function(){return this.pathSegTypeAsLetter+" "+this._r1+" "+this._r2+" "+this._angle+" "+(this._largeArcFlag?"1":"0")+" "+(this._sweepFlag?"1":"0")+" "+this._x+" "+this._y},window.SVGPathSegArcRel.prototype.clone=function(){return new window.SVGPathSegArcRel(void 0,this._x,this._y,this._r1,this._r2,this._angle,this._largeArcFlag,this._sweepFlag)},Object.defineProperty(window.SVGPathSegArcRel.prototype,"x",{get:function(){return this._x},set:function(e){this._x=e,this._segmentChanged()},enumerable:!0}),Object.defineProperty(window.SVGPathSegArcRel.prototype,"y",{get:function(){return this._y},set:function(e){this._y=e,this._segmentChanged()},enumerable:!0}),Object.defineProperty(window.SVGPathSegArcRel.prototype,"r1",{get:function(){return this._r1},set:function(e){this._r1=e,this._segmentChanged()},enumerable:!0}),Object.defineProperty(window.SVGPathSegArcRel.prototype,"r2",{get:function(){return this._r2},set:function(e){this._r2=e,this._segmentChanged()},enumerable:!0}),Object.defineProperty(window.SVGPathSegArcRel.prototype,"angle",{get:function(){return this._angle},set:function(e){this._angle=e,this._segmentChanged()},enumerable:!0}),Object.defineProperty(window.SVGPathSegArcRel.prototype,"largeArcFlag",{get:function(){return this._largeArcFlag},set:function(e){this._largeArcFlag=e,this._segmentChanged()},enumerable:!0}),Object.defineProperty(window.SVGPathSegArcRel.prototype,"sweepFlag",{get:function(){return this._sweepFlag},set:function(e){this._sweepFlag=e,this._segmentChanged()},enumerable:!0}),window.SVGPathSegLinetoHorizontalAbs=function(e,t){window.SVGPathSeg.call(this,window.SVGPathSeg.PATHSEG_LINETO_HORIZONTAL_ABS,"H",e),this._x=t},window.SVGPathSegLinetoHorizontalAbs.prototype=Object.create(window.SVGPathSeg.prototype),window.SVGPathSegLinetoHorizontalAbs.prototype.toString=function(){return"[object SVGPathSegLinetoHorizontalAbs]"},window.SVGPathSegLinetoHorizontalAbs.prototype._asPathString=function(){return this.pathSegTypeAsLetter+" "+this._x},window.SVGPathSegLinetoHorizontalAbs.prototype.clone=function(){return new window.SVGPathSegLinetoHorizontalAbs(void 0,this._x)},Object.defineProperty(window.SVGPathSegLinetoHorizontalAbs.prototype,"x",{get:function(){return this._x},set:function(e){this._x=e,this._segmentChanged()},enumerable:!0}),window.SVGPathSegLinetoHorizontalRel=function(e,t){window.SVGPathSeg.call(this,window.SVGPathSeg.PATHSEG_LINETO_HORIZONTAL_REL,"h",e),this._x=t},window.SVGPathSegLinetoHorizontalRel.prototype=Object.create(window.SVGPathSeg.prototype),window.SVGPathSegLinetoHorizontalRel.prototype.toString=function(){return"[object SVGPathSegLinetoHorizontalRel]"},window.SVGPathSegLinetoHorizontalRel.prototype._asPathString=function(){return this.pathSegTypeAsLetter+" "+this._x},window.SVGPathSegLinetoHorizontalRel.prototype.clone=function(){return new window.SVGPathSegLinetoHorizontalRel(void 0,this._x)},Object.defineProperty(window.SVGPathSegLinetoHorizontalRel.prototype,"x",{get:function(){return this._x},set:function(e){this._x=e,this._segmentChanged()},enumerable:!0}),window.SVGPathSegLinetoVerticalAbs=function(e,t){window.SVGPathSeg.call(this,window.SVGPathSeg.PATHSEG_LINETO_VERTICAL_ABS,"V",e),this._y=t},window.SVGPathSegLinetoVerticalAbs.prototype=Object.create(window.SVGPathSeg.prototype),window.SVGPathSegLinetoVerticalAbs.prototype.toString=function(){return"[object SVGPathSegLinetoVerticalAbs]"},window.SVGPathSegLinetoVerticalAbs.prototype._asPathString=function(){return this.pathSegTypeAsLetter+" "+this._y},window.SVGPathSegLinetoVerticalAbs.prototype.clone=function(){return new window.SVGPathSegLinetoVerticalAbs(void 0,this._y)},Object.defineProperty(window.SVGPathSegLinetoVerticalAbs.prototype,"y",{get:function(){return this._y},set:function(e){this._y=e,this._segmentChanged()},enumerable:!0}),window.SVGPathSegLinetoVerticalRel=function(e,t){window.SVGPathSeg.call(this,window.SVGPathSeg.PATHSEG_LINETO_VERTICAL_REL,"v",e),this._y=t},window.SVGPathSegLinetoVerticalRel.prototype=Object.create(window.SVGPathSeg.prototype),window.SVGPathSegLinetoVerticalRel.prototype.toString=function(){return"[object SVGPathSegLinetoVerticalRel]"},window.SVGPathSegLinetoVerticalRel.prototype._asPathString=function(){return this.pathSegTypeAsLetter+" "+this._y},window.SVGPathSegLinetoVerticalRel.prototype.clone=function(){return new window.SVGPathSegLinetoVerticalRel(void 0,this._y)},Object.defineProperty(window.SVGPathSegLinetoVerticalRel.prototype,"y",{get:function(){return this._y},set:function(e){this._y=e,this._segmentChanged()},enumerable:!0}),window.SVGPathSegCurvetoCubicSmoothAbs=function(e,t,a,i,r){window.SVGPathSeg.call(this,window.SVGPathSeg.PATHSEG_CURVETO_CUBIC_SMOOTH_ABS,"S",e),this._x=t,this._y=a,this._x2=i,this._y2=r},window.SVGPathSegCurvetoCubicSmoothAbs.prototype=Object.create(window.SVGPathSeg.prototype),window.SVGPathSegCurvetoCubicSmoothAbs.prototype.toString=function(){return"[object SVGPathSegCurvetoCubicSmoothAbs]"},window.SVGPathSegCurvetoCubicSmoothAbs.prototype._asPathString=function(){return this.pathSegTypeAsLetter+" "+this._x2+" "+this._y2+" "+this._x+" "+this._y},window.SVGPathSegCurvetoCubicSmoothAbs.prototype.clone=function(){return new window.SVGPathSegCurvetoCubicSmoothAbs(void 0,this._x,this._y,this._x2,this._y2)},Object.defineProperty(window.SVGPathSegCurvetoCubicSmoothAbs.prototype,"x",{get:function(){return this._x},set:function(e){this._x=e,this._segmentChanged()},enumerable:!0}),Object.defineProperty(window.SVGPathSegCurvetoCubicSmoothAbs.prototype,"y",{get:function(){return this._y},set:function(e){this._y=e,this._segmentChanged()},enumerable:!0}),Object.defineProperty(window.SVGPathSegCurvetoCubicSmoothAbs.prototype,"x2",{get:function(){return this._x2},set:function(e){this._x2=e,this._segmentChanged()},enumerable:!0}),Object.defineProperty(window.SVGPathSegCurvetoCubicSmoothAbs.prototype,"y2",{get:function(){return this._y2},set:function(e){this._y2=e,this._segmentChanged()},enumerable:!0}),window.SVGPathSegCurvetoCubicSmoothRel=function(e,t,a,i,r){window.SVGPathSeg.call(this,window.SVGPathSeg.PATHSEG_CURVETO_CUBIC_SMOOTH_REL,"s",e),this._x=t,this._y=a,this._x2=i,this._y2=r},window.SVGPathSegCurvetoCubicSmoothRel.prototype=Object.create(window.SVGPathSeg.prototype),window.SVGPathSegCurvetoCubicSmoothRel.prototype.toString=function(){return"[object SVGPathSegCurvetoCubicSmoothRel]"},window.SVGPathSegCurvetoCubicSmoothRel.prototype._asPathString=function(){return this.pathSegTypeAsLetter+" "+this._x2+" "+this._y2+" "+this._x+" "+this._y},window.SVGPathSegCurvetoCubicSmoothRel.prototype.clone=function(){return new window.SVGPathSegCurvetoCubicSmoothRel(void 0,this._x,this._y,this._x2,this._y2)},Object.defineProperty(window.SVGPathSegCurvetoCubicSmoothRel.prototype,"x",{get:function(){return this._x},set:function(e){this._x=e,this._segmentChanged()},enumerable:!0}),Object.defineProperty(window.SVGPathSegCurvetoCubicSmoothRel.prototype,"y",{get:function(){return this._y},set:function(e){this._y=e,this._segmentChanged()},enumerable:!0}),Object.defineProperty(window.SVGPathSegCurvetoCubicSmoothRel.prototype,"x2",{get:function(){return this._x2},set:function(e){this._x2=e,this._segmentChanged()},enumerable:!0}),Object.defineProperty(window.SVGPathSegCurvetoCubicSmoothRel.prototype,"y2",{get:function(){return this._y2},set:function(e){this._y2=e,this._segmentChanged()},enumerable:!0}),window.SVGPathSegCurvetoQuadraticSmoothAbs=function(e,t,a){window.SVGPathSeg.call(this,window.SVGPathSeg.PATHSEG_CURVETO_QUADRATIC_SMOOTH_ABS,"T",e),this._x=t,this._y=a},window.SVGPathSegCurvetoQuadraticSmoothAbs.prototype=Object.create(window.SVGPathSeg.prototype),window.SVGPathSegCurvetoQuadraticSmoothAbs.prototype.toString=function(){return"[object SVGPathSegCurvetoQuadraticSmoothAbs]"},window.SVGPathSegCurvetoQuadraticSmoothAbs.prototype._asPathString=function(){return this.pathSegTypeAsLetter+" "+this._x+" "+this._y},window.SVGPathSegCurvetoQuadraticSmoothAbs.prototype.clone=function(){return new window.SVGPathSegCurvetoQuadraticSmoothAbs(void 0,this._x,this._y)},Object.defineProperty(window.SVGPathSegCurvetoQuadraticSmoothAbs.prototype,"x",{get:function(){return this._x},set:function(e){this._x=e,this._segmentChanged()},enumerable:!0}),Object.defineProperty(window.SVGPathSegCurvetoQuadraticSmoothAbs.prototype,"y",{get:function(){return this._y},set:function(e){this._y=e,this._segmentChanged()},enumerable:!0}),window.SVGPathSegCurvetoQuadraticSmoothRel=function(e,t,a){window.SVGPathSeg.call(this,window.SVGPathSeg.PATHSEG_CURVETO_QUADRATIC_SMOOTH_REL,"t",e),this._x=t,this._y=a},window.SVGPathSegCurvetoQuadraticSmoothRel.prototype=Object.create(window.SVGPathSeg.prototype),window.SVGPathSegCurvetoQuadraticSmoothRel.prototype.toString=function(){return"[object SVGPathSegCurvetoQuadraticSmoothRel]"},window.SVGPathSegCurvetoQuadraticSmoothRel.prototype._asPathString=function(){return this.pathSegTypeAsLetter+" "+this._x+" "+this._y},window.SVGPathSegCurvetoQuadraticSmoothRel.prototype.clone=function(){return new window.SVGPathSegCurvetoQuadraticSmoothRel(void 0,this._x,this._y)},Object.defineProperty(window.SVGPathSegCurvetoQuadraticSmoothRel.prototype,"x",{get:function(){return this._x},set:function(e){this._x=e,this._segmentChanged()},enumerable:!0}),Object.defineProperty(window.SVGPathSegCurvetoQuadraticSmoothRel.prototype,"y",{get:function(){return this._y},set:function(e){this._y=e,this._segmentChanged()},enumerable:!0}),window.SVGPathElement.prototype.createSVGPathSegClosePath=function(){return new window.SVGPathSegClosePath(void 0)},window.SVGPathElement.prototype.createSVGPathSegMovetoAbs=function(e,t){return new window.SVGPathSegMovetoAbs(void 0,e,t)},window.SVGPathElement.prototype.createSVGPathSegMovetoRel=function(e,t){return new window.SVGPathSegMovetoRel(void 0,e,t)},window.SVGPathElement.prototype.createSVGPathSegLinetoAbs=function(e,t){return new window.SVGPathSegLinetoAbs(void 0,e,t)},window.SVGPathElement.prototype.createSVGPathSegLinetoRel=function(e,t){return new window.SVGPathSegLinetoRel(void 0,e,t)},window.SVGPathElement.prototype.createSVGPathSegCurvetoCubicAbs=function(e,t,a,i,r,o){return new window.SVGPathSegCurvetoCubicAbs(void 0,e,t,a,i,r,o)},window.SVGPathElement.prototype.createSVGPathSegCurvetoCubicRel=function(e,t,a,i,r,o){return new window.SVGPathSegCurvetoCubicRel(void 0,e,t,a,i,r,o)},window.SVGPathElement.prototype.createSVGPathSegCurvetoQuadraticAbs=function(e,t,a,i){return new window.SVGPathSegCurvetoQuadraticAbs(void 0,e,t,a,i)},window.SVGPathElement.prototype.createSVGPathSegCurvetoQuadraticRel=function(e,t,a,i){return new window.SVGPathSegCurvetoQuadraticRel(void 0,e,t,a,i)},window.SVGPathElement.prototype.createSVGPathSegArcAbs=function(e,t,a,i,r,o,n){return new window.SVGPathSegArcAbs(void 0,e,t,a,i,r,o,n)},window.SVGPathElement.prototype.createSVGPathSegArcRel=function(e,t,a,i,r,o,n){return new window.SVGPathSegArcRel(void 0,e,t,a,i,r,o,n)},window.SVGPathElement.prototype.createSVGPathSegLinetoHorizontalAbs=function(e){return new window.SVGPathSegLinetoHorizontalAbs(void 0,e)},window.SVGPathElement.prototype.createSVGPathSegLinetoHorizontalRel=function(e){return new window.SVGPathSegLinetoHorizontalRel(void 0,e)},window.SVGPathElement.prototype.createSVGPathSegLinetoVerticalAbs=function(e){return new window.SVGPathSegLinetoVerticalAbs(void 0,e)},window.SVGPathElement.prototype.createSVGPathSegLinetoVerticalRel=function(e){return new window.SVGPathSegLinetoVerticalRel(void 0,e)},window.SVGPathElement.prototype.createSVGPathSegCurvetoCubicSmoothAbs=function(e,t,a,i){return new window.SVGPathSegCurvetoCubicSmoothAbs(void 0,e,t,a,i)},window.SVGPathElement.prototype.createSVGPathSegCurvetoCubicSmoothRel=function(e,t,a,i){return new window.SVGPathSegCurvetoCubicSmoothRel(void 0,e,t,a,i)},window.SVGPathElement.prototype.createSVGPathSegCurvetoQuadraticSmoothAbs=function(e,t){return new window.SVGPathSegCurvetoQuadraticSmoothAbs(void 0,e,t)},window.SVGPathElement.prototype.createSVGPathSegCurvetoQuadraticSmoothRel=function(e,t){return new window.SVGPathSegCurvetoQuadraticSmoothRel(void 0,e,t)},!("getPathSegAtLength"in window.SVGPathElement.prototype)&&(window.SVGPathElement.prototype.getPathSegAtLength=function(e){if(void 0===e||!isFinite(e))throw"Invalid arguments.";var t=document.createElementNS("http://www.w3.org/2000/svg","path");t.setAttribute("d",this.getAttribute("d"));var a=t.pathSegList.numberOfItems-1;if(0>=a)return 0;do{if(t.pathSegList.removeItem(a),e>t.getTotalLength())break;a--}while(0<a);return a})),"SVGPathSegList"in window||(window.SVGPathSegList=function(e){this._pathElement=e,this._list=this._parsePath(this._pathElement.getAttribute("d")),this._mutationObserverConfig={attributes:!0,attributeFilter:["d"]},this._pathElementMutationObserver=new MutationObserver(this._updateListFromPathMutations.bind(this)),this._pathElementMutationObserver.observe(this._pathElement,this._mutationObserverConfig)},window.SVGPathSegList.prototype.classname="SVGPathSegList",Object.defineProperty(window.SVGPathSegList.prototype,"numberOfItems",{get:function(){return this._checkPathSynchronizedToList(),this._list.length},enumerable:!0}),Object.defineProperty(window.SVGPathElement.prototype,"pathSegList",{get:function(){return this._pathSegList||(this._pathSegList=new window.SVGPathSegList(this)),this._pathSegList},enumerable:!0}),Object.defineProperty(window.SVGPathElement.prototype,"normalizedPathSegList",{get:function(){return this.pathSegList},enumerable:!0}),Object.defineProperty(window.SVGPathElement.prototype,"animatedPathSegList",{get:function(){return this.pathSegList},enumerable:!0}),Object.defineProperty(window.SVGPathElement.prototype,"animatedNormalizedPathSegList",{get:function(){return this.pathSegList},enumerable:!0}),window.SVGPathSegList.prototype._checkPathSynchronizedToList=function(){this._updateListFromPathMutations(this._pathElementMutationObserver.takeRecords())},window.SVGPathSegList.prototype._updateListFromPathMutations=function(e){if(this._pathElement){var t=!1;e.forEach(function(e){"d"==e.attributeName&&(t=!0)}),t&&(this._list=this._parsePath(this._pathElement.getAttribute("d")))}},window.SVGPathSegList.prototype._writeListToPath=function(){this._pathElementMutationObserver.disconnect(),this._pathElement.setAttribute("d",window.SVGPathSegList._pathSegArrayAsString(this._list)),this._pathElementMutationObserver.observe(this._pathElement,this._mutationObserverConfig)},window.SVGPathSegList.prototype.segmentChanged=function(){this._writeListToPath()},window.SVGPathSegList.prototype.clear=function(){this._checkPathSynchronizedToList(),this._list.forEach(function(e){e._owningPathSegList=null}),this._list=[],this._writeListToPath()},window.SVGPathSegList.prototype.initialize=function(e){return this._checkPathSynchronizedToList(),this._list=[e],e._owningPathSegList=this,this._writeListToPath(),e},window.SVGPathSegList.prototype._checkValidIndex=function(e){if(isNaN(e)||0>e||e>=this.numberOfItems)throw"INDEX_SIZE_ERR"},window.SVGPathSegList.prototype.getItem=function(e){return this._checkPathSynchronizedToList(),this._checkValidIndex(e),this._list[e]},window.SVGPathSegList.prototype.insertItemBefore=function(e,t){return this._checkPathSynchronizedToList(),t>this.numberOfItems&&(t=this.numberOfItems),e._owningPathSegList&&(e=e.clone()),this._list.splice(t,0,e),e._owningPathSegList=this,this._writeListToPath(),e},window.SVGPathSegList.prototype.replaceItem=function(e,t){return this._checkPathSynchronizedToList(),e._owningPathSegList&&(e=e.clone()),this._checkValidIndex(t),this._list[t]=e,e._owningPathSegList=this,this._writeListToPath(),e},window.SVGPathSegList.prototype.removeItem=function(e){this._checkPathSynchronizedToList(),this._checkValidIndex(e);var t=this._list[e];return this._list.splice(e,1),this._writeListToPath(),t},window.SVGPathSegList.prototype.appendItem=function(e){return this._checkPathSynchronizedToList(),e._owningPathSegList&&(e=e.clone()),this._list.push(e),e._owningPathSegList=this,this._writeListToPath(),e},window.SVGPathSegList._pathSegArrayAsString=function(e){var t="",a=!0;return e.forEach(function(e){a?(a=!1,t+=e._asPathString()):t+=" "+e._asPathString()}),t},window.SVGPathSegList.prototype._parsePath=function(e){if(!e||0==e.length)return[];var t=this,a=function(){this.pathSegList=[]};a.prototype.appendSegment=function(e){this.pathSegList.push(e)};var i=function(e){this._string=e,this._currentIndex=0,this._endIndex=this._string.length,this._previousCommand=window.SVGPathSeg.PATHSEG_UNKNOWN,this._skipOptionalSpaces()};i.prototype._isCurrentSpace=function(){var e=this._string[this._currentIndex];return" ">=e&&(" "==e||"\n"==e||"\t"==e||"\r"==e||"\f"==e)},i.prototype._skipOptionalSpaces=function(){for(;this._currentIndex<this._endIndex&&this._isCurrentSpace();)this._currentIndex++;return this._currentIndex<this._endIndex},i.prototype._skipOptionalSpacesOrDelimiter=function(){return(!(this._currentIndex<this._endIndex)||this._isCurrentSpace()||","==this._string.charAt(this._currentIndex))&&(this._skipOptionalSpaces()&&this._currentIndex<this._endIndex&&","==this._string.charAt(this._currentIndex)&&(this._currentIndex++,this._skipOptionalSpaces()),this._currentIndex<this._endIndex)},i.prototype.hasMoreData=function(){return this._currentIndex<this._endIndex},i.prototype.peekSegmentType=function(){var e=this._string[this._currentIndex];return this._pathSegTypeFromChar(e)},i.prototype._pathSegTypeFromChar=function(e){return"Z"===e||"z"===e?window.SVGPathSeg.PATHSEG_CLOSEPATH:"M"===e?window.SVGPathSeg.PATHSEG_MOVETO_ABS:"m"===e?window.SVGPathSeg.PATHSEG_MOVETO_REL:"L"===e?window.SVGPathSeg.PATHSEG_LINETO_ABS:"l"===e?window.SVGPathSeg.PATHSEG_LINETO_REL:"C"===e?window.SVGPathSeg.PATHSEG_CURVETO_CUBIC_ABS:"c"===e?window.SVGPathSeg.PATHSEG_CURVETO_CUBIC_REL:"Q"===e?window.SVGPathSeg.PATHSEG_CURVETO_QUADRATIC_ABS:"q"===e?window.SVGPathSeg.PATHSEG_CURVETO_QUADRATIC_REL:"A"===e?window.SVGPathSeg.PATHSEG_ARC_ABS:"a"===e?window.SVGPathSeg.PATHSEG_ARC_REL:"H"===e?window.SVGPathSeg.PATHSEG_LINETO_HORIZONTAL_ABS:"h"===e?window.SVGPathSeg.PATHSEG_LINETO_HORIZONTAL_REL:"V"===e?window.SVGPathSeg.PATHSEG_LINETO_VERTICAL_ABS:"v"===e?window.SVGPathSeg.PATHSEG_LINETO_VERTICAL_REL:"S"===e?window.SVGPathSeg.PATHSEG_CURVETO_CUBIC_SMOOTH_ABS:"s"===e?window.SVGPathSeg.PATHSEG_CURVETO_CUBIC_SMOOTH_REL:"T"===e?window.SVGPathSeg.PATHSEG_CURVETO_QUADRATIC_SMOOTH_ABS:"t"===e?window.SVGPathSeg.PATHSEG_CURVETO_QUADRATIC_SMOOTH_REL:window.SVGPathSeg.PATHSEG_UNKNOWN},i.prototype._nextCommandHelper=function(e,t){return("+"==e||"-"==e||"."==e||"0"<=e&&"9">=e)&&t!=window.SVGPathSeg.PATHSEG_CLOSEPATH?t==window.SVGPathSeg.PATHSEG_MOVETO_ABS?window.SVGPathSeg.PATHSEG_LINETO_ABS:t==window.SVGPathSeg.PATHSEG_MOVETO_REL?window.SVGPathSeg.PATHSEG_LINETO_REL:t:window.SVGPathSeg.PATHSEG_UNKNOWN},i.prototype.initialCommandIsMoveTo=function(){if(!this.hasMoreData())return!0;var e=this.peekSegmentType();return e==window.SVGPathSeg.PATHSEG_MOVETO_ABS||e==window.SVGPathSeg.PATHSEG_MOVETO_REL},i.prototype._parseNumber=function(){var e=0,t=0,a=1,i=0,r=1,o=1,n=this._currentIndex;if(this._skipOptionalSpaces(),this._currentIndex<this._endIndex&&"+"==this._string.charAt(this._currentIndex)?this._currentIndex++:this._currentIndex<this._endIndex&&"-"==this._string.charAt(this._currentIndex)&&(this._currentIndex++,r=-1),!(this._currentIndex==this._endIndex||("0">this._string.charAt(this._currentIndex)||"9"<this._string.charAt(this._currentIndex))&&"."!=this._string.charAt(this._currentIndex))){for(var s=this._currentIndex;this._currentIndex<this._endIndex&&"0"<=this._string.charAt(this._currentIndex)&&"9">=this._string.charAt(this._currentIndex);)this._currentIndex++;if(this._currentIndex!=s)for(var d=this._currentIndex-1,l=1;d>=s;)t+=l*(this._string.charAt(d--)-"0"),l*=10;if(this._currentIndex<this._endIndex&&"."==this._string.charAt(this._currentIndex)){if(this._currentIndex++,this._currentIndex>=this._endIndex||"0">this._string.charAt(this._currentIndex)||"9"<this._string.charAt(this._currentIndex))return;for(;this._currentIndex<this._endIndex&&"0"<=this._string.charAt(this._currentIndex)&&"9">=this._string.charAt(this._currentIndex);)a*=10,i+=(this._string.charAt(this._currentIndex)-"0")/a,this._currentIndex+=1}if(this._currentIndex!=n&&this._currentIndex+1<this._endIndex&&("e"==this._string.charAt(this._currentIndex)||"E"==this._string.charAt(this._currentIndex))&&"x"!=this._string.charAt(this._currentIndex+1)&&"m"!=this._string.charAt(this._currentIndex+1)){if(this._currentIndex++,"+"==this._string.charAt(this._currentIndex)?this._currentIndex++:"-"==this._string.charAt(this._currentIndex)&&(this._currentIndex++,o=-1),this._currentIndex>=this._endIndex||"0">this._string.charAt(this._currentIndex)||"9"<this._string.charAt(this._currentIndex))return;for(;this._currentIndex<this._endIndex&&"0"<=this._string.charAt(this._currentIndex)&&"9">=this._string.charAt(this._currentIndex);)e*=10,e+=this._string.charAt(this._currentIndex)-"0",this._currentIndex++}var g=t+i;if(g*=r,e&&(g*=P(10,o*e)),n!=this._currentIndex)return this._skipOptionalSpacesOrDelimiter(),g}},i.prototype._parseArcFlag=function(){if(!(this._currentIndex>=this._endIndex)){var e=!1,t=this._string.charAt(this._currentIndex++);if("0"==t)e=!1;else if("1"==t)e=!0;else return;return this._skipOptionalSpacesOrDelimiter(),e}},i.prototype.parseSegment=function(){var e=this._string[this._currentIndex],a=this._pathSegTypeFromChar(e);if(a==window.SVGPathSeg.PATHSEG_UNKNOWN){if(this._previousCommand==window.SVGPathSeg.PATHSEG_UNKNOWN)return null;if(a=this._nextCommandHelper(e,this._previousCommand),a==window.SVGPathSeg.PATHSEG_UNKNOWN)return null}else this._currentIndex++;switch(this._previousCommand=a,a){case window.SVGPathSeg.PATHSEG_MOVETO_REL:return new window.SVGPathSegMovetoRel(t,this._parseNumber(),this._parseNumber());case window.SVGPathSeg.PATHSEG_MOVETO_ABS:return new window.SVGPathSegMovetoAbs(t,this._parseNumber(),this._parseNumber());case window.SVGPathSeg.PATHSEG_LINETO_REL:return new window.SVGPathSegLinetoRel(t,this._parseNumber(),this._parseNumber());case window.SVGPathSeg.PATHSEG_LINETO_ABS:return new window.SVGPathSegLinetoAbs(t,this._parseNumber(),this._parseNumber());case window.SVGPathSeg.PATHSEG_LINETO_HORIZONTAL_REL:return new window.SVGPathSegLinetoHorizontalRel(t,this._parseNumber());case window.SVGPathSeg.PATHSEG_LINETO_HORIZONTAL_ABS:return new window.SVGPathSegLinetoHorizontalAbs(t,this._parseNumber());case window.SVGPathSeg.PATHSEG_LINETO_VERTICAL_REL:return new window.SVGPathSegLinetoVerticalRel(t,this._parseNumber());case window.SVGPathSeg.PATHSEG_LINETO_VERTICAL_ABS:return new window.SVGPathSegLinetoVerticalAbs(t,this._parseNumber());case window.SVGPathSeg.PATHSEG_CLOSEPATH:return this._skipOptionalSpaces(),new window.SVGPathSegClosePath(t);case window.SVGPathSeg.PATHSEG_CURVETO_CUBIC_REL:var i={x1:this._parseNumber(),y1:this._parseNumber(),x2:this._parseNumber(),y2:this._parseNumber(),x:this._parseNumber(),y:this._parseNumber()};return new window.SVGPathSegCurvetoCubicRel(t,i.x,i.y,i.x1,i.y1,i.x2,i.y2);case window.SVGPathSeg.PATHSEG_CURVETO_CUBIC_ABS:var i={x1:this._parseNumber(),y1:this._parseNumber(),x2:this._parseNumber(),y2:this._parseNumber(),x:this._parseNumber(),y:this._parseNumber()};return new window.SVGPathSegCurvetoCubicAbs(t,i.x,i.y,i.x1,i.y1,i.x2,i.y2);case window.SVGPathSeg.PATHSEG_CURVETO_CUBIC_SMOOTH_REL:var i={x2:this._parseNumber(),y2:this._parseNumber(),x:this._parseNumber(),y:this._parseNumber()};return new window.SVGPathSegCurvetoCubicSmoothRel(t,i.x,i.y,i.x2,i.y2);case window.SVGPathSeg.PATHSEG_CURVETO_CUBIC_SMOOTH_ABS:var i={x2:this._parseNumber(),y2:this._parseNumber(),x:this._parseNumber(),y:this._parseNumber()};return new window.SVGPathSegCurvetoCubicSmoothAbs(t,i.x,i.y,i.x2,i.y2);case window.SVGPathSeg.PATHSEG_CURVETO_QUADRATIC_REL:var i={x1:this._parseNumber(),y1:this._parseNumber(),x:this._parseNumber(),y:this._parseNumber()};return new window.SVGPathSegCurvetoQuadraticRel(t,i.x,i.y,i.x1,i.y1);case window.SVGPathSeg.PATHSEG_CURVETO_QUADRATIC_ABS:var i={x1:this._parseNumber(),y1:this._parseNumber(),x:this._parseNumber(),y:this._parseNumber()};return new window.SVGPathSegCurvetoQuadraticAbs(t,i.x,i.y,i.x1,i.y1);case window.SVGPathSeg.PATHSEG_CURVETO_QUADRATIC_SMOOTH_REL:return new window.SVGPathSegCurvetoQuadraticSmoothRel(t,this._parseNumber(),this._parseNumber());case window.SVGPathSeg.PATHSEG_CURVETO_QUADRATIC_SMOOTH_ABS:return new window.SVGPathSegCurvetoQuadraticSmoothAbs(t,this._parseNumber(),this._parseNumber());case window.SVGPathSeg.PATHSEG_ARC_REL:var i={x1:this._parseNumber(),y1:this._parseNumber(),arcAngle:this._parseNumber(),arcLarge:this._parseArcFlag(),arcSweep:this._parseArcFlag(),x:this._parseNumber(),y:this._parseNumber()};return new window.SVGPathSegArcRel(t,i.x,i.y,i.x1,i.y1,i.arcAngle,i.arcLarge,i.arcSweep);case window.SVGPathSeg.PATHSEG_ARC_ABS:var i={x1:this._parseNumber(),y1:this._parseNumber(),arcAngle:this._parseNumber(),arcLarge:this._parseArcFlag(),arcSweep:this._parseArcFlag(),x:this._parseNumber(),y:this._parseNumber()};return new window.SVGPathSegArcAbs(t,i.x,i.y,i.x1,i.y1,i.arcAngle,i.arcLarge,i.arcSweep);default:throw"Unknown path seg type.";}};var r=new a,o=new i(e);if(!o.initialCommandIsMoveTo())return[];for(;o.hasMoreData();){var n=o.parseSegment();if(!n)return[];r.appendSegment(n)}return r.pathSegList})}(),S.padEnd||(S.padEnd=function(e,t){return e>>=0,t=("undefined"==typeof t?" ":t)+"",this.length>e?this+"":(e-=this.length,e>t.length&&(t+=t.repeat(e/t.length)),this+""+t.slice(0,e))}),d.prototype.axis=function(){},d.prototype.axis.labels=function(e){var t=this.internal;arguments.length&&(Object.keys(e).forEach(function(a){t.axis.setLabelText(a,e[a])}),t.axis.updateLabels())},d.prototype.axis.max=function(t){var a=this.internal,i=a.config;return arguments.length?void("object"===e(t)?(M(t.x)&&(i.axis_x_max=t.x),M(t.y)&&(i.axis_y_max=t.y),M(t.y2)&&(i.axis_y2_max=t.y2)):i.axis_y_max=i.axis_y2_max=t,a.redraw({withUpdateOrgXDomain:!0,withUpdateXDomain:!0})):{x:i.axis_x_max,y:i.axis_y_max,y2:i.axis_y2_max}},d.prototype.axis.min=function(t){var a=this.internal,i=a.config;return arguments.length?void("object"===e(t)?(M(t.x)&&(i.axis_x_min=t.x),M(t.y)&&(i.axis_y_min=t.y),M(t.y2)&&(i.axis_y2_min=t.y2)):i.axis_y_min=i.axis_y2_min=t,a.redraw({withUpdateOrgXDomain:!0,withUpdateXDomain:!0})):{x:i.axis_x_min,y:i.axis_y_min,y2:i.axis_y2_min}},d.prototype.axis.range=function(e){return arguments.length?void(D(e.max)&&this.axis.max(e.max),D(e.min)&&this.axis.min(e.min)):{max:this.axis.max(),min:this.axis.min()}},d.prototype.category=function(e,t){var a=this.internal,i=a.config;return 1<arguments.length&&(i.axis_x_categories[e]=t,a.redraw()),i.axis_x_categories[e]},d.prototype.categories=function(e){var t=this.internal,a=t.config;return arguments.length?(a.axis_x_categories=e,t.redraw(),a.axis_x_categories):a.axis_x_categories},d.prototype.resize=function(e){var t=this.internal,a=t.config;a.size_width=e?e.width:null,a.size_height=e?e.height:null,this.flush()},d.prototype.flush=function(){var e=this.internal;e.updateAndRedraw({withLegend:!0,withTransition:!1,withTransitionForTransform:!1})},d.prototype.destroy=function(){var e=this.internal;if(window.clearInterval(e.intervalForObserveInserted),void 0!==e.resizeTimeout&&window.clearTimeout(e.resizeTimeout),window.detachEvent)window.detachEvent("onresize",e.resizeIfElementDisplayed);else if(window.removeEventListener)window.removeEventListener("resize",e.resizeIfElementDisplayed);else{var t=window.onresize;t&&t.add&&t.remove&&t.remove(e.resizeFunction)}return e.resizeFunction.remove(),e.unbindWindowFocus(),e.selectChart.classed("c3",!1).html(""),Object.keys(e).forEach(function(t){e[t]=null}),null},d.prototype.color=function(e){var t=this.internal;return t.color(e)},d.prototype.data=function(e){var t=this.internal.data.targets;return"undefined"==typeof e?t:t.filter(function(a){return 0<=[].concat(e).indexOf(a.id)})},d.prototype.data.shown=function(e){return this.internal.filterTargetsToShow(this.data(e))},d.prototype.data.values=function(e){var t=!(1<arguments.length&&void 0!==arguments[1])||arguments[1],a=null;if(e){var i=this.data(e);i&&F(i)&&(a=i.reduce(function(e,a){var i=a.values.map(function(e){return e.value});return t?e=e.concat(i):e.push(i),e},[]))}return a},d.prototype.data.names=function(e){return this.internal.clearLegendItemTextBoxCache(),this.internal.updateDataAttributes("names",e)},d.prototype.data.colors=function(e){return this.internal.updateDataAttributes("colors",e)},d.prototype.data.axes=function(e){return this.internal.updateDataAttributes("axes",e)},d.prototype.data.stackNormalized=function(e){return void 0===e?this.internal.isStackNormalized():void(this.internal.config.data_stack_normalize=!!e,this.internal.redraw())},d.prototype.donut=function(){},d.prototype.donut.padAngle=function(e){return void 0===e?this.internal.config.donut_padAngle:void(this.internal.config.donut_padAngle=e,this.flush())},d.prototype.flow=function(e){var a=this.internal,r=[],o=a.getMaxDataCount(),n=0,s=0,d,l,g,p,c,h,_,x;if(e.json)l=a.convertJsonToData(e.json,e.keys);else if(e.rows)l=a.convertRowsToData(e.rows);else if(e.columns)l=a.convertColumnsToData(e.columns);else return;d=a.convertDataToTargets(l,!0),a.data.targets.forEach(function(e){var t=!1,o,l;for(o=0;o<d.length;o++)if(e.id===d[o].id){for(t=!0,e.values[e.values.length-1]&&(s=e.values[e.values.length-1].index+1),n=d[o].values.length,l=0;l<n;l++)d[o].values[l].index=s+l,a.isTimeSeries()||(d[o].values[l].x=s+l);e.values=e.values.concat(d[o].values),d.splice(o,1);break}t||r.push(e.id)}),a.data.targets.forEach(function(e){var t,o;for(t=0;t<r.length;t++)if(e.id===r[t])for(s=e.values[e.values.length-1].index+1,o=0;o<n;o++)e.values.push({id:e.id,index:s+o,x:a.isTimeSeries()?a.getOtherTargetX(s+o):s+o,value:null})}),a.data.targets.length&&d.forEach(function(e){var t=[],r;for(r=a.data.targets[0].values[0].index;r<s;r++)t.push({id:e.id,index:r,x:a.isTimeSeries()?a.getOtherTargetX(r):r,value:null});e.values.forEach(function(e){e.index+=s,a.isTimeSeries()||(e.x+=s)}),e.values=t.concat(e.values)}),a.data.targets=a.data.targets.concat(d),g=a.getMaxDataCount(),c=a.data.targets[0],h=c.values[0],D(e.to)?(n=0,x=a.isTimeSeries()?a.parseDate(e.to):e.to,c.values.forEach(function(e){e.x<x&&n++})):D(e.length)&&(n=e.length),o?1===o&&a.isTimeSeries()&&(_=(c.values[c.values.length-1].x-h.x)/2,p=[new Date(+h.x-_),new Date(+h.x+_)],a.updateXDomain(null,!0,!0,!1,p)):(_=a.isTimeSeries()?1<c.values.length?c.values[c.values.length-1].x-h.x:h.x-a.getXDomain(a.data.targets)[0]:1,p=[h.x-_,h.x],a.updateXDomain(null,!0,!0,!1,p)),a.updateTargets(a.data.targets),a.redraw({flow:{index:h.index,length:n,duration:M(e.duration)?e.duration:a.config.transition_duration,done:e.done,orgDataCount:o},withLegend:!0,withTransition:1<o,withTrimXDomain:!1,withUpdateXAxis:!0})},s.prototype.generateFlow=function(e){var t=this,a=t.config,i=t.d3;return function(){var r=e.targets,o=e.flow,n=e.drawBar,s=e.drawLine,d=e.drawArea,l=e.cx,g=e.cy,p=e.xv,c=e.xForText,h=e.yForText,_=e.duration,x=1,y=o.index,u=o.length,m=t.getValueOnIndex(t.data.targets[0].values,y),S=t.getValueOnIndex(t.data.targets[0].values,y+u),f=t.x.domain(),T=o.duration||_,A=o.done||function(){},b=t.generateWait(),P,v,C,L,V,G,w,I,R,k,O;t.flowing=!0,t.data.targets.forEach(function(e){e.values.splice(0,u)}),C=t.updateXDomain(r,!0,!0),t.updateXGrid&&t.updateXGrid(!0),L=t.xgrid||i.selectAll([]),V=t.xgridLines||i.selectAll([]),G=t.mainRegion||i.selectAll([]),w=t.mainText||i.selectAll([]),I=t.mainBar||i.selectAll([]),R=t.mainLine||i.selectAll([]),k=t.mainArea||i.selectAll([]),O=t.mainCircle||i.selectAll([]),o.orgDataCount?1===o.orgDataCount||(m&&m.x)===(S&&S.x)?P=t.x(f[0])-t.x(C[0]):t.isTimeSeries()?P=t.x(f[0])-t.x(C[0]):P=t.x(m.x)-t.x(S.x):1===t.data.targets[0].values.length?t.isTimeSeries()?(m=t.getValueOnIndex(t.data.targets[0].values,0),S=t.getValueOnIndex(t.data.targets[0].values,t.data.targets[0].values.length-1),P=t.x(m.x)-t.x(S.x)):P=E(C)/2:P=t.x(f[0])-t.x(C[0]),x=E(f)/E(C),v="translate("+P+",0) scale("+x+",1)",t.hideXGridFocus();var F=i.transition().ease(i.easeLinear).duration(T);b.add(t.xAxis(t.axes.x,F)),b.add(I.transition(F).attr("transform",v)),b.add(R.transition(F).attr("transform",v)),b.add(k.transition(F).attr("transform",v)),b.add(O.transition(F).attr("transform",v)),b.add(w.transition(F).attr("transform",v)),b.add(G.filter(t.isRegionOnX).transition(F).attr("transform",v)),b.add(L.transition(F).attr("transform",v)),b.add(V.transition(F).attr("transform",v)),b(function(){var e=[],r=[],o;if(u){for(o=0;o<u;o++)e.push("."+Q.shape+"-"+(y+o)),r.push("."+Q.text+"-"+(y+o));t.svg.selectAll("."+Q.shapes).selectAll(e).remove(),t.svg.selectAll("."+Q.texts).selectAll(r).remove(),t.svg.select("."+Q.xgrid).remove()}L.attr("transform",null).attr("x1",t.xgridAttr.x1).attr("x2",t.xgridAttr.x2).attr("y1",t.xgridAttr.y1).attr("y2",t.xgridAttr.y2).style("opacity",t.xgridAttr.opacity),V.attr("transform",null),V.select("line").attr("x1",a.axis_rotated?0:p).attr("x2",a.axis_rotated?t.width:p),V.select("text").attr("x",a.axis_rotated?t.width:0).attr("y",p),I.attr("transform",null).attr("d",n),R.attr("transform",null).attr("d",s),k.attr("transform",null).attr("d",d),O.attr("transform",null).attr("cx",l).attr("cy",g),w.attr("transform",null).attr("x",c).attr("y",h).style("fill-opacity",t.opacityForText.bind(t)),G.attr("transform",null),G.filter(t.isRegionOnX).attr("x",t.regionX.bind(t)).attr("width",t.regionWidth.bind(t)),A(),t.flowing=!1})}},d.prototype.focus=function(e){var t=this.internal,a;e=t.mapToTargetIds(e),a=t.svg.selectAll(t.selectorTargets(e.filter(t.isTargetToShow,t))),this.revert(),this.defocus(),a.classed(Q.focused,!0).classed(Q.defocused,!1),t.hasArcType()&&t.expandArc(e),t.toggleFocusLegend(e,!0),t.focusedTargetIds=e,t.defocusedTargetIds=t.defocusedTargetIds.filter(function(t){return 0>e.indexOf(t)})},d.prototype.defocus=function(e){var t=this.internal,a;e=t.mapToTargetIds(e),a=t.svg.selectAll(t.selectorTargets(e.filter(t.isTargetToShow,t))),a.classed(Q.focused,!1).classed(Q.defocused,!0),t.hasArcType()&&t.unexpandArc(e),t.toggleFocusLegend(e,!1),t.focusedTargetIds=t.focusedTargetIds.filter(function(t){return 0>e.indexOf(t)}),t.defocusedTargetIds=e},d.prototype.revert=function(e){var t=this.internal,a;e=t.mapToTargetIds(e),a=t.svg.selectAll(t.selectorTargets(e)),a.classed(Q.focused,!1).classed(Q.defocused,!1),t.hasArcType()&&t.unexpandArc(e),t.config.legend_show&&(t.showLegend(e.filter(t.isLegendToShow.bind(t))),t.legend.selectAll(t.selectorLegends(e)).filter(function(){return t.d3.select(this).classed(Q.legendItemFocused)}).classed(Q.legendItemFocused,!1)),t.focusedTargetIds=[],t.defocusedTargetIds=[]},d.prototype.xgrids=function(e){var t=this.internal,a=t.config;return e?(a.grid_x_lines=e,t.redrawWithoutRescale(),a.grid_x_lines):a.grid_x_lines},d.prototype.xgrids.add=function(e){var t=this.internal;return this.xgrids(t.config.grid_x_lines.concat(e?e:[]))},d.prototype.xgrids.remove=function(e){var t=this.internal;t.removeGridLines(e,!0)},d.prototype.ygrids=function(e){var t=this.internal,a=t.config;return e?(a.grid_y_lines=e,t.redrawWithoutRescale(),a.grid_y_lines):a.grid_y_lines},d.prototype.ygrids.add=function(e){var t=this.internal;return this.ygrids(t.config.grid_y_lines.concat(e?e:[]))},d.prototype.ygrids.remove=function(e){var t=this.internal;t.removeGridLines(e,!1)},d.prototype.groups=function(e){var t=this.internal,a=t.config;return Y(e)?a.data_groups:(a.data_groups=e,t.redraw(),a.data_groups)},d.prototype.legend=function(){},d.prototype.legend.show=function(e){var t=this.internal;t.showLegend(t.mapToTargetIds(e)),t.updateAndRedraw({withLegend:!0})},d.prototype.legend.hide=function(e){var t=this.internal;t.hideLegend(t.mapToTargetIds(e)),t.updateAndRedraw({withLegend:!1})},d.prototype.load=function(e){var t=this.internal,a=t.config;return e.xs&&t.addXs(e.xs),"names"in e&&d.prototype.data.names.bind(this)(e.names),"classes"in e&&Object.keys(e.classes).forEach(function(t){a.data_classes[t]=e.classes[t]}),"categories"in e&&t.isCategorized()&&(a.axis_x_categories=e.categories),"axes"in e&&Object.keys(e.axes).forEach(function(t){a.data_axes[t]=e.axes[t]}),"colors"in e&&Object.keys(e.colors).forEach(function(t){a.data_colors[t]=e.colors[t]}),"cacheIds"in e&&t.hasCaches(e.cacheIds)?void t.load(t.getCaches(e.cacheIds),e.done):void(e.unload?t.unload(t.mapToTargetIds(!0===e.unload?null:e.unload),function(){t.loadFromArgs(e)}):t.loadFromArgs(e))},d.prototype.unload=function(e){var t=this.internal;e=e||{},e instanceof Array?e={ids:e}:"string"==typeof e&&(e={ids:[e]}),t.unload(t.mapToTargetIds(e.ids),function(){t.redraw({withUpdateOrgXDomain:!0,withUpdateXDomain:!0,withLegend:!0}),e.done&&e.done()})},d.prototype.pie=function(){},d.prototype.pie.padAngle=function(e){return void 0===e?this.internal.config.pie_padAngle:void(this.internal.config.pie_padAngle=e,this.flush())},d.prototype.regions=function(e){var t=this.internal,a=t.config;return e?(a.regions=e,t.redrawWithoutRescale(),a.regions):a.regions},d.prototype.regions.add=function(e){var t=this.internal,a=t.config;return e?(a.regions=a.regions.concat(e),t.redrawWithoutRescale(),a.regions):a.regions},d.prototype.regions.remove=function(e){var t=this.internal,a=t.config,i,r,o;return e=e||{},i=I(e,"duration",a.transition_duration),r=I(e,"classes",[Q.region]),o=t.main.select("."+Q.regions).selectAll(r.map(function(e){return"."+e})),(i?o.transition().duration(i):o).style("opacity",0).remove(),a.regions=a.regions.filter(function(e){var t=!1;return!e["class"]||(e["class"].split(" ").forEach(function(e){0<=r.indexOf(e)&&(t=!0)}),!t)}),a.regions},d.prototype.selected=function(e){var t=this.internal,a=t.d3;return t.main.selectAll("."+Q.shapes+t.getTargetSelectorSuffix(e)).selectAll("."+Q.shape).filter(function(){return a.select(this).classed(Q.SELECTED)}).nodes().map(function(e){var t=e.__data__;return t.data?t.data:t})},d.prototype.select=function(e,t,a){var r=this.internal,o=r.d3,n=r.config;n.data_selection_enabled&&r.main.selectAll("."+Q.shapes).selectAll("."+Q.shape).each(function(s,d){var i=o.select(this),l=s.data?s.data.id:s.id,g=r.getToggle(this,s).bind(r),p=n.data_selection_grouped||!e||0<=e.indexOf(l),c=!t||0<=t.indexOf(d),h=i.classed(Q.SELECTED);i.classed(Q.line)||i.classed(Q.area)||(p&&c?n.data_selection_isselectable(s)&&!h&&g(!0,i.classed(Q.SELECTED,!0),s,d):D(a)&&a&&h&&g(!1,i.classed(Q.SELECTED,!1),s,d))})},d.prototype.unselect=function(e,t){var a=this.internal,r=a.d3,o=a.config;o.data_selection_enabled&&a.main.selectAll("."+Q.shapes).selectAll("."+Q.shape).each(function(n,s){var i=r.select(this),d=n.data?n.data.id:n.id,l=a.getToggle(this,n).bind(a),g=o.data_selection_grouped||!e||0<=e.indexOf(d),p=!t||0<=t.indexOf(s),c=i.classed(Q.SELECTED);i.classed(Q.line)||i.classed(Q.area)||g&&p&&o.data_selection_isselectable(n)&&c&&l(!1,i.classed(Q.SELECTED,!1),n,s)})},d.prototype.show=function(e,t){var a=this.internal,i;e=a.mapToTargetIds(e),t=t||{},a.removeHiddenTargetIds(e),i=a.svg.selectAll(a.selectorTargets(e)),i.transition().style("display","initial","important").style("opacity",1,"important").call(a.endall,function(){i.style("opacity",null).style("opacity",1)}),t.withLegend&&a.showLegend(e),a.redraw({withUpdateOrgXDomain:!0,withUpdateXDomain:!0,withLegend:!0})},d.prototype.hide=function(e,t){var a=this.internal,i;e=a.mapToTargetIds(e),t=t||{},a.addHiddenTargetIds(e),i=a.svg.selectAll(a.selectorTargets(e)),i.transition().style("opacity",0,"important").call(a.endall,function(){i.style("opacity",null).style("opacity",0),i.style("display","none")}),t.withLegend&&a.hideLegend(e),a.redraw({withUpdateOrgXDomain:!0,withUpdateXDomain:!0,withLegend:!0})},d.prototype.toggle=function(e,t){var a=this,i=this.internal;i.mapToTargetIds(e).forEach(function(e){i.isTargetToShow(e)?a.hide(e,t):a.show(e,t)})},d.prototype.tooltip=function(){},d.prototype.tooltip.show=function(e){var t=this.internal,a={},i,r;e.mouse?a=e.mouse:(e.data?r=e.data:"undefined"!=typeof e.x&&(i=e.id?t.data.targets.filter(function(a){return a.id===e.id}):t.data.targets,r=t.filterByX(i,e.x).slice(0,1)[0]),a=r?t.getMousePosition(r):null),t.dispatchEvent("mousemove",a),t.config.tooltip_onshow.call(t,r)},d.prototype.tooltip.hide=function(){this.internal.dispatchEvent("mouseout",0),this.internal.config.tooltip_onhide.call(this)},d.prototype.transform=function(e,t){var a=this.internal,i=0<=["pie","donut"].indexOf(e)?{withTransform:!0}:null;a.transformTo(t,e,i)},s.prototype.transformTo=function(e,t,a){var i=this,r=!i.hasArcType(),o=a||{withTransitionForAxis:r};o.withTransitionForTransform=!1,i.transiting=!1,i.setTargetType(e,t),i.updateTargets(i.data.targets),i.updateAndRedraw(o)},d.prototype.x=function(e){var t=this.internal;return arguments.length&&(t.updateTargetX(t.data.targets,e),t.redraw({withUpdateOrgXDomain:!0,withUpdateXDomain:!0})),t.data.xs},d.prototype.xs=function(e){var t=this.internal;return arguments.length&&(t.updateTargetXs(t.data.targets,e),t.redraw({withUpdateOrgXDomain:!0,withUpdateXDomain:!0})),t.data.xs},d.prototype.zoom=function(e){var t=this.internal;return e?(t.isTimeSeries()&&(e=e.map(function(e){return t.parseDate(e)})),t.config.subchart_show?t.brush.selectionAsValue(e,!0):(t.updateXDomain(null,!0,!1,!1,e),t.redraw({withY:t.config.zoom_rescale,withSubchart:!1})),t.config.zoom_onzoom.call(this,t.x.orgDomain()),e):t.x.domain()},d.prototype.zoom.enable=function(e){var t=this.internal;t.config.zoom_enabled=e,t.updateAndRedraw()},d.prototype.unzoom=function(){var e=this.internal;e.config.subchart_show?e.brush.clear():(e.updateXDomain(null,!0,!1,!1,e.subX.domain()),e.redraw({withY:e.config.zoom_rescale,withSubchart:!1}))},d.prototype.zoom.max=function(e){var t=this.internal,a=t.config,i=t.d3;return 0===e||e?void(a.zoom_x_max=i.max([t.orgXDomain[1],e])):a.zoom_x_max},d.prototype.zoom.min=function(e){var t=this.internal,a=t.config,i=t.d3;return 0===e||e?void(a.zoom_x_min=i.min([t.orgXDomain[0],e])):a.zoom_x_min},d.prototype.zoom.range=function(e){return arguments.length?void(D(e.max)&&this.domain.max(e.max),D(e.min)&&this.domain.min(e.min)):{max:this.domain.max(),min:this.domain.min()}},s.prototype.initPie=function(){var e=this,t=e.d3;e.pie=t.pie().padAngle(this.getPadAngle.bind(this)).value(function(e){return e.values.reduce(function(e,t){return e+t.value},0)});var a=e.getOrderFunction();if(a&&(e.isOrderAsc()||e.isOrderDesc())){var i=a;a=function(e,t){return-1*i(e,t)}}e.pie.sort(a||null)},s.prototype.updateRadius=function(){var e=this,t=e.config,a=t.gauge_width||t.donut_width,i=e.filterTargetsToShow(e.data.targets).length*e.config.gauge_arcs_minWidth;e.radiusExpanded=b(e.arcWidth,e.arcHeight)/2*(e.hasType("gauge")?.85:1),e.radius=.95*e.radiusExpanded,e.innerRadiusRatio=a?(e.radius-a)/e.radius:.6,e.innerRadius=e.hasType("donut")||e.hasType("gauge")?e.radius*e.innerRadiusRatio:0,e.gaugeArcWidth=a?a:i<=e.radius-e.innerRadius?e.radius-e.innerRadius:i<=e.radius?i:e.radius},s.prototype.getPadAngle=function(){return this.hasType("pie")?this.config.pie_padAngle||0:this.hasType("donut")?this.config.donut_padAngle||0:0},s.prototype.updateArc=function(){var e=this;e.svgArc=e.getSvgArc(),e.svgArcExpanded=e.getSvgArcExpanded(),e.svgArcExpandedSub=e.getSvgArcExpanded(.98)},s.prototype.updateAngle=function(e){var t=this,a=t.config,i=!1,r=0,o,n,s,l;return a?(t.pie(t.filterTargetsToShow(t.data.targets)).forEach(function(a){i||a.data.id!==e.data.id||(i=!0,e=a,e.index=r),r++}),isNaN(e.startAngle)&&(e.startAngle=0),isNaN(e.endAngle)&&(e.endAngle=e.startAngle),t.isGaugeType(e.data)&&(o=a.gauge_min,n=a.gauge_max,s=T*(a.gauge_fullCircle?2:1)/(n-o),l=e.value<o?0:e.value<n?e.value-o:n-o,e.startAngle=a.gauge_startingAngle,e.endAngle=e.startAngle+s*l),i?e:null):null},s.prototype.getSvgArc=function(){var e=this,t=e.hasType("gauge"),a=e.gaugeArcWidth/e.filterTargetsToShow(e.data.targets).length,i=e.d3.arc().outerRadius(function(i){return t?e.radius-a*i.index:e.radius}).innerRadius(function(i){return t?e.radius-a*(i.index+1):e.innerRadius}),r=function(t,a){var r;return a?i(t):(r=e.updateAngle(t),r?i(r):"M 0 0")};return r.centroid=i.centroid,r},s.prototype.getSvgArcExpanded=function(e){e=e||1;var t=this,a=t.hasType("gauge"),i=t.gaugeArcWidth/t.filterTargetsToShow(t.data.targets).length,r=b(t.radiusExpanded*e-t.radius,.8*i-100*(1-e)),o=t.d3.arc().outerRadius(function(o){return a?t.radius-i*o.index+r:t.radiusExpanded*e}).innerRadius(function(e){return a?t.radius-i*(e.index+1):t.innerRadius});return function(e){var a=t.updateAngle(e);return a?o(a):"M 0 0"}},s.prototype.getArc=function(e,t,a){return a||this.isArcType(e.data)?this.svgArc(e,t):"M 0 0"},s.prototype.transformForArcLabel=function(e){var t=this,a=t.config,i=t.updateAngle(e),r="",o=t.hasType("gauge"),n,s,d,l,g;if(i&&!o)n=this.svgArc.centroid(i),s=isNaN(n[0])?0:n[0],d=isNaN(n[1])?0:n[1],l=m(s*s+d*d),g=t.hasType("donut")&&a.donut_label_ratio?z(a.donut_label_ratio)?a.donut_label_ratio(e,t.radius,l):a.donut_label_ratio:t.hasType("pie")&&a.pie_label_ratio?z(a.pie_label_ratio)?a.pie_label_ratio(e,t.radius,l):a.pie_label_ratio:t.radius&&l?(.375<36/t.radius?1.175-36/t.radius:.8)*t.radius/l:0,r="translate("+s*g+","+d*g+")";else if(i&&o&&1<t.filterTargetsToShow(t.data.targets).length){var p=f(i.endAngle-T/2);s=u(i.endAngle-T/2)*(t.radiusExpanded+25),d=p*(t.radiusExpanded+15-_(10*p))+3,r="translate("+s+","+d+")"}return r},s.prototype.getArcRatio=function(e){return this.getRatio("arc",e)},s.prototype.convertToArcData=function(e){return this.addName({id:e.data.id,value:e.value,ratio:this.getRatio("arc",e),index:e.index})},s.prototype.textForArcLabel=function(e){var t=this,a,i,r,o,n;return t.shouldShowArcLabel()?(a=t.updateAngle(e),i=a?a.value:null,r=t.getRatio("arc",a),o=e.data.id,!t.hasType("gauge")&&!t.meetsArcLabelThreshold(r))?"":(n=t.getArcLabelFormat(),n?n(i,r,o):t.defaultArcValueFormat(i,r)):""},s.prototype.textForGaugeMinMax=function(e,t){var a=this,i=a.getGaugeLabelExtents();return i?i(e,t):e},s.prototype.expandArc=function(e){var t=this,a;return t.transiting?void(a=window.setInterval(function(){t.transiting||(window.clearInterval(a),0<t.legend.selectAll(".c3-legend-item-focused").size()&&t.expandArc(e))},10)):void(e=t.mapToTargetIds(e),t.svg.selectAll(t.selectorTargets(e,"."+Q.chartArc)).each(function(e){t.shouldExpand(e.data.id)&&t.d3.select(this).selectAll("path").transition().duration(t.expandDuration(e.data.id)).attr("d",t.svgArcExpanded).transition().duration(2*t.expandDuration(e.data.id)).attr("d",t.svgArcExpandedSub).each(function(e){if(t.isDonutType(e.data));})}))},s.prototype.unexpandArc=function(e){var t=this;t.transiting||(e=t.mapToTargetIds(e),t.svg.selectAll(t.selectorTargets(e,"."+Q.chartArc)).selectAll("path").transition().duration(function(e){return t.expandDuration(e.data.id)}).attr("d",t.svgArc),t.svg.selectAll("."+Q.arc))},s.prototype.expandDuration=function(e){var t=this,a=t.config;return t.isDonutType(e)?a.donut_expand_duration:t.isGaugeType(e)?a.gauge_expand_duration:t.isPieType(e)?a.pie_expand_duration:50},s.prototype.shouldExpand=function(e){var t=this,a=t.config;return t.isDonutType(e)&&a.donut_expand||t.isGaugeType(e)&&a.gauge_expand||t.isPieType(e)&&a.pie_expand},s.prototype.shouldShowArcLabel=function(){var e=this,t=e.config,a=!0;return e.hasType("donut")?a=t.donut_label_show:e.hasType("pie")&&(a=t.pie_label_show),a},s.prototype.meetsArcLabelThreshold=function(e){var t=this,a=t.config,i=t.hasType("donut")?a.donut_label_threshold:a.pie_label_threshold;return e>=i},s.prototype.getArcLabelFormat=function(){var e=this,t=e.config,a=t.pie_label_format;return e.hasType("gauge")?a=t.gauge_label_format:e.hasType("donut")&&(a=t.donut_label_format),a},s.prototype.getGaugeLabelExtents=function(){var e=this,t=e.config;return t.gauge_label_extents},s.prototype.getArcTitle=function(){var e=this;return e.hasType("donut")?e.config.donut_title:""},s.prototype.updateTargetsForArc=function(e){var t=this,a=t.main,i=t.classChartArc.bind(t),r=t.classArcs.bind(t),o=t.classFocus.bind(t),n,s;n=a.select("."+Q.chartArcs).selectAll("."+Q.chartArc).data(t.pie(e)).attr("class",function(e){return i(e)+o(e.data)}),s=n.enter().append("g").attr("class",i),s.append("g").attr("class",r),s.append("text").attr("dy",t.hasType("gauge")?"-.1em":".35em").style("opacity",0).style("text-anchor","middle").style("pointer-events","none")},s.prototype.initArc=function(){var e=this;e.arcs=e.main.select("."+Q.chart).append("g").attr("class",Q.chartArcs).attr("transform",e.getTranslate("arc")),e.arcs.append("text").attr("class",Q.chartArcsTitle).style("text-anchor","middle").text(e.getArcTitle())},s.prototype.redrawArc=function(e,t,a){var r=this,i=r.d3,o=r.config,n=r.main,s=r.hasType("gauge"),d,l,g,c;if(d=n.selectAll("."+Q.arcs).selectAll("."+Q.arc).data(r.arcData.bind(r)),l=d.enter().append("path").attr("class",r.classArc.bind(r)).style("fill",function(e){return r.color(e.data)}).style("cursor",function(e){return o.interaction_enabled&&o.data_selection_isselectable(e)?"pointer":null}).each(function(e){r.isGaugeType(e.data)&&(e.startAngle=e.endAngle=o.gauge_startingAngle),this._current=e}).merge(d),s&&(g=n.selectAll("."+Q.arcs).selectAll("."+Q.arcLabelLine).data(r.arcData.bind(r)),c=g.enter().append("rect").attr("class",function(e){return Q.arcLabelLine+" "+Q.target+" "+Q.target+"-"+e.data.id}).merge(g),1===r.filterTargetsToShow(r.data.targets).length?c.style("display","none"):c.style("fill",function(e){return r.levelColor?r.levelColor(e.data.values[0].value):r.color(e.data)}).style("display",o.gauge_labelLine_show?"":"none").each(function(e){var t=0,a=0,o=0,n="";if(0>r.hiddenTargetIds.indexOf(e.data.id)){var s=r.updateAngle(e),d=r.gaugeArcWidth/r.filterTargetsToShow(r.data.targets).length*(s.index+1),l=s.endAngle-T/2,g=r.radius-d,p=l-(0==g?0:1/g);t=r.radiusExpanded-r.radius+d,a=u(p)*g,o=f(p)*g,n="rotate("+180*l/T+", "+a+", "+o+")"}i.select(this).attr("x",a).attr("y",o).attr("width",t).attr("height",2).attr("transform",n).style("stroke-dasharray","0, "+(t+2)+", 0")})),l.attr("transform",function(e){return!r.isGaugeType(e.data)&&a?"scale(0)":""}).on("mouseover",o.interaction_enabled?function(e){var t,a;r.transiting||(t=r.updateAngle(e),t&&(a=r.convertToArcData(t),r.expandArc(t.data.id),r.api.focus(t.data.id),r.toggleFocusLegend(t.data.id,!0),r.config.data_onmouseover(a,this)))}:null).on("mousemove",o.interaction_enabled?function(e){var t=r.updateAngle(e),a,i;t&&(a=r.convertToArcData(t),i=[a],r.showTooltip(i,this))}:null).on("mouseout",o.interaction_enabled?function(e){var t,a;r.transiting||(t=r.updateAngle(e),t&&(a=r.convertToArcData(t),r.unexpandArc(t.data.id),r.api.revert(),r.revertLegend(),r.hideTooltip(),r.config.data_onmouseout(a,this)))}:null).on("click",o.interaction_enabled?function(e,t){var a=r.updateAngle(e),i;a&&(i=r.convertToArcData(a),r.toggleShape&&r.toggleShape(this,i,t),r.config.data_onclick.call(r.api,i,this))}:null).each(function(){r.transiting=!0}).transition().duration(e).attrTween("d",function(e){var t=r.updateAngle(e),a;return t?(isNaN(this._current.startAngle)&&(this._current.startAngle=0),isNaN(this._current.endAngle)&&(this._current.endAngle=this._current.startAngle),a=i.interpolate(this._current,t),this._current=a(0),function(i){if(null===r.config)return"M 0 0";var t=a(i);return t.data=e.data,r.getArc(t,!0)}):function(){return"M 0 0"}}).attr("transform",a?"scale(1)":"").style("fill",function(e){return r.levelColor?r.levelColor(e.data.values[0].value):r.color(e.data.id)}).call(r.endall,function(){r.transiting=!1}),d.exit().transition().duration(t).style("opacity",0).remove(),n.selectAll("."+Q.chartArc).select("text").style("opacity",0).attr("class",function(e){return r.isGaugeType(e.data)?Q.gaugeValue:""}).text(r.textForArcLabel.bind(r)).attr("transform",r.transformForArcLabel.bind(r)).style("font-size",function(e){return r.isGaugeType(e.data)&&1===r.filterTargetsToShow(r.data.targets).length?p(r.radius/5)+"px":""}).transition().duration(e).style("opacity",function(e){return r.isTargetToShow(e.data.id)&&r.isArcType(e.data)?1:0}),n.select("."+Q.chartArcsTitle).style("opacity",r.hasType("donut")||s?1:0),s){var h=0,_=r.arcs.select("g."+Q.chartArcsBackground).selectAll("path."+Q.chartArcsBackground).data(r.data.targets);_.enter().append("path").attr("class",function(e,t){return Q.chartArcsBackground+" "+Q.chartArcsBackground+"-"+t}).merge(_).attr("d",function(e){if(0<=r.hiddenTargetIds.indexOf(e.id))return"M 0 0";var t={data:[{value:o.gauge_max}],startAngle:o.gauge_startingAngle,endAngle:-1*o.gauge_startingAngle*(o.gauge_fullCircle?T:1),index:h++};return r.getArc(t,!0,!0)}),_.exit().remove(),r.arcs.select("."+Q.chartArcsGaugeUnit).attr("dy",".75em").text(o.gauge_label_show?o.gauge_units:""),r.arcs.select("."+Q.chartArcsGaugeMin).attr("dx",-1*(r.innerRadius+(r.radius-r.innerRadius)/(o.gauge_fullCircle?1:2))+"px").attr("dy","1.2em").text(o.gauge_label_show?r.textForGaugeMinMax(o.gauge_min,!1):""),r.arcs.select("."+Q.chartArcsGaugeMax).attr("dx",r.innerRadius+(r.radius-r.innerRadius)/(o.gauge_fullCircle?1:2)+"px").attr("dy","1.2em").text(o.gauge_label_show?r.textForGaugeMinMax(o.gauge_max,!0):"")}},s.prototype.initGauge=function(){var e=this.arcs;this.hasType("gauge")&&(e.append("g").attr("class",Q.chartArcsBackground),e.append("text").attr("class",Q.chartArcsGaugeUnit).style("text-anchor","middle").style("pointer-events","none"),e.append("text").attr("class",Q.chartArcsGaugeMin).style("text-anchor","middle").style("pointer-events","none"),e.append("text").attr("class",Q.chartArcsGaugeMax).style("text-anchor","middle").style("pointer-events","none"))},s.prototype.getGaugeLabelHeight=function(){return this.config.gauge_label_show?20:0},s.prototype.addToCache=function(e,t){this.cache["$".concat(e)]=t},s.prototype.getFromCache=function(e){return this.cache["$".concat(e)]},s.prototype.resetCache=function(){var e=this;Object.keys(this.cache).filter(function(e){return /^\$/.test(e)}).forEach(function(t){delete e.cache[t]})},s.prototype.hasCaches=function(e){for(var t=0;t<e.length;t++)if(!(e[t]in this.cache))return!1;return!0},s.prototype.addCache=function(e,t){this.cache[e]=this.cloneTarget(t)},s.prototype.getCaches=function(e){var t=[],a;for(a=0;a<e.length;a++)e[a]in this.cache&&t.push(this.cloneTarget(this.cache[e[a]]));return t},s.prototype.categoryName=function(e){var t=this.config;return e<t.axis_x_categories.length?t.axis_x_categories[e]:e},s.prototype.generateTargetClass=function(e){return e||0===e?("-"+e).replace(/\s/g,"-"):""},s.prototype.generateClass=function(e,t){return" "+e+" "+e+this.generateTargetClass(t)},s.prototype.classText=function(e){return this.generateClass(Q.text,e.index)},s.prototype.classTexts=function(e){return this.generateClass(Q.texts,e.id)},s.prototype.classShape=function(e){return this.generateClass(Q.shape,e.index)},s.prototype.classShapes=function(e){return this.generateClass(Q.shapes,e.id)},s.prototype.classLine=function(e){return this.classShape(e)+this.generateClass(Q.line,e.id)},s.prototype.classLines=function(e){return this.classShapes(e)+this.generateClass(Q.lines,e.id)},s.prototype.classCircle=function(e){return this.classShape(e)+this.generateClass(Q.circle,e.index)},s.prototype.classCircles=function(e){return this.classShapes(e)+this.generateClass(Q.circles,e.id)},s.prototype.classBar=function(e){return this.classShape(e)+this.generateClass(Q.bar,e.index)},s.prototype.classBars=function(e){return this.classShapes(e)+this.generateClass(Q.bars,e.id)},s.prototype.classArc=function(e){return this.classShape(e.data)+this.generateClass(Q.arc,e.data.id)},s.prototype.classArcs=function(e){return this.classShapes(e.data)+this.generateClass(Q.arcs,e.data.id)},s.prototype.classArea=function(e){return this.classShape(e)+this.generateClass(Q.area,e.id)},s.prototype.classAreas=function(e){return this.classShapes(e)+this.generateClass(Q.areas,e.id)},s.prototype.classRegion=function(e,t){return this.generateClass(Q.region,t)+" "+("class"in e?e["class"]:"")},s.prototype.classEvent=function(e){return this.generateClass(Q.eventRect,e.index)},s.prototype.classTarget=function(e){var t=this,a=t.config.data_classes[e],i="";return a&&(i=" "+Q.target+"-"+a),t.generateClass(Q.target,e)+i},s.prototype.classFocus=function(e){return this.classFocused(e)+this.classDefocused(e)},s.prototype.classFocused=function(e){return" "+(0<=this.focusedTargetIds.indexOf(e.id)?Q.focused:"")},s.prototype.classDefocused=function(e){return" "+(0<=this.defocusedTargetIds.indexOf(e.id)?Q.defocused:"")},s.prototype.classChartText=function(e){return Q.chartText+this.classTarget(e.id)},s.prototype.classChartLine=function(e){return Q.chartLine+this.classTarget(e.id)},s.prototype.classChartBar=function(e){return Q.chartBar+this.classTarget(e.id)},s.prototype.classChartArc=function(e){return Q.chartArc+this.classTarget(e.data.id)},s.prototype.getTargetSelectorSuffix=function(e){var t=this.generateTargetClass(e);return window.CSS&&window.CSS.escape?window.CSS.escape(t):t.replace(/([?!@#$%^&*()=+,.<>'":;\[\]\/|~`{}\\])/g,"\\$1")},s.prototype.selectorTarget=function(e,t){return(t||"")+"."+Q.target+this.getTargetSelectorSuffix(e)},s.prototype.selectorTargets=function(e,t){var a=this;return e=e||[],e.length?e.map(function(e){return a.selectorTarget(e,t)}):null},s.prototype.selectorLegend=function(e){return"."+Q.legendItem+this.getTargetSelectorSuffix(e)},s.prototype.selectorLegends=function(e){var t=this;return e&&e.length?e.map(function(e){return t.selectorLegend(e)}):null},s.prototype.getClipPath=function(e){var t=0<=window.navigator.appVersion.toLowerCase().indexOf("msie 9.");return"url("+(t?"":document.URL.split("#")[0])+"#"+e+")"},s.prototype.appendClip=function(e,t){return e.append("clipPath").attr("id",t).append("rect")},s.prototype.getAxisClipX=function(e){var t=A(30,this.margin.left);return e?-(1+t):-(t-1)},s.prototype.getAxisClipY=function(e){return e?-20:-this.margin.top},s.prototype.getXAxisClipX=function(){var e=this;return e.getAxisClipX(!e.config.axis_rotated)},s.prototype.getXAxisClipY=function(){var e=this;return e.getAxisClipY(!e.config.axis_rotated)},s.prototype.getYAxisClipX=function(){var e=this;return e.config.axis_y_inner?-1:e.getAxisClipX(e.config.axis_rotated)},s.prototype.getYAxisClipY=function(){var e=this;return e.getAxisClipY(e.config.axis_rotated)},s.prototype.getAxisClipWidth=function(e){var t=this,a=A(30,t.margin.left),i=A(30,t.margin.right);return e?t.width+2+a+i:t.margin.left+20},s.prototype.getAxisClipHeight=function(e){return(e?this.margin.bottom:this.margin.top+this.height)+20},s.prototype.getXAxisClipWidth=function(){var e=this;return e.getAxisClipWidth(!e.config.axis_rotated)},s.prototype.getXAxisClipHeight=function(){var e=this;return e.getAxisClipHeight(!e.config.axis_rotated)},s.prototype.getYAxisClipWidth=function(){var e=this;return e.getAxisClipWidth(e.config.axis_rotated)+(e.config.axis_y_inner?20:0)},s.prototype.getYAxisClipHeight=function(){var e=this;return e.getAxisClipHeight(e.config.axis_rotated)},s.prototype.generateColor=function(){var e=this,t=e.config,a=e.d3,i=t.data_colors,r=N(t.color_pattern)?t.color_pattern:a.schemeCategory10,o=t.data_color,n=[];return function(e){var t=e.id||e.data&&e.data.id||e,a;return i[t]instanceof Function?a=i[t](e):i[t]?a=i[t]:(0>n.indexOf(t)&&n.push(t),a=r[n.indexOf(t)%r.length],i[t]=a),o instanceof Function?o(a,e):a}},s.prototype.generateLevelColor=function(){var e=this,t=e.config,a=t.color_pattern,i=t.color_threshold,r="value"===i.unit,o=i.values&&i.values.length?i.values:[],n=i.max||100;return N(i)&&N(a)?function(e){var t=a[a.length-1],s,d;for(s=0;s<o.length;s++)if(d=r?e:100*e/n,d<o[s]){t=a[s];break}return t}:null},s.prototype.getDefaultConfig=function(){var e={bindto:"#chart",svg_classname:void 0,size_width:void 0,size_height:void 0,padding_left:void 0,padding_right:void 0,padding_top:void 0,padding_bottom:void 0,resize_auto:!0,zoom_enabled:!1,zoom_initialRange:void 0,zoom_type:"scroll",zoom_disableDefaultBehavior:!1,zoom_privileged:!1,zoom_rescale:!1,zoom_onzoom:function(){},zoom_onzoomstart:function(){},zoom_onzoomend:function(){},zoom_x_min:void 0,zoom_x_max:void 0,interaction_brighten:!0,interaction_enabled:!0,onmouseover:function(){},onmouseout:function(){},onresize:function(){},onresized:function(){},oninit:function(){},onrendered:function(){},transition_duration:350,data_epochs:"epochs",data_x:void 0,data_xs:{},data_xFormat:"%Y-%m-%d",data_xLocaltime:!0,data_xSort:!0,data_idConverter:function(e){return e},data_names:{},data_classes:{},data_groups:[],data_axes:{},data_type:void 0,data_types:{},data_labels:{},data_order:"desc",data_regions:{},data_color:void 0,data_colors:{},data_hide:!1,data_filter:void 0,data_selection_enabled:!1,data_selection_grouped:!1,data_selection_isselectable:function(){return!0},data_selection_multiple:!0,data_selection_draggable:!1,data_stack_normalize:!1,data_onclick:function(){},data_onmouseover:function(){},data_onmouseout:function(){},data_onselected:function(){},data_onunselected:function(){},data_url:void 0,data_headers:void 0,data_json:void 0,data_rows:void 0,data_columns:void 0,data_mimeType:void 0,data_keys:void 0,data_empty_label_text:"",subchart_show:!1,subchart_size_height:60,subchart_axis_x_show:!0,subchart_onbrush:function(){},color_pattern:[],color_threshold:{},legend_show:!0,legend_hide:!1,legend_position:"bottom",legend_inset_anchor:"top-left",legend_inset_x:10,legend_inset_y:0,legend_inset_step:void 0,legend_item_onclick:void 0,legend_item_onmouseover:void 0,legend_item_onmouseout:void 0,legend_equally:!1,legend_padding:0,legend_item_tile_width:10,legend_item_tile_height:10,axis_rotated:!1,axis_x_show:!0,axis_x_type:"indexed",axis_x_localtime:!0,axis_x_categories:[],axis_x_tick_centered:!1,axis_x_tick_format:void 0,axis_x_tick_culling:{},axis_x_tick_culling_max:10,axis_x_tick_count:void 0,axis_x_tick_fit:!0,axis_x_tick_values:null,axis_x_tick_rotate:0,axis_x_tick_outer:!0,axis_x_tick_multiline:!0,axis_x_tick_multilineMax:0,axis_x_tick_width:null,axis_x_max:void 0,axis_x_min:void 0,axis_x_padding:{},axis_x_height:void 0,axis_x_selection:void 0,axis_x_label:{},axis_x_inner:void 0,axis_y_show:!0,axis_y_type:void 0,axis_y_max:void 0,axis_y_min:void 0,axis_y_inverted:!1,axis_y_center:void 0,axis_y_inner:void 0,axis_y_label:{},axis_y_tick_format:void 0,axis_y_tick_outer:!0,axis_y_tick_values:null,axis_y_tick_rotate:0,axis_y_tick_count:void 0,axis_y_tick_time_type:void 0,axis_y_tick_time_interval:void 0,axis_y_padding:{},axis_y_default:void 0,axis_y2_show:!1,axis_y2_max:void 0,axis_y2_min:void 0,axis_y2_inverted:!1,axis_y2_center:void 0,axis_y2_inner:void 0,axis_y2_label:{},axis_y2_tick_format:void 0,axis_y2_tick_outer:!0,axis_y2_tick_values:null,axis_y2_tick_count:void 0,axis_y2_padding:{},axis_y2_default:void 0,grid_x_show:!1,grid_x_type:"tick",grid_x_lines:[],grid_y_show:!1,grid_y_lines:[],grid_y_ticks:10,grid_focus_show:!0,grid_lines_front:!0,point_show:!0,point_r:2.5,point_sensitivity:10,point_focus_expand_enabled:!0,point_focus_expand_r:void 0,point_select_r:void 0,line_connectNull:!1,line_step_type:"step",bar_width:void 0,bar_width_ratio:.6,bar_width_max:void 0,bar_zerobased:!0,bar_space:0,area_zerobased:!0,area_above:!1,pie_label_show:!0,pie_label_format:void 0,pie_label_threshold:.05,pie_label_ratio:void 0,pie_expand:{},pie_expand_duration:50,pie_padAngle:0,gauge_fullCircle:!1,gauge_label_show:!0,gauge_labelLine_show:!0,gauge_label_format:void 0,gauge_min:0,gauge_max:100,gauge_startingAngle:-1*T/2,gauge_label_extents:void 0,gauge_units:void 0,gauge_width:void 0,gauge_arcs_minWidth:5,gauge_expand:{},gauge_expand_duration:50,donut_label_show:!0,donut_label_format:void 0,donut_label_threshold:.05,donut_label_ratio:void 0,donut_width:void 0,donut_title:"",donut_expand:{},donut_expand_duration:50,donut_padAngle:0,spline_interpolation_type:"cardinal",stanford_lines:[],stanford_regions:[],stanford_texts:[],stanford_scaleMin:void 0,stanford_scaleMax:void 0,stanford_scaleWidth:void 0,stanford_scaleFormat:void 0,stanford_scaleValues:void 0,stanford_colors:void 0,stanford_padding:{top:0,right:0,bottom:0,left:0},regions:[],tooltip_show:!0,tooltip_grouped:!0,tooltip_order:void 0,tooltip_format_title:void 0,tooltip_format_name:void 0,tooltip_format_value:void 0,tooltip_horizontal:void 0,tooltip_position:void 0,tooltip_contents:function(e,t,a,i){return this.getTooltipContent?this.getTooltipContent(e,t,a,i):""},tooltip_init_show:!1,tooltip_init_x:0,tooltip_init_position:{top:"0px",left:"50px"},tooltip_onshow:function(){},tooltip_onhide:function(){},title_text:void 0,title_padding:{top:0,right:0,bottom:0,left:0},title_position:"top-center"};return Object.keys(this.additionalConfig).forEach(function(t){e[t]=this.additionalConfig[t]},this),e},s.prototype.additionalConfig={},s.prototype.loadConfig=function(t){function a(){var t=o.shift();return t&&r&&"object"===e(r)&&t in r?(r=r[t],a()):t?void 0:r}var i=this.config,r,o,n;Object.keys(i).forEach(function(e){r=t,o=e.split("_"),n=a(),D(n)&&(i[e]=n)})},s.prototype.convertUrlToData=function(e,t,a,i,r){var o=this,n=t?t:"csv",s,d;"json"===n?(s=o.d3.json,d=o.convertJsonToData):"tsv"===n?(s=o.d3.tsv,d=o.convertXsvToData):(s=o.d3.csv,d=o.convertXsvToData),s(e,a).then(function(e){r.call(o,d.call(o,e,i))})["catch"](function(e){throw e})},s.prototype.convertXsvToData=function(e){var t=e.columns;return 0===e.length?{keys:t,rows:[t.reduce(function(e,t){return Object.assign(e,a({},t,null))},{})]}:{keys:t,rows:[].concat(e)}},s.prototype.convertJsonToData=function(e,t){var a=this,i=[],r,o;return t?(t.x?(r=t.value.concat(t.x),a.config.data_x=t.x):r=t.value,i.push(r),e.forEach(function(e){var t=[];r.forEach(function(i){var r=a.findValueInJson(e,i);Y(r)&&(r=null),t.push(r)}),i.push(t)}),o=a.convertRowsToData(i)):(Object.keys(e).forEach(function(t){i.push([t].concat(e[t]))}),o=a.convertColumnsToData(i)),o},s.prototype.findValueInJson=function(e,t){t=t.replace(/\[(\w+)\]/g,".$1"),t=t.replace(/^\./,"");for(var a=t.split("."),r=0,o;r<a.length;++r)if(o=a[r],o in e)e=e[o];else return;return e},s.prototype.convertRowsToData=function(e){for(var t=[],a=e[0],r=1,o;r<e.length;r++){o={};for(var n=0;n<e[r].length;n++){if(Y(e[r][n]))throw new Error("Source data is missing a component at ("+r+","+n+")!");o[a[n]]=e[r][n]}t.push(o)}return{keys:a,rows:t}},s.prototype.convertColumnsToData=function(e){for(var t=[],a=[],r=0,o;r<e.length;r++){o=e[r][0];for(var n=1;n<e[r].length;n++){if(Y(t[n-1])&&(t[n-1]={}),Y(e[r][n]))throw new Error("Source data is missing a component at ("+r+","+n+")!");t[n-1][o]=e[r][n]}a.push(o)}return{keys:a,rows:t}},s.prototype.convertDataToTargets=function(e,t){var a=this,r=a.config,o,n,s,i,l;if(F(e)?i=Object.keys(e[0]):(i=e.keys,e=e.rows),s=i.filter(a.isX,a),!a.isStanfordGraphType())n=i.filter(a.isNotX,a);else if(l=i.filter(a.isEpochs,a),n=i.filter(a.isNotXAndNotEpochs,a),1!==s.length||1!==l.length||1!==n.length)throw new Error("You must define the 'x' key name and the 'epochs' for Stanford Diagrams");return n.forEach(function(o){var i=a.getXKey(o);a.isCustomX()||a.isTimeSeries()?0<=s.indexOf(i)?a.data.xs[o]=(t&&a.data.xs[o]?a.data.xs[o]:[]).concat(e.map(function(e){return e[i]}).filter(M).map(function(e,t){return a.generateTargetX(e,o,t)})):r.data_x?a.data.xs[o]=a.getOtherTargetXs():N(r.data_xs)&&(a.data.xs[o]=a.getXValuesOfXKey(i,a.data.targets)):a.data.xs[o]=e.map(function(e,t){return t})}),n.forEach(function(e){if(!a.data.xs[e])throw new Error("x is not defined for id = \""+e+"\".")}),o=n.map(function(t,o){var n=r.data_idConverter(t);return{id:n,id_org:t,values:e.map(function(e,s){var i=a.getXKey(t),d=e[i],g=null===e[t]||isNaN(e[t])?null:+e[t],p,c;return a.isCustomX()&&a.isCategorized()&&!Y(d)?(0===o&&0===s&&(r.axis_x_categories=[]),p=r.axis_x_categories.indexOf(d),-1===p&&(p=r.axis_x_categories.length,r.axis_x_categories.push(d))):p=a.generateTargetX(d,t,s),(Y(e[t])||a.data.xs[t].length<=s)&&(p=void 0),c={x:p,value:g,id:n},a.isStanfordGraphType()&&(c.epochs=e[l]),c}).filter(function(e){return D(e.x)})}}),o.forEach(function(e){var t;r.data_xSort&&(e.values=e.values.sort(function(e,t){var a=e.x||0===e.x?e.x:1/0,i=t.x||0===t.x?t.x:1/0;return a-i})),t=0,e.values.forEach(function(e){e.index=t++}),a.data.xs[e.id].sort(function(e,t){return e-t})}),a.hasNegativeValue=a.hasNegativeValueInTargets(o),a.hasPositiveValue=a.hasPositiveValueInTargets(o),r.data_type&&a.setTargetType(a.mapToIds(o).filter(function(e){return!(e in r.data_types)}),r.data_type),o.forEach(function(e){a.addCache(e.id_org,e)}),o},s.prototype.isEpochs=function(e){var t=this,a=t.config;return a.data_epochs&&e===a.data_epochs},s.prototype.isX=function(e){var t=this,a=t.config;return a.data_x&&e===a.data_x||N(a.data_xs)&&O(a.data_xs,e)},s.prototype.isNotX=function(e){return!this.isX(e)},s.prototype.isNotXAndNotEpochs=function(e){return!this.isX(e)&&!this.isEpochs(e)},s.prototype.isStackNormalized=function(){return this.config.data_stack_normalize&&0<this.config.data_groups.length},s.prototype.isAxisNormalized=function(e){var t=this;return!!t.isStackNormalized()&&t.data.targets.filter(function(a){return t.axis.getId(a.id)===e}).some(function(e){return t.isTargetNormalized(e.id)})},s.prototype.isTargetNormalized=function(e){var t=this;return t.isStackNormalized()&&t.config.data_groups.some(function(t){return t.includes(e)})},s.prototype.getXKey=function(e){var t=this,a=t.config;return a.data_x?a.data_x:N(a.data_xs)?a.data_xs[e]:null},s.prototype.getTotalPerIndex=function(e){var t=this;if(!t.isStackNormalized())return null;var a=t.getFromCache("getTotalPerIndex");if(void 0!==a)return a[e];var i={y:[],y2:[]};return t.data.targets.filter(function(e){return t.isTargetNormalized(e.id)}).filter(function(e){return t.isTargetToShow(e.id)}).forEach(function(e){var a=i[t.axis.getId(e.id)];e.values.forEach(function(e,t){a[t]||(a[t]=0),a[t]+=H(e.value)?e.value:0})}),t.addToCache("getTotalPerIndex",i),i[e]},s.prototype.getTotalDataSum=function(){var e=this,t=e.getFromCache("getTotalDataSum");if(void 0!==t)return t;var a=W(e.data.targets.filter(function(t){return e.isTargetToShow(t.id)}).map(function(e){return e.values})).map(function(e){return e.value}).reduce(function(e,t){return e+t},0);return e.addToCache("getTotalDataSum",a),a},s.prototype.getXValuesOfXKey=function(e,t){var a=this,i=t&&N(t)?a.mapToIds(t):[],r;return i.forEach(function(t){a.getXKey(t)===e&&(r=a.data.xs[t])}),r},s.prototype.getXValue=function(e,t){var a=this;return e in a.data.xs&&a.data.xs[e]&&M(a.data.xs[e][t])?a.data.xs[e][t]:t},s.prototype.getOtherTargetXs=function(){var e=this,t=Object.keys(e.data.xs);return t.length?e.data.xs[t[0]]:null},s.prototype.getOtherTargetX=function(e){var t=this.getOtherTargetXs();return t&&e<t.length?t[e]:null},s.prototype.addXs=function(e){var t=this;Object.keys(e).forEach(function(a){t.config.data_xs[a]=e[a]})},s.prototype.addName=function(e){var t=this,a;return e&&(a=t.config.data_names[e.id],e.name=void 0===a?e.id:a),e},s.prototype.getValueOnIndex=function(e,t){var a=e.filter(function(e){return e.index===t});return a.length?a[0]:null},s.prototype.updateTargetX=function(e,a){var r=this;e.forEach(function(e){e.values.forEach(function(t,o){t.x=r.generateTargetX(a[o],e.id,o)}),r.data.xs[e.id]=a})},s.prototype.updateTargetXs=function(e,a){var i=this;e.forEach(function(e){a[e.id]&&i.updateTargetX([e],a[e.id])})},s.prototype.generateTargetX=function(e,t,a){var i=this,r;return r=i.isTimeSeries()?e?i.parseDate(e):i.parseDate(i.getXValue(t,a)):i.isCustomX()&&!i.isCategorized()?M(e)?+e:i.getXValue(t,a):a,r},s.prototype.cloneTarget=function(e){return{id:e.id,id_org:e.id_org,values:e.values.map(function(e){return{x:e.x,value:e.value,id:e.id}})}},s.prototype.getMaxDataCount=function(){var e=this;return e.d3.max(e.data.targets,function(e){return e.values.length})},s.prototype.mapToIds=function(e){return e.map(function(e){return e.id})},s.prototype.mapToTargetIds=function(e){var t=this;return e?[].concat(e):t.mapToIds(t.data.targets)},s.prototype.hasTarget=function(e,t){var a=this.mapToIds(e),r;for(r=0;r<a.length;r++)if(a[r]===t)return!0;return!1},s.prototype.isTargetToShow=function(e){return 0>this.hiddenTargetIds.indexOf(e)},s.prototype.isLegendToShow=function(e){return 0>this.hiddenLegendIds.indexOf(e)},s.prototype.filterTargetsToShow=function(e){var a=this;return e.filter(function(e){return a.isTargetToShow(e.id)})},s.prototype.mapTargetsToUniqueXs=function(e){var t=this,a=t.d3.set(t.d3.merge(e.map(function(e){return e.values.map(function(e){return+e.x})}))).values();return a=t.isTimeSeries()?a.map(function(e){return new Date(+e)}):a.map(function(e){return+e}),a.sort(function(e,t){return e<t?-1:e>t?1:e>=t?0:NaN})},s.prototype.addHiddenTargetIds=function(e){e=e instanceof Array?e:Array(e);for(var t=0;t<e.length;t++)0>this.hiddenTargetIds.indexOf(e[t])&&(this.hiddenTargetIds=this.hiddenTargetIds.concat(e[t]));this.resetCache()},s.prototype.removeHiddenTargetIds=function(e){this.hiddenTargetIds=this.hiddenTargetIds.filter(function(t){return 0>e.indexOf(t)}),this.resetCache()},s.prototype.addHiddenLegendIds=function(e){e=e instanceof Array?e:Array(e);for(var t=0;t<e.length;t++)0>this.hiddenLegendIds.indexOf(e[t])&&(this.hiddenLegendIds=this.hiddenLegendIds.concat(e[t]))},s.prototype.removeHiddenLegendIds=function(e){this.hiddenLegendIds=this.hiddenLegendIds.filter(function(t){return 0>e.indexOf(t)})},s.prototype.getValuesAsIdKeyed=function(e){var a={};return e.forEach(function(e){a[e.id]=[],e.values.forEach(function(t){a[e.id].push(t.value)})}),a},s.prototype.checkValueInTargets=function(e,t){var a=Object.keys(e),r,o,n;for(r=0;r<a.length;r++)for(n=e[a[r]].values,o=0;o<n.length;o++)if(t(n[o].value))return!0;return!1},s.prototype.hasNegativeValueInTargets=function(e){return this.checkValueInTargets(e,function(e){return 0>e})},s.prototype.hasPositiveValueInTargets=function(e){return this.checkValueInTargets(e,function(e){return 0<e})},s.prototype.isOrderDesc=function(){var e=this.config;return"string"==typeof e.data_order&&"desc"===e.data_order.toLowerCase()},s.prototype.isOrderAsc=function(){var e=this.config;return"string"==typeof e.data_order&&"asc"===e.data_order.toLowerCase()},s.prototype.getOrderFunction=function(){var e=this,t=e.config,a=e.isOrderAsc(),i=e.isOrderDesc();if(a||i){var r=function(e,t){return e+_(t.value)};return function(e,t){var i=e.values.reduce(r,0),o=t.values.reduce(r,0);return a?o-i:i-o}}if(z(t.data_order))return t.data_order;if(F(t.data_order)){var o=t.data_order;return function(e,t){return o.indexOf(e.id)-o.indexOf(t.id)}}},s.prototype.orderTargets=function(e){var t=this.getOrderFunction();return t&&e.sort(t),e},s.prototype.filterByX=function(e,t){return this.d3.merge(e.map(function(e){return e.values})).filter(function(e){return 0==e.x-t})},s.prototype.filterRemoveNull=function(e){return e.filter(function(e){return M(e.value)})},s.prototype.filterByXDomain=function(e,t){return e.map(function(e){return{id:e.id,id_org:e.id_org,values:e.values.filter(function(e){return t[0]<=e.x&&e.x<=t[1]})}})},s.prototype.hasDataLabel=function(){var t=this.config;return!!("boolean"==typeof t.data_labels&&t.data_labels)||!!("object"===e(t.data_labels)&&N(t.data_labels))},s.prototype.getDataLabelLength=function(e,t,a){var i=this,r=[0,0];return i.selectChart.select("svg").selectAll(".dummy").data([e,t]).enter().append("text").text(function(e){return i.dataLabelFormat(e.id)(e)}).each(function(e,t){r[t]=k(this)[a]*1.3}).remove(),r},s.prototype.isNoneArc=function(e){return this.hasTarget(this.data.targets,e.id)},s.prototype.isArc=function(e){return"data"in e&&this.hasTarget(this.data.targets,e.data.id)},s.prototype.findClosestFromTargets=function(e,t){var a=this,i;return i=e.map(function(e){return a.findClosest(e.values,t)}),a.findClosest(i,t)},s.prototype.findClosest=function(e,t){var a=this,i=a.config.point_sensitivity,r;return e.filter(function(e){return e&&a.isBarType(e.id)}).forEach(function(e){var t=a.main.select("."+Q.bars+a.getTargetSelectorSuffix(e.id)+" ."+Q.bar+"-"+e.index).node();!r&&a.isWithinBar(a.d3.mouse(t),t)&&(r=e)}),e.filter(function(e){return e&&!a.isBarType(e.id)}).forEach(function(e){var o=a.config.tooltip_horizontal?a.horizontalDistance(e,t):a.dist(e,t);o<i&&(i=o,r=e)}),r},s.prototype.dist=function(e,t){var a=this,i=a.config,r=i.axis_rotated?1:0,o=i.axis_rotated?0:1,n=a.circleY(e,e.index),s=a.x(e.x);return m(P(s-t[r],2)+P(n-t[o],2))},s.prototype.horizontalDistance=function(e,t){var a=this,i=a.config,r=i.axis_rotated?1:0,o=a.x(e.x);return _(o-t[r])},s.prototype.convertValuesToStep=function(e){var t=[].concat(e),a;if(!this.isCategorized())return e;for(a=e.length+1;0<a;a--)t[a]=t[a-1];return t[0]={x:t[0].x-1,value:t[0].value,id:t[0].id},t[e.length+1]={x:t[e.length].x+1,value:t[e.length].value,id:t[e.length].id},t},s.prototype.getRatio=function(e,t){var a=!!(2<arguments.length&&void 0!==arguments[2])&&arguments[2],i=this,r=i.api,o=0;if(t&&r.data.shown.call(r).length)if(o=t.ratio||t.value,"arc"===e){if(i.hasType("gauge"))o=(t.endAngle-t.startAngle)/(T*(i.config.gauge_fullCircle?2:1));else{var n=i.getTotalDataSum();o=t.value/n}}else if("index"===e){var s=i.getTotalPerIndex(i.axis.getId(t.id));t.ratio=H(t.value)&&s&&0<s[t.index]?t.value/s[t.index]:0,o=t.ratio}return a&&o?100*o:o},s.prototype.updateDataAttributes=function(e,t){var a=this,i=a.config,r=i["data_"+e];return"undefined"==typeof t?r:(Object.keys(t).forEach(function(e){r[e]=t[e]}),a.redraw({withLegend:!0}),r)},s.prototype.load=function(e,a){var i=this;e&&(a.filter&&(e=e.filter(a.filter)),(a.type||a.types)&&e.forEach(function(e){var t=a.types&&a.types[e.id]?a.types[e.id]:a.type;i.setTargetType(e.id,t)}),i.data.targets.forEach(function(t){for(var a=0;a<e.length;a++)if(t.id===e[a].id){t.values=e[a].values,e.splice(a,1);break}}),i.data.targets=i.data.targets.concat(e)),i.updateTargets(i.data.targets),i.redraw({withUpdateOrgXDomain:!0,withUpdateXDomain:!0,withLegend:!0}),a.done&&a.done()},s.prototype.loadFromArgs=function(e){var t=this;t.resetCache(),e.data?t.load(t.convertDataToTargets(e.data),e):e.url?t.convertUrlToData(e.url,e.mimeType,e.headers,e.keys,function(a){t.load(t.convertDataToTargets(a),e)}):e.json?t.load(t.convertDataToTargets(t.convertJsonToData(e.json,e.keys)),e):e.rows?t.load(t.convertDataToTargets(t.convertRowsToData(e.rows)),e):e.columns?t.load(t.convertDataToTargets(t.convertColumnsToData(e.columns)),e):t.load(null,e)},s.prototype.unload=function(e,t){var a=this;return a.resetCache(),t||(t=function(){}),e=e.filter(function(e){return a.hasTarget(a.data.targets,e)}),e&&0!==e.length?void(a.svg.selectAll(e.map(function(e){return a.selectorTarget(e)})).transition().style("opacity",0).remove().call(a.endall,t),e.forEach(function(e){a.withoutFadeIn[e]=!1,a.legend&&a.legend.selectAll("."+Q.legendItem+a.getTargetSelectorSuffix(e)).remove(),a.data.targets=a.data.targets.filter(function(a){return a.id!==e})})):void t()},s.prototype.getYDomainMin=function(e){var t=this,a=t.config,i=t.mapToIds(e),r=t.getValuesAsIdKeyed(e),o,n,s,d,l,g;if(0<a.data_groups.length)for(g=t.hasNegativeValueInTargets(e),o=0;o<a.data_groups.length;o++)if(d=a.data_groups[o].filter(function(e){return 0<=i.indexOf(e)}),0!==d.length)for(s=d[0],g&&r[s]&&r[s].forEach(function(e,t){r[s][t]=0>e?e:0}),n=1;n<d.length;n++)(l=d[n],!!r[l])&&r[l].forEach(function(e,a){t.axis.getId(l)===t.axis.getId(s)&&r[s]&&!(g&&0<+e)&&(r[s][a]+=+e)});return t.d3.min(Object.keys(r).map(function(e){return t.d3.min(r[e])}))},s.prototype.getYDomainMax=function(e){var t=this,a=t.config,i=t.mapToIds(e),r=t.getValuesAsIdKeyed(e),o,n,s,d,l,g;if(0<a.data_groups.length)for(g=t.hasPositiveValueInTargets(e),o=0;o<a.data_groups.length;o++)if(d=a.data_groups[o].filter(function(e){return 0<=i.indexOf(e)}),0!==d.length)for(s=d[0],g&&r[s]&&r[s].forEach(function(e,t){r[s][t]=0<e?e:0}),n=1;n<d.length;n++)(l=d[n],!!r[l])&&r[l].forEach(function(e,a){t.axis.getId(l)===t.axis.getId(s)&&r[s]&&!(g&&0>+e)&&(r[s][a]+=+e)});return t.d3.max(Object.keys(r).map(function(e){return t.d3.max(r[e])}))},s.prototype.getYDomain=function(e,a,i){var r=this,t=r.config;if(r.isAxisNormalized(a))return[0,100];var o=e.filter(function(e){return r.axis.getId(e.id)===a}),n=i?r.filterByXDomain(o,i):o,s="y2"===a?t.axis_y2_min:t.axis_y_min,d="y2"===a?t.axis_y2_max:t.axis_y_max,l=r.getYDomainMin(n),g=r.getYDomainMax(n),p="y2"===a?t.axis_y2_center:t.axis_y_center,c=r.hasType("bar",n)&&t.bar_zerobased||r.hasType("area",n)&&t.area_zerobased,h="y2"===a?t.axis_y2_inverted:t.axis_y_inverted,x=r.hasDataLabel()&&t.axis_rotated,y=r.hasDataLabel()&&!t.axis_rotated,u,m,S,f,T,b,P,v,C,L,V;return(l=M(s)?s:M(d)?l<d?l:d-10:l,g=M(d)?d:M(s)?s<g?g:s+10:g,0===n.length)?"y2"===a?r.y2.domain():r.y.domain():(isNaN(l)&&(l=0),isNaN(g)&&(g=l),l===g&&(0>l?g=0:l=0),L=0<=l&&0<=g,V=0>=l&&0>=g,(M(s)&&L||M(d)&&V)&&(c=!1),c&&(L&&(l=0),V&&(g=0)),m=_(g-l),S=f=T=.1*m,"undefined"!=typeof p&&(b=A(_(l),_(g)),g=p+b,l=p-b),x?(P=r.getDataLabelLength(l,g,"width"),v=E(r.y.range()),C=[P[0]/v,P[1]/v],f+=m*(C[1]/(1-C[0]-C[1])),T+=m*(C[0]/(1-C[0]-C[1]))):y&&(P=r.getDataLabelLength(l,g,"height"),f+=r.axis.convertPixelsToAxisPadding(P[1],m),T+=r.axis.convertPixelsToAxisPadding(P[0],m)),"y"===a&&N(t.axis_y_padding)&&(f=r.axis.getPadding(t.axis_y_padding,"top",f,m),T=r.axis.getPadding(t.axis_y_padding,"bottom",T,m)),"y2"===a&&N(t.axis_y2_padding)&&(f=r.axis.getPadding(t.axis_y2_padding,"top",f,m),T=r.axis.getPadding(t.axis_y2_padding,"bottom",T,m)),c&&(L&&(T=l),V&&(f=-g)),u=[l-T,g+f],h?u.reverse():u)},s.prototype.getXDomainMin=function(e){var a=this,t=a.config;return D(t.axis_x_min)?a.isTimeSeries()?this.parseDate(t.axis_x_min):t.axis_x_min:a.d3.min(e,function(e){return a.d3.min(e.values,function(e){return e.x})})},s.prototype.getXDomainMax=function(e){var a=this,t=a.config;return D(t.axis_x_max)?a.isTimeSeries()?this.parseDate(t.axis_x_max):t.axis_x_max:a.d3.max(e,function(e){return a.d3.max(e.values,function(e){return e.x})})},s.prototype.getXDomainPadding=function(t){var a=this,i=a.config,r=t[1]-t[0],o,n,s,d;return a.isCategorized()?n=0:a.hasType("bar")?(o=a.getMaxDataCount(),n=1<o?r/(o-1)/2:.5):n=.01*r,"object"===e(i.axis_x_padding)&&N(i.axis_x_padding)?(s=M(i.axis_x_padding.left)?i.axis_x_padding.left:n,d=M(i.axis_x_padding.right)?i.axis_x_padding.right:n):"number"==typeof i.axis_x_padding?s=d=i.axis_x_padding:s=d=n,{left:s,right:d}},s.prototype.getXDomain=function(e){var t=this,a=[t.getXDomainMin(e),t.getXDomainMax(e)],i=a[0],r=a[1],o=t.getXDomainPadding(a),n=0,s=0;return 0!=i-r||t.isCategorized()||(t.isTimeSeries()?(i=new Date(.5*i.getTime()),r=new Date(1.5*r.getTime())):(i=0===i?1:.5*i,r=0===r?-1:1.5*r)),(i||0===i)&&(n=t.isTimeSeries()?new Date(i.getTime()-o.left):i-o.left),(r||0===r)&&(s=t.isTimeSeries()?new Date(r.getTime()+o.right):r+o.right),[n,s]},s.prototype.updateXDomain=function(e,t,a,i,r){var o=this,n=o.config;return a&&(o.x.domain(r?r:o.d3.extent(o.getXDomain(e))),o.orgXDomain=o.x.domain(),n.zoom_enabled&&o.zoom.update(),o.subX.domain(o.x.domain()),o.brush&&o.brush.updateScale(o.subX)),t&&o.x.domain(r?r:!o.brush||o.brush.empty()?o.orgXDomain:o.brush.selectionAsValue()),i&&o.x.domain(o.trimXDomain(o.x.orgDomain())),o.x.domain()},s.prototype.trimXDomain=function(e){var t=this.getZoomDomain(),a=t[0],i=t[1];return e[0]<=a&&(e[1]=+e[1]+(a-e[0]),e[0]=a),i<=e[1]&&(e[0]=+e[0]-(e[1]-i),e[1]=i),e},s.prototype.drag=function(e){var t=this,a=t.config,i=t.main,r=t.d3,o,n,s,d,l,g,p,c;!t.hasArcType()&&a.data_selection_enabled&&a.data_selection_multiple&&(o=t.dragStart[0],n=t.dragStart[1],s=e[0],d=e[1],l=b(o,s),g=A(o,s),p=a.data_selection_grouped?t.margin.top:b(n,d),c=a.data_selection_grouped?t.height:A(n,d),i.select("."+Q.dragarea).attr("x",l).attr("y",p).attr("width",g-l).attr("height",c-p),i.selectAll("."+Q.shapes).selectAll("."+Q.shape).filter(function(e){return a.data_selection_isselectable(e)}).each(function(e,a){var i=r.select(this),o=i.classed(Q.SELECTED),n=i.classed(Q.INCLUDED),s=!1,d,h,_,x,y,u;if(i.classed(Q.circle))d=1*i.attr("cx"),h=1*i.attr("cy"),y=t.togglePoint,s=l<d&&d<g&&p<h&&h<c;else if(i.classed(Q.bar))u=R(this),d=u.x,h=u.y,_=u.width,x=u.height,y=t.togglePath,s=!(g<d||d+_<l)&&!(c<h||h+x<p);else return;s^n&&(i.classed(Q.INCLUDED,!n),i.classed(Q.SELECTED,!o),y.call(t,!o,i,e,a))}))},s.prototype.dragstart=function(e){var t=this,a=t.config;t.hasArcType()||!a.data_selection_enabled||(t.dragStart=e,t.main.select("."+Q.chart).append("rect").attr("class",Q.dragarea).style("opacity",.1),t.dragging=!0)},s.prototype.dragend=function(){var e=this,t=e.config;e.hasArcType()||!t.data_selection_enabled||(e.main.select("."+Q.dragarea).transition().duration(100).style("opacity",0).remove(),e.main.selectAll("."+Q.shape).classed(Q.INCLUDED,!1),e.dragging=!1)},s.prototype.getYFormat=function(e){var t=this,a=e&&!t.hasType("gauge")?t.defaultArcValueFormat:t.yFormat,i=e&&!t.hasType("gauge")?t.defaultArcValueFormat:t.y2Format;return function(e,r,o){var n="y2"===t.axis.getId(o)?i:a;return n.call(t,e,r)}},s.prototype.yFormat=function(e){var t=this,a=t.config,i=a.axis_y_tick_format?a.axis_y_tick_format:t.defaultValueFormat;return i(e)},s.prototype.y2Format=function(e){var t=this,a=t.config,i=a.axis_y2_tick_format?a.axis_y2_tick_format:t.defaultValueFormat;return i(e)},s.prototype.defaultValueFormat=function(e){return M(e)?+e:""},s.prototype.defaultArcValueFormat=function(e,t){return(100*t).toFixed(1)+"%"},s.prototype.dataLabelFormat=function(t){var a=this,i=a.config.data_labels,r=function(e){return M(e)?+e:""},o;return o="function"==typeof i.format?i.format:"object"===e(i.format)?i.format[t]?!0===i.format[t]?r:i.format[t]:function(){return""}:r,o},s.prototype.initGrid=function(){var e=this,t=e.config,a=e.d3;e.grid=e.main.append("g").attr("clip-path",e.clipPathForGrid).attr("class",Q.grid),t.grid_x_show&&e.grid.append("g").attr("class",Q.xgrids),t.grid_y_show&&e.grid.append("g").attr("class",Q.ygrids),t.grid_focus_show&&e.grid.append("g").attr("class",Q.xgridFocus).append("line").attr("class",Q.xgridFocus),e.xgrid=a.selectAll([]),t.grid_lines_front||e.initGridLines()},s.prototype.initGridLines=function(){var e=this,t=e.d3;e.gridLines=e.main.append("g").attr("clip-path",e.clipPathForGrid).attr("class",Q.grid+" "+Q.gridLines),e.gridLines.append("g").attr("class",Q.xgridLines),e.gridLines.append("g").attr("class",Q.ygridLines),e.xgridLines=t.selectAll([])},s.prototype.updateXGrid=function(e){var t=this,a=t.config,i=t.d3,r=t.generateGridData(a.grid_x_type,t.x),o=t.isCategorized()?t.xAxis.tickOffset():0;t.xgridAttr=a.axis_rotated?{x1:0,x2:t.width,y1:function(e){return t.x(e)-o},y2:function(e){return t.x(e)-o}}:{x1:function(e){return t.x(e)+o},x2:function(e){return t.x(e)+o},y1:0,y2:t.height},t.xgridAttr.opacity=function(){var e=+i.select(this).attr(a.axis_rotated?"y1":"x1");return e===(a.axis_rotated?t.height:0)?0:1};var n=t.main.select("."+Q.xgrids).selectAll("."+Q.xgrid).data(r),s=n.enter().append("line").attr("class",Q.xgrid).attr("x1",t.xgridAttr.x1).attr("x2",t.xgridAttr.x2).attr("y1",t.xgridAttr.y1).attr("y2",t.xgridAttr.y2).style("opacity",0);t.xgrid=s.merge(n),e||t.xgrid.attr("x1",t.xgridAttr.x1).attr("x2",t.xgridAttr.x2).attr("y1",t.xgridAttr.y1).attr("y2",t.xgridAttr.y2).style("opacity",t.xgridAttr.opacity),n.exit().remove()},s.prototype.updateYGrid=function(){var e=this,t=e.config,a=e.yAxis.tickValues()||e.y.ticks(t.grid_y_ticks),i=e.main.select("."+Q.ygrids).selectAll("."+Q.ygrid).data(a),r=i.enter().append("line").attr("class",Q.ygrid);e.ygrid=r.merge(i),e.ygrid.attr("x1",t.axis_rotated?e.y:0).attr("x2",t.axis_rotated?e.y:e.width).attr("y1",t.axis_rotated?0:e.y).attr("y2",t.axis_rotated?e.height:e.y),i.exit().remove(),e.smoothLines(e.ygrid,"grid")},s.prototype.gridTextAnchor=function(e){return e.position?e.position:"end"},s.prototype.gridTextDx=function(e){return"start"===e.position?4:"middle"===e.position?0:-4},s.prototype.xGridTextX=function(e){return"start"===e.position?-this.height:"middle"===e.position?-this.height/2:0},s.prototype.yGridTextX=function(e){return"start"===e.position?0:"middle"===e.position?this.width/2:this.width},s.prototype.updateGrid=function(e){var t=this,a=t.main,i=t.config,r=t.xv.bind(t),o=t.yv.bind(t),n=t.xGridTextX.bind(t),s=t.yGridTextX.bind(t),d,l,g,p;t.grid.style("visibility",t.hasArcType()?"hidden":"visible"),a.select("line."+Q.xgridFocus).style("visibility","hidden"),i.grid_x_show&&t.updateXGrid(),d=a.select("."+Q.xgridLines).selectAll("."+Q.xgridLine).data(i.grid_x_lines),l=d.enter().append("g").attr("class",function(e){return Q.xgridLine+(e["class"]?" "+e["class"]:"")}),l.append("line").attr("x1",i.axis_rotated?0:r).attr("x2",i.axis_rotated?t.width:r).attr("y1",i.axis_rotated?r:0).attr("y2",i.axis_rotated?r:t.height).style("opacity",0),l.append("text").attr("text-anchor",t.gridTextAnchor).attr("transform",i.axis_rotated?"":"rotate(-90)").attr("x",i.axis_rotated?s:n).attr("y",r).attr("dx",t.gridTextDx).attr("dy",-5).style("opacity",0),t.xgridLines=l.merge(d),d.exit().transition().duration(e).style("opacity",0).remove(),i.grid_y_show&&t.updateYGrid(),g=a.select("."+Q.ygridLines).selectAll("."+Q.ygridLine).data(i.grid_y_lines),p=g.enter().append("g").attr("class",function(e){return Q.ygridLine+(e["class"]?" "+e["class"]:"")}),p.append("line").attr("x1",i.axis_rotated?o:0).attr("x2",i.axis_rotated?o:t.width).attr("y1",i.axis_rotated?0:o).attr("y2",i.axis_rotated?t.height:o).style("opacity",0),p.append("text").attr("text-anchor",t.gridTextAnchor).attr("transform",i.axis_rotated?"rotate(-90)":"").attr("x",i.axis_rotated?n:s).attr("y",o).attr("dx",t.gridTextDx).attr("dy",-5).style("opacity",0),t.ygridLines=p.merge(g),t.ygridLines.select("line").transition().duration(e).attr("x1",i.axis_rotated?o:0).attr("x2",i.axis_rotated?o:t.width).attr("y1",i.axis_rotated?0:o).attr("y2",i.axis_rotated?t.height:o).style("opacity",1),t.ygridLines.select("text").transition().duration(e).attr("x",i.axis_rotated?t.xGridTextX.bind(t):t.yGridTextX.bind(t)).attr("y",o).text(function(e){return e.text}).style("opacity",1),g.exit().transition().duration(e).style("opacity",0).remove()},s.prototype.redrawGrid=function(e,t){var a=this,i=a.config,r=a.xv.bind(a),o=a.xgridLines.select("line"),n=a.xgridLines.select("text");return[(e?o.transition(t):o).attr("x1",i.axis_rotated?0:r).attr("x2",i.axis_rotated?a.width:r).attr("y1",i.axis_rotated?r:0).attr("y2",i.axis_rotated?r:a.height).style("opacity",1),(e?n.transition(t):n).attr("x",i.axis_rotated?a.yGridTextX.bind(a):a.xGridTextX.bind(a)).attr("y",r).text(function(e){return e.text}).style("opacity",1)]},s.prototype.showXGridFocus=function(e){var t=this,a=t.config,i=e.filter(function(e){return e&&M(e.value)}),r=t.main.selectAll("line."+Q.xgridFocus),o=t.xx.bind(t);!a.tooltip_show||t.hasType("scatter")||t.hasType("stanford")||t.hasArcType()||(r.style("visibility","visible").data([i[0]]).attr(a.axis_rotated?"y1":"x1",o).attr(a.axis_rotated?"y2":"x2",o),t.smoothLines(r,"grid"))},s.prototype.hideXGridFocus=function(){this.main.select("line."+Q.xgridFocus).style("visibility","hidden")},s.prototype.updateXgridFocus=function(){var e=this,t=e.config;e.main.select("line."+Q.xgridFocus).attr("x1",t.axis_rotated?0:-10).attr("x2",t.axis_rotated?e.width:-10).attr("y1",t.axis_rotated?-10:0).attr("y2",t.axis_rotated?-10:e.height)},s.prototype.generateGridData=function(e,t){var a=this,r=[],o=a.main.select("."+Q.axisX).selectAll(".tick").size(),n,s,d,l;if("year"===e)for(n=a.getXDomain(),s=n[0].getFullYear(),d=n[1].getFullYear(),l=s;l<=d;l++)r.push(new Date(l+"-01-01 00:00:00"));else r=t.ticks(10),r.length>o&&(r=r.filter(function(e){return 0>(""+e).indexOf(".")}));return r},s.prototype.getGridFilterToRemove=function(e){return e?function(t){var a=!1;return[].concat(e).forEach(function(e){("value"in e&&t.value===e.value||"class"in e&&t["class"]===e["class"])&&(a=!0)}),a}:function(){return!0}},s.prototype.removeGridLines=function(e,t){var a=this,i=a.config,r=a.getGridFilterToRemove(e),o=function(e){return!r(e)},n=t?Q.xgridLines:Q.ygridLines,s=t?Q.xgridLine:Q.ygridLine;a.main.select("."+n).selectAll("."+s).filter(r).transition().duration(i.transition_duration).style("opacity",0).remove(),t?i.grid_x_lines=i.grid_x_lines.filter(o):i.grid_y_lines=i.grid_y_lines.filter(o)},s.prototype.initEventRect=function(){var e=this,t=e.config;e.main.select("."+Q.chart).append("g").attr("class",Q.eventRects).style("fill-opacity",0),e.eventRect=e.main.select("."+Q.eventRects).append("rect").attr("class",Q.eventRect),t.zoom_enabled&&e.zoom&&(e.eventRect.call(e.zoom).on("dblclick.zoom",null),t.zoom_initialRange&&e.eventRect.transition().duration(0).call(e.zoom.transform,e.zoomTransform(t.zoom_initialRange)))},s.prototype.redrawEventRect=function(){function e(){t.svg.select("."+Q.eventRect).style("cursor",null),t.hideXGridFocus(),t.hideTooltip(),t.unexpandCircles(),t.unexpandBars()}var t=this,a=t.d3,i=t.config,r,o,n,s;r=0,o=0,n=t.width,s=t.height,t.main.select("."+Q.eventRects).style("cursor",i.zoom_enabled?i.axis_rotated?"ns-resize":"ew-resize":null),t.eventRect.attr("x",r).attr("y",o).attr("width",n).attr("height",s).on("mouseout",i.interaction_enabled?function(){!i||t.hasArcType()||e()}:null).on("mousemove",i.interaction_enabled?function(){var r,o,n,s,d;if(!t.dragging)return t.hasArcType(r)?void 0:(r=t.filterTargetsToShow(t.data.targets),o=a.mouse(this),n=t.findClosestFromTargets(r,o),t.mouseover&&(!n||n.id!==t.mouseover.id)&&(i.data_onmouseout.call(t.api,t.mouseover),t.mouseover=void 0),n?void(s=t.isScatterOrStanfordType(n)||!i.tooltip_grouped?[n]:t.filterByX(r,n.x),d=s.map(function(e){return t.addName(e)}),t.showTooltip(d,this),i.point_focus_expand_enabled&&(t.unexpandCircles(),d.forEach(function(e){t.expandCircles(e.index,e.id,!1)})),t.expandBars(n.index,n.id,!0),t.showXGridFocus(d),(t.isBarType(n.id)||t.dist(n,o)<i.point_sensitivity)&&(t.svg.select("."+Q.eventRect).style("cursor","pointer"),!t.mouseover&&(i.data_onmouseover.call(t.api,n),t.mouseover=n))):void e())}:null).on("click",i.interaction_enabled?function(){var e,r,o,n;t.hasArcType(e)||(e=t.filterTargetsToShow(t.data.targets),r=a.mouse(this),o=t.findClosestFromTargets(e,r),!o||(t.isBarType(o.id)||t.dist(o,r)<i.point_sensitivity)&&(n=t.isScatterOrStanfordType(o)||!i.data_selection_grouped?[o]:t.filterByX(e,o.x),n.forEach(function(e){t.main.selectAll("."+Q.shapes+t.getTargetSelectorSuffix(e.id)).selectAll("."+Q.shape+"-"+e.index).each(function(){(i.data_selection_grouped||t.isWithinShape(this,e))&&(t.toggleShape(this,e,e.index),i.data_onclick.call(t.api,e,this))})})))}:null).call(i.interaction_enabled&&i.data_selection_draggable&&t.drag?a.drag().on("drag",function(){t.drag(a.mouse(this))}).on("start",function(){t.dragstart(a.mouse(this))}).on("end",function(){t.dragend()}):function(){})},s.prototype.getMousePosition=function(e){var t=this;return[t.x(e.x),t.getYScale(e.id)(e.value)]},s.prototype.dispatchEvent=function(e,t){var a=this,i="."+Q.eventRect,r=a.main.select(i).node(),o=r.getBoundingClientRect(),n=o.left+(t?t[0]:0),s=o.top+(t?t[1]:0),d=document.createEvent("MouseEvents");d.initMouseEvent(e,!0,!0,window,0,n,s,n,s,!1,!1,!1,!1,0,null),r.dispatchEvent(d)},s.prototype.initLegend=function(){var e=this;return e.legendItemTextBox={},e.legendHasRendered=!1,e.legend=e.svg.append("g").attr("transform",e.getTranslate("legend")),e.config.legend_show?void e.updateLegendWithDefaults():(e.legend.style("visibility","hidden"),void(e.hiddenLegendIds=e.mapToIds(e.data.targets)))},s.prototype.updateLegendWithDefaults=function(){var e=this;e.updateLegend(e.mapToIds(e.data.targets),{withTransform:!1,withTransitionForTransform:!1,withTransition:!1})},s.prototype.updateSizeForLegend=function(e,t){var a=this,i=a.config,r={top:a.isLegendTop?a.getCurrentPaddingTop()+i.legend_inset_y+5.5:a.currentHeight-e-a.getCurrentPaddingBottom()-i.legend_inset_y,left:a.isLegendLeft?a.getCurrentPaddingLeft()+i.legend_inset_x+.5:a.currentWidth-t-a.getCurrentPaddingRight()-i.legend_inset_x+.5};a.margin3={top:a.isLegendRight?0:a.isLegendInset?r.top:a.currentHeight-e,right:NaN,bottom:0,left:a.isLegendRight?a.currentWidth-t:a.isLegendInset?r.left:0}},s.prototype.transformLegend=function(e){var t=this;(e?t.legend.transition():t.legend).attr("transform",t.getTranslate("legend"))},s.prototype.updateLegendStep=function(e){this.legendStep=e},s.prototype.updateLegendItemWidth=function(e){this.legendItemWidth=e},s.prototype.updateLegendItemHeight=function(e){this.legendItemHeight=e},s.prototype.getLegendWidth=function(){var e=this;return e.config.legend_show?e.isLegendRight||e.isLegendInset?e.legendItemWidth*(e.legendStep+1):e.currentWidth:0},s.prototype.getLegendHeight=function(){var e=this,t=0;return e.config.legend_show&&(e.isLegendRight?t=e.currentHeight:t=A(20,e.legendItemHeight)*(e.legendStep+1)),t},s.prototype.opacityForLegend=function(e){return e.classed(Q.legendItemHidden)?null:1},s.prototype.opacityForUnfocusedLegend=function(e){return e.classed(Q.legendItemHidden)?null:.3},s.prototype.toggleFocusLegend=function(e,t){var a=this;e=a.mapToTargetIds(e),a.legend.selectAll("."+Q.legendItem).filter(function(t){return 0<=e.indexOf(t)}).classed(Q.legendItemFocused,t).transition().duration(100).style("opacity",function(){var e=t?a.opacityForLegend:a.opacityForUnfocusedLegend;return e.call(a,a.d3.select(this))})},s.prototype.revertLegend=function(){var e=this,t=e.d3;e.legend.selectAll("."+Q.legendItem).classed(Q.legendItemFocused,!1).transition().duration(100).style("opacity",function(){return e.opacityForLegend(t.select(this))})},s.prototype.showLegend=function(e){var t=this,a=t.config;a.legend_show||(a.legend_show=!0,t.legend.style("visibility","visible"),!t.legendHasRendered&&t.updateLegendWithDefaults()),t.removeHiddenLegendIds(e),t.legend.selectAll(t.selectorLegends(e)).style("visibility","visible").transition().style("opacity",function(){return t.opacityForLegend(t.d3.select(this))})},s.prototype.hideLegend=function(e){var t=this,a=t.config;a.legend_show&&X(e)&&(a.legend_show=!1,t.legend.style("visibility","hidden")),t.addHiddenLegendIds(e),t.legend.selectAll(t.selectorLegends(e)).style("opacity",0).style("visibility","hidden")},s.prototype.clearLegendItemTextBoxCache=function(){this.legendItemTextBox={}},s.prototype.updateLegend=function(e,t,a){function i(e,t){return o.legendItemTextBox[t]||(o.legendItemTextBox[t]=o.getTextRect(e.textContent,Q.legendItem,e)),o.legendItemTextBox[t]}function r(t,a,r){function l(e,t){t||(P=(b-p-A)/2,10>P&&(P=(b-A)/2,p=0,u++)),y[e]=u,x[u]=o.isLegendInset?10:P,c[e]=p,p+=A}var m=r===e.length-1,S=i(t,a),f=S.width+g+(m&&!(o.isLegendRight||o.isLegendInset)?0:10)+n.legend_padding,T=S.height+4,A=o.isLegendRight||o.isLegendInset?T:f,b=o.isLegendRight||o.isLegendInset?o.getLegendHeight():o.getLegendWidth(),P,v;return 0===r&&(p=0,u=0,s=0,d=0),n.legend_show&&!o.isLegendToShow(a)?void(h[a]=_[a]=y[a]=c[a]=0):void(h[a]=f,_[a]=T,(!s||f>=s)&&(s=f),(!d||T>=d)&&(d=T),v=o.isLegendRight||o.isLegendInset?d:s,n.legend_equally?(Object.keys(h).forEach(function(e){h[e]=s}),Object.keys(_).forEach(function(e){_[e]=d}),P=(b-v*e.length)/2,10>P?(p=0,u=0,e.forEach(function(e){l(e)})):l(a,!0)):l(a))}var o=this,n=o.config,s=0,d=0,g=n.legend_item_tile_width+5,p=0,c={},h={},_={},x=[0],y={},u=0,m,S,f,T,A,b,P,v,C,L,V,G,w,E,R,k;e=e.filter(function(e){return!D(n.data_names[e])||null!==n.data_names[e]}),t=t||{},V=I(t,"withTransition",!0),G=I(t,"withTransitionForTransform",!0),o.isLegendInset&&(u=n.legend_inset_step?n.legend_inset_step:e.length,o.updateLegendStep(u)),o.isLegendRight?(m=function(e){return s*y[e]},T=function(e){return x[y[e]]+c[e]}):o.isLegendInset?(m=function(e){return s*y[e]+10},T=function(e){return x[y[e]]+c[e]}):(m=function(e){return x[y[e]]+c[e]},T=function(e){return d*y[e]}),S=function(e,t){return m(e,t)+4+n.legend_item_tile_width},A=function(e,t){return T(e,t)+9},f=function(e,t){return m(e,t)},b=function(e,t){return T(e,t)-5},P=function(e,t){return m(e,t)-2},v=function(e,t){return m(e,t)-2+n.legend_item_tile_width},C=function(e,t){return T(e,t)+4},L=o.legend.selectAll("."+Q.legendItem).data(e).enter().append("g").attr("class",function(e){return o.generateClass(Q.legendItem,e)}).style("visibility",function(e){return o.isLegendToShow(e)?"visible":"hidden"}).style("cursor","pointer").on("click",function(e){n.legend_item_onclick?n.legend_item_onclick.call(o,e):o.d3.event.altKey?(o.api.hide(),o.api.show(e)):(o.api.toggle(e),o.isTargetToShow(e)?o.api.focus(e):o.api.revert())}).on("mouseover",function(e){n.legend_item_onmouseover?n.legend_item_onmouseover.call(o,e):(o.d3.select(this).classed(Q.legendItemFocused,!0),!o.transiting&&o.isTargetToShow(e)&&o.api.focus(e))}).on("mouseout",function(e){n.legend_item_onmouseout?n.legend_item_onmouseout.call(o,e):(o.d3.select(this).classed(Q.legendItemFocused,!1),o.api.revert())}),L.append("text").text(function(e){return D(n.data_names[e])?n.data_names[e]:e}).each(function(e,t){r(this,e,t)}).style("pointer-events","none").attr("x",o.isLegendRight||o.isLegendInset?S:-200).attr("y",o.isLegendRight||o.isLegendInset?-200:A),L.append("rect").attr("class",Q.legendItemEvent).style("fill-opacity",0).attr("x",o.isLegendRight||o.isLegendInset?f:-200).attr("y",o.isLegendRight||o.isLegendInset?-200:b),L.append("line").attr("class",Q.legendItemTile).style("stroke",o.color).style("pointer-events","none").attr("x1",o.isLegendRight||o.isLegendInset?P:-200).attr("y1",o.isLegendRight||o.isLegendInset?-200:C).attr("x2",o.isLegendRight||o.isLegendInset?v:-200).attr("y2",o.isLegendRight||o.isLegendInset?-200:C).attr("stroke-width",n.legend_item_tile_height),k=o.legend.select("."+Q.legendBackground+" rect"),o.isLegendInset&&0<s&&0===k.size()&&(k=o.legend.insert("g","."+Q.legendItem).attr("class",Q.legendBackground).append("rect")),w=o.legend.selectAll("text").data(e).text(function(e){return D(n.data_names[e])?n.data_names[e]:e}).each(function(e,t){r(this,e,t)}),(V?w.transition():w).attr("x",S).attr("y",A),E=o.legend.selectAll("rect."+Q.legendItemEvent).data(e),(V?E.transition():E).attr("width",function(e){return h[e]}).attr("height",function(e){return _[e]}).attr("x",f).attr("y",b),R=o.legend.selectAll("line."+Q.legendItemTile).data(e),(V?R.transition():R).style("stroke",o.levelColor?function(e){return o.levelColor(o.cache[e].values[0].value)}:o.color).attr("x1",P).attr("y1",C).attr("x2",v).attr("y2",C),k&&(V?k.transition():k).attr("height",o.getLegendHeight()-12).attr("width",s*(u+1)+10),o.legend.selectAll("."+Q.legendItem).classed(Q.legendItemHidden,function(e){return!o.isTargetToShow(e)}),o.updateLegendItemWidth(s),o.updateLegendItemHeight(d),o.updateLegendStep(u),o.updateSizes(),o.updateScales(),o.updateSvgSize(),o.transformAll(G,a),o.legendHasRendered=!0},s.prototype.initRegion=function(){var e=this;e.region=e.main.append("g").attr("clip-path",e.clipPath).attr("class",Q.regions)},s.prototype.updateRegion=function(e){var t=this,a=t.config;t.region.style("visibility",t.hasArcType()?"hidden":"visible");var i=t.main.select("."+Q.regions).selectAll("."+Q.region).data(a.regions),r=i.enter().append("rect").attr("x",t.regionX.bind(t)).attr("y",t.regionY.bind(t)).attr("width",t.regionWidth.bind(t)).attr("height",t.regionHeight.bind(t)).style("fill-opacity",0);t.mainRegion=r.merge(i).attr("class",t.classRegion.bind(t)),i.exit().transition().duration(e).style("opacity",0).remove()},s.prototype.redrawRegion=function(e,t){var a=this,i=a.mainRegion;return[(e?i.transition(t):i).attr("x",a.regionX.bind(a)).attr("y",a.regionY.bind(a)).attr("width",a.regionWidth.bind(a)).attr("height",a.regionHeight.bind(a)).style("fill-opacity",function(e){return M(e.opacity)?e.opacity:.1})]},s.prototype.regionX=function(e){var t=this,a=t.config,i="y"===e.axis?t.y:t.y2,r;return r="y"===e.axis||"y2"===e.axis?a.axis_rotated?"start"in e?i(e.start):0:0:a.axis_rotated?0:"start"in e?t.x(t.isTimeSeries()?t.parseDate(e.start):e.start):0,r},s.prototype.regionY=function(e){var t=this,a=t.config,i="y"===e.axis?t.y:t.y2,r;return r="y"===e.axis||"y2"===e.axis?a.axis_rotated?0:"end"in e?i(e.end):0:a.axis_rotated?"start"in e?t.x(t.isTimeSeries()?t.parseDate(e.start):e.start):0:0,r},s.prototype.regionWidth=function(e){var t=this,a=t.config,i=t.regionX(e),r="y"===e.axis?t.y:t.y2,o;return o="y"===e.axis||"y2"===e.axis?a.axis_rotated?"end"in e?r(e.end):t.width:t.width:a.axis_rotated?t.width:"end"in e?t.x(t.isTimeSeries()?t.parseDate(e.end):e.end):t.width,o<i?0:o-i},s.prototype.regionHeight=function(e){var t=this,a=t.config,i=this.regionY(e),r="y"===e.axis?t.y:t.y2,o;return o="y"===e.axis||"y2"===e.axis?a.axis_rotated?t.height:"start"in e?r(e.start):t.height:a.axis_rotated?"end"in e?t.x(t.isTimeSeries()?t.parseDate(e.end):e.end):t.height:t.height,o<i?0:o-i},s.prototype.isRegionOnX=function(e){return!e.axis||"x"===e.axis},s.prototype.getScale=function(e,t,a){return(a?this.d3.scaleTime():this.d3.scaleLinear()).range([e,t])},s.prototype.getX=function(e,t,a,i){var r=this,o=r.getScale(e,t,r.isTimeSeries()),n=a?o.domain(a):o,s;for(s in r.isCategorized()?(i=i||function(){return 0},o=function(e,t){var a=n(e)+i(e);return t?a:C(a)}):o=function(e,t){var a=n(e);return t?a:C(a)},n)o[s]=n[s];return o.orgDomain=function(){return n.domain()},r.isCategorized()&&(o.domain=function(e){return arguments.length?(n.domain(e),o):(e=this.orgDomain(),[e[0],e[1]+1])}),o},s.prototype.getY=function(e,t,a){var i=this.getScale(e,t,this.isTimeSeriesY());return a&&i.domain(a),i},s.prototype.getYScale=function(e){return"y2"===this.axis.getId(e)?this.y2:this.y},s.prototype.getSubYScale=function(e){return"y2"===this.axis.getId(e)?this.subY2:this.subY},s.prototype.updateScales=function(){var e=this,t=e.config,a=!e.x;e.xMin=t.axis_rotated?1:0,e.xMax=t.axis_rotated?e.height:e.width,e.yMin=t.axis_rotated?0:e.height,e.yMax=t.axis_rotated?e.width:1,e.subXMin=e.xMin,e.subXMax=e.xMax,e.subYMin=t.axis_rotated?0:e.height2,e.subYMax=t.axis_rotated?e.width2:1,e.x=e.getX(e.xMin,e.xMax,a?void 0:e.x.orgDomain(),function(){return e.xAxis.tickOffset()}),e.y=e.getY(e.yMin,e.yMax,a?t.axis_y_default:e.y.domain()),e.y2=e.getY(e.yMin,e.yMax,a?t.axis_y2_default:e.y2.domain()),e.subX=e.getX(e.xMin,e.xMax,e.orgXDomain,function(t){return t%1?0:e.subXAxis.tickOffset()}),e.subY=e.getY(e.subYMin,e.subYMax,a?t.axis_y_default:e.subY.domain()),e.subY2=e.getY(e.subYMin,e.subYMax,a?t.axis_y2_default:e.subY2.domain()),e.xAxisTickFormat=e.axis.getXAxisTickFormat(),e.xAxisTickValues=e.axis.getXAxisTickValues(),e.yAxisTickValues=e.axis.getYAxisTickValues(),e.y2AxisTickValues=e.axis.getY2AxisTickValues(),e.xAxis=e.axis.getXAxis(e.x,e.xOrient,e.xAxisTickFormat,e.xAxisTickValues,t.axis_x_tick_outer),e.subXAxis=e.axis.getXAxis(e.subX,e.subXOrient,e.xAxisTickFormat,e.xAxisTickValues,t.axis_x_tick_outer),e.yAxis=e.axis.getYAxis("y",e.y,e.yOrient,e.yAxisTickValues,t.axis_y_tick_outer),e.y2Axis=e.axis.getYAxis("y2",e.y2,e.y2Orient,e.y2AxisTickValues,t.axis_y2_tick_outer),!a&&e.brush&&e.brush.updateScale(e.subX),e.updateArc&&e.updateArc()},s.prototype.selectPoint=function(e,t,a){var i=this,o=i.config,n=(o.axis_rotated?i.circleY:i.circleX).bind(i),s=(o.axis_rotated?i.circleX:i.circleY).bind(i),d=i.pointSelectR.bind(i);o.data_onselected.call(i.api,t,e.node()),i.main.select("."+Q.selectedCircles+i.getTargetSelectorSuffix(t.id)).selectAll("."+Q.selectedCircle+"-"+a).data([t]).enter().append("circle").attr("class",function(){return i.generateClass(Q.selectedCircle,a)}).attr("cx",n).attr("cy",s).attr("stroke",function(){return i.color(t)}).attr("r",function(e){return 1.4*i.pointSelectR(e)}).transition().duration(100).attr("r",d)},s.prototype.unselectPoint=function(e,t,a){var i=this;i.config.data_onunselected.call(i.api,t,e.node()),i.main.select("."+Q.selectedCircles+i.getTargetSelectorSuffix(t.id)).selectAll("."+Q.selectedCircle+"-"+a).transition().duration(100).attr("r",0).remove()},s.prototype.togglePoint=function(e,t,a,r){e?this.selectPoint(t,a,r):this.unselectPoint(t,a,r)},s.prototype.selectPath=function(e,t){var a=this;a.config.data_onselected.call(a,t,e.node()),a.config.interaction_brighten&&e.transition().duration(100).style("fill",function(){return a.d3.rgb(a.color(t)).brighter(.75)})},s.prototype.unselectPath=function(e,t){var a=this;a.config.data_onunselected.call(a,t,e.node()),a.config.interaction_brighten&&e.transition().duration(100).style("fill",function(){return a.color(t)})},s.prototype.togglePath=function(e,t,a,r){e?this.selectPath(t,a,r):this.unselectPath(t,a,r)},s.prototype.getToggle=function(e,t){var a=this,i;return"circle"===e.nodeName?a.isStepType(t)?i=function(){}:i=a.togglePoint:"path"===e.nodeName&&(i=a.togglePath),i},s.prototype.toggleShape=function(e,t,a){var i=this,r=i.d3,o=i.config,n=r.select(e),s=n.classed(Q.SELECTED),l=i.getToggle(e,t).bind(i);o.data_selection_enabled&&o.data_selection_isselectable(t)&&(!o.data_selection_multiple&&i.main.selectAll("."+Q.shapes+(o.data_selection_grouped?i.getTargetSelectorSuffix(t.id):"")).selectAll("."+Q.shape).each(function(e,t){var a=r.select(this);a.classed(Q.SELECTED)&&l(!1,a.classed(Q.SELECTED,!1),e,t)}),n.classed(Q.SELECTED,!s),l(!s,n,t,a))},s.prototype.initBar=function(){var e=this;e.main.select("."+Q.chart).append("g").attr("class",Q.chartBars)},s.prototype.updateTargetsForBar=function(e){var t=this,a=t.config,i=t.classChartBar.bind(t),r=t.classBars.bind(t),o=t.classFocus.bind(t),n,s;n=t.main.select("."+Q.chartBars).selectAll("."+Q.chartBar).data(e).attr("class",function(e){return i(e)+o(e)}),s=n.enter().append("g").attr("class",i).style("pointer-events","none"),s.append("g").attr("class",r).style("cursor",function(e){return a.data_selection_isselectable(e)?"pointer":null})},s.prototype.updateBar=function(e){var t=this,a=t.barData.bind(t),i=t.classBar.bind(t),r=t.initialOpacity.bind(t),o=function(e){return t.color(e.id)},n=t.main.selectAll("."+Q.bars).selectAll("."+Q.bar).data(a),s=n.enter().append("path").attr("class",i).style("stroke",o).style("fill",o);t.mainBar=s.merge(n).style("opacity",r),n.exit().transition().duration(e).style("opacity",0)},s.prototype.redrawBar=function(e,t,a){return[(t?this.mainBar.transition(a):this.mainBar).attr("d",e).style("stroke",this.color).style("fill",this.color).style("opacity",1)]},s.prototype.getBarW=function(e,t){var a=this,i=a.config,r="number"==typeof i.bar_width?i.bar_width:t?e.tickInterval()*i.bar_width_ratio/t:0;return i.bar_width_max&&r>i.bar_width_max?i.bar_width_max:r},s.prototype.getBars=function(e,t){var a=this;return(t?a.main.selectAll("."+Q.bars+a.getTargetSelectorSuffix(t)):a.main).selectAll("."+Q.bar+(M(e)?"-"+e:""))},s.prototype.expandBars=function(e,t,a){var i=this;a&&i.unexpandBars(),i.getBars(e,t).classed(Q.EXPANDED,!0)},s.prototype.unexpandBars=function(e){var t=this;t.getBars(e).classed(Q.EXPANDED,!1)},s.prototype.generateDrawBar=function(e,t){var a=this,r=a.config,o=a.generateGetBarPoints(e,t);return function(e,t){var a=o(e,t),i=r.axis_rotated?1:0,n=r.axis_rotated?0:1,s="M "+a[0][i]+","+a[0][n]+" L"+a[1][i]+","+a[1][n]+" L"+a[2][i]+","+a[2][n]+" L"+a[3][i]+","+a[3][n]+" z";return s}},s.prototype.generateGetBarPoints=function(e,t){var a=this,i=t?a.subXAxis:a.xAxis,r=e.__max__+1,o=a.getBarW(i,r),n=a.getShapeX(o,r,e,!!t),s=a.getShapeY(!!t),l=a.getShapeOffset(a.isBarType,e,!!t),g=o*(a.config.bar_space/2),p=t?a.getSubYScale:a.getYScale;return function(e,t){var i=p.call(a,e.id)(0),r=l(e,t)||i,d=n(e),c=s(e);return a.config.axis_rotated&&(0<e.value&&c<i||0>e.value&&i<c)&&(c=i),c-=i-r,[[d+g,r],[d+g,c],[d+o-g,c],[d+o-g,r]]}},s.prototype.isWithinBar=function(e,t){if(2>t.pathSegList.numberOfItems)return!1;var a=k(t),i=t.pathSegList.getItem(0),r=t.pathSegList.getItem(1),o=b(i.x,r.x),n=b(i.y,r.y),s=a.width,d=a.height;return o-2<e[0]&&e[0]<o+s+2&&n-2<e[1]&&e[1]<n+d+2},s.prototype.getShapeIndices=function(e){var t=this,a=t.config,r={},o=0,n,s;return t.filterTargetsToShow(t.data.targets.filter(e,t)).forEach(function(e){for(n=0;n<a.data_groups.length;n++)if(!(0>a.data_groups[n].indexOf(e.id)))for(s=0;s<a.data_groups[n].length;s++)if(a.data_groups[n][s]in r){r[e.id]=r[a.data_groups[n][s]];break}Y(r[e.id])&&(r[e.id]=o++)}),r.__max__=o-1,r},s.prototype.getShapeX=function(e,t,a,i){var r=this,o=i?r.subX:r.x;return function(i){var r=i.id in a?a[i.id]:0;return i.x||0===i.x?o(i.x)-e*(t/2-r):0}},s.prototype.getShapeY=function(e){var t=this;return function(a){var i=e?t.getSubYScale(a.id):t.getYScale(a.id);return i(t.isTargetNormalized(a.id)?t.getRatio("index",a,!0):a.value)}},s.prototype.getShapeOffset=function(e,a,r){var o=this,t=o.orderTargets(o.filterTargetsToShow(o.data.targets.filter(e,o))),n=t.map(function(e){return e.id});return function(e,s){var d=r?o.getSubYScale(e.id):o.getYScale(e.id),l=d(0),g=l;return t.forEach(function(i){var t=o.isStepType(e)?o.convertValuesToStep(i.values):i.values,r=o.isTargetNormalized(e.id),p=t.map(function(e){return r?o.getRatio("index",e,!0):e.value});i.id===e.id||a[i.id]!==a[e.id]||n.indexOf(i.id)<n.indexOf(e.id)&&((Y(t[s])||+t[s].x!=+e.x)&&(s=-1,t.forEach(function(t,a){var i=t.x.constructor===Date?+t.x:t.x,r=e.x.constructor===Date?+e.x:e.x;i===r&&(s=a)})),s in t&&0<=t[s].value*e.value&&(g+=d(p[s])-l))}),g}},s.prototype.isWithinShape=function(e,t){var a=this,i=a.d3.select(e),r;return a.isTargetToShow(t.id)?"circle"===e.nodeName?r=a.isStepType(t)?a.isWithinStep(e,a.getYScale(t.id)(t.value)):a.isWithinCircle(e,1.5*a.pointSelectR(t)):"path"===e.nodeName&&(r=!i.classed(Q.bar)||a.isWithinBar(a.d3.mouse(e),e)):r=!1,r},s.prototype.getInterpolate=function(e){var t=this,a=t.d3,i={linear:a.curveLinear,"linear-closed":a.curveLinearClosed,basis:a.curveBasis,"basis-open":a.curveBasisOpen,"basis-closed":a.curveBasisClosed,bundle:a.curveBundle,cardinal:a.curveCardinal,"cardinal-open":a.curveCardinalOpen,"cardinal-closed":a.curveCardinalClosed,monotone:a.curveMonotoneX,step:a.curveStep,"step-before":a.curveStepBefore,"step-after":a.curveStepAfter},r;return r=t.isSplineType(e)?i[t.config.spline_interpolation_type]||i.cardinal:t.isStepType(e)?i[t.config.line_step_type]:i.linear,r},s.prototype.initLine=function(){var e=this;e.main.select("."+Q.chart).append("g").attr("class",Q.chartLines)},s.prototype.updateTargetsForLine=function(e){var a=this,t=a.config,i=a.classChartLine.bind(a),r=a.classLines.bind(a),o=a.classAreas.bind(a),n=a.classCircles.bind(a),s=a.classFocus.bind(a),d,l;d=a.main.select("."+Q.chartLines).selectAll("."+Q.chartLine).data(e).attr("class",function(e){return i(e)+s(e)}),l=d.enter().append("g").attr("class",i).style("opacity",0).style("pointer-events","none"),l.append("g").attr("class",r),l.append("g").attr("class",o),l.append("g").attr("class",function(e){return a.generateClass(Q.selectedCircles,e.id)}),l.append("g").attr("class",n).style("cursor",function(e){return t.data_selection_isselectable(e)?"pointer":null}),e.forEach(function(e){a.main.selectAll("."+Q.selectedCircles+a.getTargetSelectorSuffix(e.id)).selectAll("."+Q.selectedCircle).each(function(t){t.value=e.values[t.index].value})})},s.prototype.updateLine=function(e){var t=this,a=t.main.selectAll("."+Q.lines).selectAll("."+Q.line).data(t.lineData.bind(t)),i=a.enter().append("path").attr("class",t.classLine.bind(t)).style("stroke",t.color);t.mainLine=i.merge(a).style("opacity",t.initialOpacity.bind(t)).style("shape-rendering",function(e){return t.isStepType(e)?"crispEdges":""}).attr("transform",null),a.exit().transition().duration(e).style("opacity",0)},s.prototype.redrawLine=function(e,t,a){return[(t?this.mainLine.transition(a):this.mainLine).attr("d",e).style("stroke",this.color).style("opacity",1)]},s.prototype.generateDrawLine=function(e,t){var a=this,r=a.config,o=a.d3.line(),n=a.generateGetLinePoints(e,t),s=t?a.getSubYScale:a.getYScale,d=function(e){return(t?a.subxx:a.xx).call(a,e)},l=function(e,t){return 0<r.data_groups.length?n(e,t)[0][1]:s.call(a,e.id)(e.value)};return o=r.axis_rotated?o.x(l).y(d):o.x(d).y(l),r.line_connectNull||(o=o.defined(function(e){return null!=e.value})),function(e){var i=r.line_connectNull?a.filterRemoveNull(e.values):e.values,n=t?a.subX:a.x,d=s.call(a,e.id),l=0,g=0,p;return a.isLineType(e)?r.data_regions[e.id]?p=a.lineWithRegions(i,n,d,r.data_regions[e.id]):(a.isStepType(e)&&(i=a.convertValuesToStep(i)),p=o.curve(a.getInterpolate(e))(i)):(i[0]&&(l=n(i[0].x),g=d(i[0].value)),p=r.axis_rotated?"M "+g+" "+l:"M "+l+" "+g),p?p:"M 0 0"}},s.prototype.generateGetLinePoints=function(e,t){var a=this,r=a.config,o=e.__max__+1,n=a.getShapeX(0,o,e,!!t),s=a.getShapeY(!!t),l=a.getShapeOffset(a.isLineType,e,!!t),g=t?a.getSubYScale:a.getYScale;return function(e,t){var i=g.call(a,e.id)(0),o=l(e,t)||i,d=n(e),p=s(e);return r.axis_rotated&&(0<e.value&&p<i||0>e.value&&i<p)&&(p=i),[[d,p-(i-o)],[d,p-(i-o)],[d,p-(i-o)],[d,p-(i-o)]]}},s.prototype.lineWithRegions=function(e,t,a,r){function o(e,t){var a;for(a=0;a<t.length;a++)if(t[a].start<e&&e<=t[a].end)return!0;return!1}function n(e){return"M"+e[0][0]+" "+e[0][1]+" "+e[1][0]+" "+e[1][1]}var d=this,l=d.config,g="M",p=d.isCategorized()?.5:0,c=[],h,_,x,y,u,S,f,T,A,b,v,C;if(D(r))for(h=0;h<r.length;h++)c[h]={},c[h].start=Y(r[h].start)?e[0].x:d.isTimeSeries()?d.parseDate(r[h].start):r[h].start,c[h].end=Y(r[h].end)?e[e.length-1].x:d.isTimeSeries()?d.parseDate(r[h].end):r[h].end;for(v=l.axis_rotated?function(e){return a(e.value)}:function(e){return t(e.x)},C=l.axis_rotated?function(e){return t(e.x)}:function(e){return a(e.value)},x=d.isTimeSeries()?function(e,i,r,o){var s=e.x.getTime(),d=i.x-e.x,g=new Date(s+d*r),p=new Date(s+d*(r+o)),c;return c=l.axis_rotated?[[a(u(r)),t(g)],[a(u(r+o)),t(p)]]:[[t(g),a(u(r))],[t(p),a(u(r+o))]],n(c)}:function(e,i,r,o){var s;return s=l.axis_rotated?[[a(u(r),!0),t(y(r))],[a(u(r+o),!0),t(y(r+o))]]:[[t(y(r),!0),a(u(r))],[t(y(r+o),!0),a(u(r+o))]],n(s)},h=0;h<e.length;h++){if(Y(c)||!o(e[h].x,c))g+=" "+v(e[h])+" "+C(e[h]);else for(y=d.getScale(e[h-1].x+p,e[h].x+p,d.isTimeSeries()),u=d.getScale(e[h-1].value,e[h].value),S=t(e[h].x)-t(e[h-1].x),f=a(e[h].value)-a(e[h-1].value),T=m(P(S,2)+P(f,2)),A=2/T,b=2*A,_=A;1>=_;_+=b)g+=x(e[h-1],e[h],_,A);e[h].x}return g},s.prototype.updateArea=function(e){var t=this,a=t.d3,i=t.main.selectAll("."+Q.areas).selectAll("."+Q.area).data(t.lineData.bind(t)),r=i.enter().append("path").attr("class",t.classArea.bind(t)).style("fill",t.color).style("opacity",function(){return t.orgAreaOpacity=+a.select(this).style("opacity"),0});t.mainArea=r.merge(i).style("opacity",t.orgAreaOpacity),i.exit().transition().duration(e).style("opacity",0)},s.prototype.redrawArea=function(e,t,a){return[(t?this.mainArea.transition(a):this.mainArea).attr("d",e).style("fill",this.color).style("opacity",this.orgAreaOpacity)]},s.prototype.generateDrawArea=function(e,t){var a=this,r=a.config,o=a.d3.area(),n=a.generateGetAreaPoints(e,t),s=t?a.getSubYScale:a.getYScale,d=function(e){return(t?a.subxx:a.xx).call(a,e)},l=function(e,t){return 0<r.data_groups.length?n(e,t)[0][1]:s.call(a,e.id)(a.getAreaBaseValue(e.id))},g=function(e,t){return 0<r.data_groups.length?n(e,t)[1][1]:s.call(a,e.id)(e.value)};return o=r.axis_rotated?o.x0(l).x1(g).y(d):o.x(d).y0(r.area_above?0:l).y1(g),r.line_connectNull||(o=o.defined(function(e){return null!==e.value})),function(e){var t=r.line_connectNull?a.filterRemoveNull(e.values):e.values,i=0,n=0,s;return a.isAreaType(e)?(a.isStepType(e)&&(t=a.convertValuesToStep(t)),s=o.curve(a.getInterpolate(e))(t)):(t[0]&&(i=a.x(t[0].x),n=a.getYScale(e.id)(t[0].value)),s=r.axis_rotated?"M "+n+" "+i:"M "+i+" "+n),s?s:"M 0 0"}},s.prototype.getAreaBaseValue=function(){return 0},s.prototype.generateGetAreaPoints=function(e,t){var a=this,r=a.config,o=e.__max__+1,n=a.getShapeX(0,o,e,!!t),s=a.getShapeY(!!t),l=a.getShapeOffset(a.isAreaType,e,!!t),g=t?a.getSubYScale:a.getYScale;return function(e,t){var i=g.call(a,e.id)(0),o=l(e,t)||i,d=n(e),p=s(e);return r.axis_rotated&&(0<e.value&&p<i||0>e.value&&i<p)&&(p=i),[[d,o],[d,p-(i-o)],[d,p-(i-o)],[d,o]]}},s.prototype.updateCircle=function(e,t){var a=this,i=a.main.selectAll("."+Q.circles).selectAll("."+Q.circle).data(a.lineOrScatterOrStanfordData.bind(a)),r=i.enter().append("circle").attr("shape-rendering",a.isStanfordGraphType()?"crispEdges":"").attr("class",a.classCircle.bind(a)).attr("cx",e).attr("cy",t).attr("r",a.pointR.bind(a)).style("color",a.isStanfordGraphType()?a.getStanfordPointColor.bind(a):a.color);a.mainCircle=r.merge(i).style("opacity",a.isStanfordGraphType()?1:a.initialOpacityForCircle.bind(a)),i.exit().style("opacity",0)},s.prototype.redrawCircle=function(e,t,a,i){var r=this,o=r.main.selectAll("."+Q.selectedCircle);return[(a?r.mainCircle.transition(i):r.mainCircle).style("opacity",this.opacityForCircle.bind(r)).style("color",r.isStanfordGraphType()?r.getStanfordPointColor.bind(r):r.color).attr("cx",e).attr("cy",t),(a?o.transition(i):o).attr("cx",e).attr("cy",t)]},s.prototype.circleX=function(e){return e.x||0===e.x?this.x(e.x):null},s.prototype.updateCircleY=function(){var e=this,t,a;0<e.config.data_groups.length?(t=e.getShapeIndices(e.isLineType),a=e.generateGetLinePoints(t),e.circleY=function(e,t){return a(e,t)[0][1]}):e.circleY=function(t){return e.getYScale(t.id)(t.value)}},s.prototype.getCircles=function(e,t){var a=this;return(t?a.main.selectAll("."+Q.circles+a.getTargetSelectorSuffix(t)):a.main).selectAll("."+Q.circle+(M(e)?"-"+e:""))},s.prototype.expandCircles=function(e,t,a){var i=this,o=i.pointExpandedR.bind(i);a&&i.unexpandCircles(),i.getCircles(e,t).classed(Q.EXPANDED,!0).attr("r",o)},s.prototype.unexpandCircles=function(e){var t=this,a=t.pointR.bind(t);t.getCircles(e).filter(function(){return t.d3.select(this).classed(Q.EXPANDED)}).classed(Q.EXPANDED,!1).attr("r",a)},s.prototype.pointR=function(e){var t=this,a=t.config;return t.isStepType(e)?0:z(a.point_r)?a.point_r(e):a.point_r},s.prototype.pointExpandedR=function(e){var t=this,a=t.config;return a.point_focus_expand_enabled?z(a.point_focus_expand_r)?a.point_focus_expand_r(e):a.point_focus_expand_r?a.point_focus_expand_r:1.75*t.pointR(e):t.pointR(e)},s.prototype.pointSelectR=function(e){var t=this,a=t.config;return z(a.point_select_r)?a.point_select_r(e):a.point_select_r?a.point_select_r:4*t.pointR(e)},s.prototype.isWithinCircle=function(e,t){var a=this.d3,i=a.mouse(e),r=a.select(e),o=+r.attr("cx"),n=+r.attr("cy");return m(P(o-i[0],2)+P(n-i[1],2))<t},s.prototype.isWithinStep=function(e,t){return 30>_(t-this.d3.mouse(e)[1])},s.prototype.getCurrentWidth=function(){var e=this,t=e.config;return t.size_width?t.size_width:e.getParentWidth()},s.prototype.getCurrentHeight=function(){var e=this,t=e.config,a=t.size_height?t.size_height:e.getParentHeight();return 0<a?a:320/(e.hasType("gauge")&&!t.gauge_fullCircle?2:1)},s.prototype.getCurrentPaddingTop=function(){var e=this,t=e.config,a=M(t.padding_top)?t.padding_top:0;return e.title&&e.title.node()&&(a+=e.getTitlePadding()),a},s.prototype.getCurrentPaddingBottom=function(){var e=this.config;return M(e.padding_bottom)?e.padding_bottom:0},s.prototype.getCurrentPaddingLeft=function(e){var t=this,a=t.config;return M(a.padding_left)?a.padding_left:a.axis_rotated?!a.axis_x_show||a.axis_x_inner?1:A(w(t.getAxisWidthByAxisId("x",e)),40):!a.axis_y_show||a.axis_y_inner?t.axis.getYAxisLabelPosition().isOuter?30:1:w(t.getAxisWidthByAxisId("y",e))},s.prototype.getCurrentPaddingRight=function(){var e=this,t=e.config,a=0,i=e.isLegendRight?e.getLegendWidth()+20:0;return a=M(t.padding_right)?t.padding_right+1:t.axis_rotated?10+i:!t.axis_y2_show||t.axis_y2_inner?2+i+(e.axis.getY2AxisLabelPosition().isOuter?20:0):w(e.getAxisWidthByAxisId("y2"))+i,e.colorScale&&e.colorScale.node()&&(a+=e.getColorScalePadding()),a},s.prototype.getParentRectValue=function(t){for(var a=this.selectChart.node(),i;a&&"BODY"!==a.tagName;){try{i=a.getBoundingClientRect()[t]}catch(r){"width"===t&&(i=a.offsetWidth)}if(i)break;a=a.parentNode}return i},s.prototype.getParentWidth=function(){return this.getParentRectValue("width")},s.prototype.getParentHeight=function(){var e=this.selectChart.style("height");return 0<e.indexOf("px")?+e.replace("px",""):0},s.prototype.getSvgLeft=function(e){var t=this,a=t.config,i=a.axis_rotated||!a.axis_rotated&&!a.axis_y_inner,r=a.axis_rotated?Q.axisX:Q.axisY,o=t.main.select("."+r).node(),n=o&&i?o.getBoundingClientRect():{right:0},s=t.selectChart.node().getBoundingClientRect(),d=t.hasArcType(),l=n.right-s.left-(d?0:t.getCurrentPaddingLeft(e));return 0<l?l:0},s.prototype.getAxisWidthByAxisId=function(e,t){var a=this,i=a.axis.getLabelPositionById(e);return a.axis.getMaxTickWidth(e,t)+(i.isInner?20:40)},s.prototype.getHorizontalAxisHeight=function(e){var t=this,a=t.config,i=30;return"x"!==e||a.axis_x_show?"x"===e&&a.axis_x_height?a.axis_x_height:"y"!==e||a.axis_y_show?"y2"!==e||a.axis_y2_show?("x"===e&&!a.axis_rotated&&a.axis_x_tick_rotate&&(i=30+t.axis.getMaxTickWidth(e)*u(T*(90-_(a.axis_x_tick_rotate))/180)),"y"===e&&a.axis_rotated&&a.axis_y_tick_rotate&&(i=30+t.axis.getMaxTickWidth(e)*u(T*(90-_(a.axis_y_tick_rotate))/180)),i+(t.axis.getLabelPositionById(e).isInner?0:10)+("y2"===e?-10:0)):t.rotated_padding_top:!a.legend_show||t.isLegendRight||t.isLegendInset?1:10:8},s.prototype.initBrush=function(e){var t=this,a=t.d3;return t.brush=(t.config.axis_rotated?a.brushY():a.brushX()).on("brush",function(){var e=a.event.sourceEvent;e&&"zoom"===e.type||t.redrawForBrush()}).on("end",function(){var e=a.event.sourceEvent;e&&"zoom"===e.type||t.brush.empty()&&e&&"end"!==e.type&&t.brush.clear()}),t.brush.updateExtent=function(){var e=this.scale.range(),a;return a=t.config.axis_rotated?[[0,e[0]],[t.width2,e[1]]]:[[e[0],0],[e[1],t.height2]],this.extent(a),this},t.brush.updateScale=function(e){return this.scale=e,this},t.brush.update=function(e){this.updateScale(e||t.subX).updateExtent(),t.context.select("."+Q.brush).call(this)},t.brush.clear=function(){t.context.select("."+Q.brush).call(t.brush.move,null)},t.brush.selection=function(){return a.brushSelection(t.context.select("."+Q.brush).node())},t.brush.selectionAsValue=function(e,a){var i,r;return e?(t.context&&(i=[this.scale(e[0]),this.scale(e[1])],r=t.context.select("."+Q.brush),a&&(r=r.transition()),t.brush.move(r,i)),[]):(i=t.brush.selection()||[0,0],[this.scale.invert(i[0]),this.scale.invert(i[1])])},t.brush.empty=function(){var e=t.brush.selection();return!e||e[0]===e[1]},t.brush.updateScale(e)},s.prototype.initSubchart=function(){var e=this,t=e.config,a=e.context=e.svg.append("g").attr("transform",e.getTranslate("context")),i=t.subchart_show?"visible":"hidden";a.style("visibility",i),a.append("g").attr("clip-path",e.clipPathForSubchart).attr("class",Q.chart),a.select("."+Q.chart).append("g").attr("class",Q.chartBars),a.select("."+Q.chart).append("g").attr("class",Q.chartLines),a.append("g").attr("clip-path",e.clipPath).attr("class",Q.brush),e.axes.subx=a.append("g").attr("class",Q.axisX).attr("transform",e.getTranslate("subx")).attr("clip-path",t.axis_rotated?"":e.clipPathForXAxis)},s.prototype.initSubchartBrush=function(){var e=this;e.initBrush(e.subX).updateExtent(),e.context.select("."+Q.brush).call(e.brush)},s.prototype.updateTargetsForSubchart=function(e){var t=this,a=t.context,i=t.config,r=t.classChartBar.bind(t),o=t.classBars.bind(t),n=t.classChartLine.bind(t),s=t.classLines.bind(t),d=t.classAreas.bind(t),l,g,p,c;i.subchart_show&&(c=a.select("."+Q.chartBars).selectAll("."+Q.chartBar).data(e),p=c.enter().append("g").style("opacity",0),p.merge(c).attr("class",r),p.append("g").attr("class",o),g=a.select("."+Q.chartLines).selectAll("."+Q.chartLine).data(e),l=g.enter().append("g").style("opacity",0),l.merge(g).attr("class",n),l.append("g").attr("class",s),l.append("g").attr("class",d),a.selectAll("."+Q.brush+" rect").attr(i.axis_rotated?"width":"height",i.axis_rotated?t.width2:t.height2))},s.prototype.updateBarForSubchart=function(e){var t=this,a=t.context.selectAll("."+Q.bars).selectAll("."+Q.bar).data(t.barData.bind(t)),i=a.enter().append("path").attr("class",t.classBar.bind(t)).style("stroke","none").style("fill",t.color);a.exit().transition().duration(e).style("opacity",0).remove(),t.contextBar=i.merge(a).style("opacity",t.initialOpacity.bind(t))},s.prototype.redrawBarForSubchart=function(e,t,a){(t?this.contextBar.transition(Math.random().toString()).duration(a):this.contextBar).attr("d",e).style("opacity",1)},s.prototype.updateLineForSubchart=function(e){var t=this,a=t.context.selectAll("."+Q.lines).selectAll("."+Q.line).data(t.lineData.bind(t)),i=a.enter().append("path").attr("class",t.classLine.bind(t)).style("stroke",t.color);a.exit().transition().duration(e).style("opacity",0).remove(),t.contextLine=i.merge(a).style("opacity",t.initialOpacity.bind(t))},s.prototype.redrawLineForSubchart=function(e,t,a){(t?this.contextLine.transition(Math.random().toString()).duration(a):this.contextLine).attr("d",e).style("opacity",1)},s.prototype.updateAreaForSubchart=function(e){var t=this,a=t.d3,i=t.context.selectAll("."+Q.areas).selectAll("."+Q.area).data(t.lineData.bind(t)),r=i.enter().append("path").attr("class",t.classArea.bind(t)).style("fill",t.color).style("opacity",function(){return t.orgAreaOpacity=+a.select(this).style("opacity"),0});i.exit().transition().duration(e).style("opacity",0).remove(),t.contextArea=r.merge(i).style("opacity",0)},s.prototype.redrawAreaForSubchart=function(e,t,a){(t?this.contextArea.transition(Math.random().toString()).duration(a):this.contextArea).attr("d",e).style("fill",this.color).style("opacity",this.orgAreaOpacity)},s.prototype.redrawSubchart=function(e,t,a,i,r,o,n){var s=this,d=s.d3,l=s.config,g,p,c;s.context.style("visibility",l.subchart_show?"visible":"hidden"),l.subchart_show&&(d.event&&"zoom"===d.event.type&&s.brush.selectionAsValue(s.x.orgDomain()),e&&(!s.brush.empty()&&s.brush.selectionAsValue(s.x.orgDomain()),g=s.generateDrawArea(r,!0),p=s.generateDrawBar(o,!0),c=s.generateDrawLine(n,!0),s.updateBarForSubchart(a),s.updateLineForSubchart(a),s.updateAreaForSubchart(a),s.redrawBarForSubchart(p,a,a),s.redrawLineForSubchart(c,a,a),s.redrawAreaForSubchart(g,a,a)))},s.prototype.redrawForBrush=function(){var e=this,t=e.x,a=e.d3,i;e.redraw({withTransition:!1,withY:e.config.zoom_rescale,withSubchart:!1,withUpdateXDomain:!0,withEventRect:!1,withDimension:!1}),i=a.event.selection||e.brush.scale.range(),e.main.select("."+Q.eventRect).call(e.zoom.transform,a.zoomIdentity.scale(e.width/(i[1]-i[0])).translate(-i[0],0)),e.config.subchart_onbrush.call(e.api,t.orgDomain())},s.prototype.transformContext=function(e,t){var a=this,i;t&&t.axisSubX?i=t.axisSubX:(i=a.context.select("."+Q.axisX),e&&(i=i.transition())),a.context.attr("transform",a.getTranslate("context")),i.attr("transform",a.getTranslate("subx"))},s.prototype.getDefaultSelection=function(){var e=this,t=e.config,a=z(t.axis_x_selection)?t.axis_x_selection(e.getXDomain(e.data.targets)):t.axis_x_selection;return e.isTimeSeries()&&(a=[e.parseDate(a[0]),e.parseDate(a[1])]),a},s.prototype.initText=function(){var e=this;e.main.select("."+Q.chart).append("g").attr("class",Q.chartTexts),e.mainText=e.d3.selectAll([])},s.prototype.updateTargetsForText=function(e){var t=this,a=t.classChartText.bind(t),i=t.classTexts.bind(t),r=t.classFocus.bind(t),o=t.main.select("."+Q.chartTexts).selectAll("."+Q.chartText).data(e),n=o.enter().append("g").attr("class",a).style("opacity",0).style("pointer-events","none");n.append("g").attr("class",i),n.merge(o).attr("class",function(e){return a(e)+r(e)})},s.prototype.updateText=function(e,t,a){var r=this,i=r.config,o=r.barOrLineData.bind(r),n=r.classText.bind(r),s=r.main.selectAll("."+Q.texts).selectAll("."+Q.text).data(o),d=s.enter().append("text").attr("class",n).attr("text-anchor",function(e){return i.axis_rotated?0>e.value?"end":"start":"middle"}).style("stroke","none").attr("x",e).attr("y",t).style("fill",function(e){return r.color(e)}).style("fill-opacity",0);r.mainText=d.merge(s).text(function(e,t,a){return r.dataLabelFormat(e.id)(e.value,e.id,t,a)}),s.exit().transition().duration(a).style("fill-opacity",0).remove()},s.prototype.redrawText=function(e,t,a,i,r){return[(i?this.mainText.transition(r):this.mainText).attr("x",e).attr("y",t).style("fill",this.color).style("fill-opacity",a?0:this.opacityForText.bind(this))]},s.prototype.getTextRect=function(e,t,a){var i=this.d3.select("body").append("div").classed("c3",!0),r=i.append("svg").style("visibility","hidden").style("position","fixed").style("top",0).style("left",0),o=this.d3.select(a).style("font"),n;return r.selectAll(".dummy").data([e]).enter().append("text").classed(t?t:"",!0).style("font",o).text(e).each(function(){n=k(this)}),i.remove(),n},s.prototype.generateXYForText=function(e,t,a,i){var r=this,o=r.generateGetAreaPoints(e,!1),n=r.generateGetBarPoints(t,!1),s=r.generateGetLinePoints(a,!1),l=i?r.getXForText:r.getYForText;return function(e,t){var a=r.isAreaType(e)?o:r.isBarType(e)?n:s;return l.call(r,a(e,t),e,this)}},s.prototype.getXForText=function(e,t,a){var i=this,r=k(a),o,n;return i.config.axis_rotated?(n=i.isBarType(t)?4:6,o=e[2][1]+n*(0>t.value?-1:1)):o=i.hasType("bar")?(e[2][0]+e[0][0])/2:e[0][0],null===t.value&&(o>i.width?o=i.width-r.width:0>o&&(o=4)),o},s.prototype.getYForText=function(e,t,a){var i=this,r=k(a),o;return i.config.axis_rotated?o=(e[0][0]+e[2][0]+.6*r.height)/2:(o=e[2][1],0>t.value||0===t.value&&!i.hasPositiveValue?(o+=r.height,i.isBarType(t)&&i.isSafari()?o-=3:!i.isBarType(t)&&i.isChrome()&&(o+=3)):o+=i.isBarType(t)?-3:-6),null!==t.value||i.config.axis_rotated||(o<r.height?o=r.height:o>this.height&&(o=this.height-4)),o},s.prototype.initTitle=function(){var e=this;e.title=e.svg.append("text").text(e.config.title_text).attr("class",e.CLASS.title)},s.prototype.redrawTitle=function(){var e=this;e.title.attr("x",e.xForTitle.bind(e)).attr("y",e.yForTitle.bind(e))},s.prototype.xForTitle=function(){var e=this,t=e.config,a=t.title_position||"left",i;return i=0<=a.indexOf("right")?e.currentWidth-e.getTextRect(e.title.node().textContent,e.CLASS.title,e.title.node()).width-t.title_padding.right:0<=a.indexOf("center")?A((e.currentWidth-e.getTextRect(e.title.node().textContent,e.CLASS.title,e.title.node()).width)/2,0):t.title_padding.left,i},s.prototype.yForTitle=function(){var e=this;return e.config.title_padding.top+e.getTextRect(e.title.node().textContent,e.CLASS.title,e.title.node()).height},s.prototype.getTitlePadding=function(){var e=this;return e.yForTitle()+e.config.title_padding.bottom},s.prototype.drawColorScale=function(){var e=this,t=e.d3,a=e.config,i=e.data.targets[0],r,o,n,s,d,l,c,h;if(r=isNaN(a.stanford_scaleWidth)?20:a.stanford_scaleWidth,o=5,0>o||0>r)throw Error("Colorscale's barheight and barwidth must be greater than 0.");h=e.height-a.stanford_padding.bottom-a.stanford_padding.top,s=t.range(a.stanford_padding.bottom,h,o),c=t.scaleSequential(i.colors).domain([s[s.length-1],s[0]]),e.colorScale&&e.colorScale.remove(),e.colorScale=e.svg.append("g").attr("width",50).attr("height",h).attr("class",Q.colorScale),e.colorScale.append("g").attr("transform","translate(0, ".concat(a.stanford_padding.top,")")).selectAll("bars").data(s).enter().append("rect").attr("y",function(e,t){return t*o}).attr("x",0).attr("width",r).attr("height",o).attr("fill",function(e){return c(e)}),l=t.scaleLog().domain([i.minEpochs,i.maxEpochs]).range([s[0]+a.stanford_padding.top+s[s.length-1]+o-1,s[0]+a.stanford_padding.top]),d=t.axisRight(l),"pow10"===a.stanford_scaleFormat?d.tickValues([1,10,100,1e3,1e4,1e5,1e6,1e7]):z(a.stanford_scaleFormat)?d.tickFormat(a.stanford_scaleFormat):d.tickFormat(t.format("d")),z(a.stanford_scaleValues)&&d.tickValues(a.stanford_scaleValues(i.minEpochs,i.maxEpochs)),n=e.colorScale.append("g").attr("class","legend axis").attr("transform","translate(".concat(r,",0)")).call(d),"pow10"===a.stanford_scaleFormat&&n.selectAll(".tick text").text(null).filter(g).text(10).append("tspan").attr("dy","-.7em").text(function(e){return p(V(e)/L)}),e.colorScale.attr("transform","translate(".concat(e.currentWidth-e.xForColorScale(),", 0)"))},s.prototype.xForColorScale=function(){var e=this;return e.config.stanford_padding.right+k(e.colorScale.node()).width},s.prototype.getColorScalePadding=function(){var e=this;return e.xForColorScale()+e.config.stanford_padding.left+20},s.prototype.isStanfordGraphType=function(){var e=this;return"stanford"===e.config.data_type},s.prototype.initStanfordData=function(){var e=this,t=e.d3,a=e.config,i=e.data.targets[0],r,o,n;if(i.values.sort(x),r=i.values.map(function(e){return e.epochs}),n=isNaN(a.stanford_scaleMin)?t.min(r):a.stanford_scaleMin,o=isNaN(a.stanford_scaleMax)?t.max(r):a.stanford_scaleMax,n>o)throw Error("Number of minEpochs has to be smaller than maxEpochs");i.colors=z(a.stanford_colors)?a.stanford_colors:t.interpolateHslLong(t.hsl(250,1,.5),t.hsl(0,1,.5)),i.colorscale=t.scaleSequentialLog(i.colors).domain([n,o]),i.minEpochs=n,i.maxEpochs=o},s.prototype.getStanfordPointColor=function(e){var t=this,a=t.data.targets[0];return a.colorscale(e.epochs)},s.prototype.getCentroid=function(e){var t=c(e),a=0,r=0,o,n,s,d,l;for(o=0,n=e.length-1;o<e.length;n=o,o+=1)d=e[o],l=e[n],s=d.x*l.y-l.x*d.y,a+=(d.x+l.x)*s,r+=(d.y+l.y)*s;return s=6*t,{x:a/s,y:r/s}},s.prototype.getStanfordTooltipTitle=function(e){var t=this,a=t.axis.getLabelText("x"),i=t.axis.getLabelText("y");return"\n      <tr><th>".concat(a?U(a):"x","</th><th class='value'>").concat(e.x,"</th></tr>\n      <tr><th>").concat(i?U(i):"y","</th><th class='value'>").concat(e.value,"</th></tr>\n    ")},s.prototype.countEpochsInRegion=function(e){var t=this,a=t.data.targets[0],i,r;return i=a.values.reduce(function(e,t){return e+ +t.epochs},0),r=a.values.reduce(function(t,a){return h(a,e)?t+ +a.epochs:t},0),{value:r,percentage:0===r?0:(100*(r/i)).toFixed(1)}};var c=function(e){var t=0,a,r,o,n;for(a=0,r=e.length-1;a<e.length;r=a,a+=1)o=e[a],n=e[r],t+=o.x*n.y,t-=o.y*n.x;return t/=2,t},h=function(e,t){for(var a=e.x,r=e.value,o=!1,n=0,s=t.length-1,d,l,g,p,c;n<t.length;s=n++)d=t[n].x,l=t[n].y,p=t[s].x,g=t[s].y,c=l>r!=g>r&&a<(p-d)*(r-l)/(g-l)+d,c&&(o=!o);return o},x=function(e,t){return e.epochs<t.epochs?-1:e.epochs>t.epochs?1:0};return s.prototype.initStanfordElements=function(){var e=this;e.stanfordElements=e.main.select("."+Q.chart).append("g").attr("class",Q.stanfordElements),e.stanfordElements.append("g").attr("class",Q.stanfordLines),e.stanfordElements.append("g").attr("class",Q.stanfordTexts),e.stanfordElements.append("g").attr("class",Q.stanfordRegions)},s.prototype.updateStanfordElements=function(e){var t=this,a=t.main,i=t.config,r=t.xvCustom.bind(t),o=t.yvCustom.bind(t),n=t.countEpochsInRegion.bind(t),s,d,l,g,p,c;s=a.select("."+Q.stanfordLines).style("shape-rendering","geometricprecision").selectAll("."+Q.stanfordLine).data(i.stanford_lines),d=s.enter().append("g").attr("class",function(e){return Q.stanfordLine+(e["class"]?" "+e["class"]:"")}),d.append("line").attr("x1",function(e){return i.axis_rotated?o(e,"value_y1"):r(e,"value_x1")}).attr("x2",function(e){return i.axis_rotated?o(e,"value_y2"):r(e,"value_x2")}).attr("y1",function(e){return i.axis_rotated?r(e,"value_x1"):o(e,"value_y1")}).attr("y2",function(e){return i.axis_rotated?r(e,"value_x2"):o(e,"value_y2")}).style("opacity",0),t.stanfordLines=d.merge(s),t.stanfordLines.select("line").transition().duration(e).attr("x1",function(e){return i.axis_rotated?o(e,"value_y1"):r(e,"value_x1")}).attr("x2",function(e){return i.axis_rotated?o(e,"value_y2"):r(e,"value_x2")}).attr("y1",function(e){return i.axis_rotated?r(e,"value_x1"):o(e,"value_y1")}).attr("y2",function(e){return i.axis_rotated?r(e,"value_x2"):o(e,"value_y2")}).style("opacity",1),s.exit().transition().duration(e).style("opacity",0).remove(),p=a.select("."+Q.stanfordTexts).selectAll("."+Q.stanfordText).data(i.stanford_texts),c=p.enter().append("g").attr("class",function(e){return Q.stanfordText+(e["class"]?" "+e["class"]:"")}),c.append("text").attr("x",function(e){return i.axis_rotated?o(e,"y"):r(e,"x")}).attr("y",function(e){return i.axis_rotated?r(e,"x"):o(e,"y")}).style("opacity",0),t.stanfordTexts=c.merge(p),t.stanfordTexts.select("text").transition().duration(e).attr("x",function(e){return i.axis_rotated?o(e,"y"):r(e,"x")}).attr("y",function(e){return i.axis_rotated?r(e,"x"):o(e,"y")}).text(function(e){return e.content}).style("opacity",1),p.exit().transition().duration(e).style("opacity",0).remove(),l=a.select("."+Q.stanfordRegions).selectAll("."+Q.stanfordRegion).data(i.stanford_regions),g=l.enter().append("g").attr("class",function(e){return Q.stanfordRegion+(e["class"]?" "+e["class"]:"")}),g.append("polygon").attr("points",function(e){return e.points.map(function(e){return[i.axis_rotated?o(e,"y"):r(e,"x"),i.axis_rotated?r(e,"x"):o(e,"y")].join(",")}).join(" ")}).style("opacity",0),g.append("text").attr("x",function(e){return t.getCentroid(e.points).x}).attr("y",function(e){return t.getCentroid(e.points).y}).style("opacity",0),t.stanfordRegions=g.merge(l),t.stanfordRegions.select("polygon").transition().duration(e).attr("points",function(e){return e.points.map(function(e){return[i.axis_rotated?o(e,"y"):r(e,"x"),i.axis_rotated?r(e,"x"):o(e,"y")].join(",")}).join(" ")}).style("opacity",function(e){return e.opacity?e.opacity:.2}),t.stanfordRegions.select("text").transition().duration(e).attr("x",function(e){return i.axis_rotated?o(t.getCentroid(e.points),"y"):r(t.getCentroid(e.points),"x")}).attr("y",function(e){return i.axis_rotated?r(t.getCentroid(e.points),"x"):o(t.getCentroid(e.points),"y")}).text(function(e){if(e.text){var a,i,r;return t.isStanfordGraphType()&&(r=n(e.points),a=r.value,i=r.percentage),e.text(a,i)}return""}).attr("text-anchor","middle").attr("dominant-baseline","middle").style("opacity",1),l.exit().transition().duration(e).style("opacity",0).remove()},s.prototype.initTooltip=function(){var e=this,t=e.config,a;if(e.tooltip=e.selectChart.style("position","relative").append("div").attr("class",Q.tooltipContainer).style("position","absolute").style("pointer-events","none").style("display","none"),t.tooltip_init_show){if(e.isTimeSeries()&&B(t.tooltip_init_x)){for(t.tooltip_init_x=e.parseDate(t.tooltip_init_x),a=0;a<e.data.targets[0].values.length&&0!=e.data.targets[0].values[a].x-t.tooltip_init_x;a++);t.tooltip_init_x=a}e.tooltip.html(t.tooltip_contents.call(e,e.data.targets.map(function(a){return e.addName(a.values[t.tooltip_init_x])}),e.axis.getXAxisTickFormat(),e.getYFormat(e.hasArcType()),e.color)),e.tooltip.style("top",t.tooltip_init_position.top).style("left",t.tooltip_init_position.left).style("display","block")}},s.prototype.getTooltipSortFunction=function(){var e=this,t=e.config;if(0===t.data_groups.length||void 0!==t.tooltip_order){var i=t.tooltip_order;void 0===i&&(i=t.data_order);var r=function(e){return e?e.value:null};if(B(i)&&"asc"===i.toLowerCase())return function(e,t){return r(e)-r(t)};if(B(i)&&"desc"===i.toLowerCase())return function(e,t){return r(t)-r(e)};if(z(i)){var o=i;return void 0===t.tooltip_order&&(o=function(e,t){return i(e?{id:e.id,values:[e]}:null,t?{id:t.id,values:[t]}:null)}),o}if(F(i))return function(e,t){return i.indexOf(e.id)-i.indexOf(t.id)}}else{var n=e.orderTargets(e.data.targets).map(function(e){return e.id});return(e.isOrderAsc()||e.isOrderDesc())&&(n=n.reverse()),function(e,t){return n.indexOf(e.id)-n.indexOf(t.id)}}},s.prototype.getTooltipContent=function(e,t,a,r){var o=this,n=o.config,s=n.tooltip_format_title||t,d=n.tooltip_format_name||function(e){return e},l=n.tooltip_format_value,g,p,c,h,_,x;l||(l=o.isTargetNormalized(e.id)?function(e,t){return"".concat((100*t).toFixed(2),"%")}:a);var y=this.getTooltipSortFunction();for(y&&e.sort(y),p=0;p<e.length;p++)if(e[p]&&(e[p].value||0===e[p].value)){if(o.isStanfordGraphType())g||(c=o.getStanfordTooltipTitle(e[p]),g="<table class='"+o.CLASS.tooltip+"'>"+c),x=o.getStanfordPointColor(e[p]),_=U(n.data_epochs),h=e[p].epochs;else if(g||(c=U(s?s(e[p].x,e[p].index):e[p].x),g="<table class='"+o.CLASS.tooltip+"'>"+(c||0===c?"<tr><th colspan='2'>"+c+"</th></tr>":"")),h=U(l(e[p].value,e[p].ratio,e[p].id,e[p].index,e)),void 0!==h){if(null===e[p].name)continue;_=U(d(e[p].name,e[p].ratio,e[p].id,e[p].index)),x=o.levelColor?o.levelColor(e[p].value):r(e[p].id)}void 0!==h&&(g+="<tr class='"+o.CLASS.tooltipName+"-"+o.getTargetSelectorSuffix(e[p].id)+"'>",g+="<td class='name'><span style='background-color:"+x+"'></span>"+_+"</td>",g+="<td class='value'>"+h+"</td>",g+="</tr>")}return g+"</table>"},s.prototype.tooltipPosition=function(e,t,a,i){var r=this,o=r.config,n=r.d3,s=r.hasArcType(),d=n.mouse(i),l,g,p,c,h;return s?(g=(r.width-(r.isLegendRight?r.getLegendWidth():0))/2+d[0],c=(r.hasType("gauge")?r.height:r.height/2)+d[1]+20):(l=r.getSvgLeft(!0),o.axis_rotated?(g=l+d[0]+100,p=g+t,h=r.currentWidth-r.getCurrentPaddingRight(),c=r.x(e[0].x)+20):(g=l+r.getCurrentPaddingLeft(!0)+r.x(e[0].x)+20,p=g+t,h=l+r.currentWidth-r.getCurrentPaddingRight(),c=d[1]+15),p>h&&(g-=p-h+20),c+a>r.currentHeight&&(c-=a+30)),0>c&&(c=0),{top:c,left:g}},s.prototype.showTooltip=function(e,t){var a=this,i=a.config,r=a.hasArcType(),o=e.filter(function(e){return e&&M(e.value)}),n=i.tooltip_position||s.prototype.tooltipPosition,d,l,g;0!==o.length&&i.tooltip_show&&(a.tooltip.html(i.tooltip_contents.call(a,e,a.axis.getXAxisTickFormat(),a.getYFormat(r),a.color)).style("display","block"),d=a.tooltip.property("offsetWidth"),l=a.tooltip.property("offsetHeight"),g=n.call(this,o,d,l,t),a.tooltip.style("top",g.top+"px").style("left",g.left+"px"))},s.prototype.hideTooltip=function(){this.tooltip.style("display","none")},s.prototype.setTargetType=function(e,t){var a=this,i=a.config;a.mapToTargetIds(e).forEach(function(e){a.withoutFadeIn[e]=t===i.data_types[e],i.data_types[e]=t}),e||(i.data_type=t)},s.prototype.hasType=function(e,t){var a=this,i=a.config.data_types,r=!1;return t=t||a.data.targets,t&&t.length?t.forEach(function(a){var o=i[a.id];(o&&0<=o.indexOf(e)||!o&&"line"===e)&&(r=!0)}):Object.keys(i).length?Object.keys(i).forEach(function(t){i[t]===e&&(r=!0)}):r=a.config.data_type===e,r},s.prototype.hasArcType=function(e){return this.hasType("pie",e)||this.hasType("donut",e)||this.hasType("gauge",e)},s.prototype.isLineType=function(e){var t=this.config,a=B(e)?e:e.id;return!t.data_types[a]||0<=["line","spline","area","area-spline","step","area-step"].indexOf(t.data_types[a])},s.prototype.isStepType=function(e){var t=B(e)?e:e.id;return 0<=["step","area-step"].indexOf(this.config.data_types[t])},s.prototype.isSplineType=function(e){var t=B(e)?e:e.id;return 0<=["spline","area-spline"].indexOf(this.config.data_types[t])},s.prototype.isAreaType=function(e){var t=B(e)?e:e.id;return 0<=["area","area-spline","area-step"].indexOf(this.config.data_types[t])},s.prototype.isBarType=function(e){var t=B(e)?e:e.id;return"bar"===this.config.data_types[t]},s.prototype.isScatterType=function(e){var t=B(e)?e:e.id;return"scatter"===this.config.data_types[t]},s.prototype.isStanfordType=function(e){var t=B(e)?e:e.id;return"stanford"===this.config.data_types[t]},s.prototype.isScatterOrStanfordType=function(e){return this.isScatterType(e)||this.isStanfordType(e)},s.prototype.isPieType=function(e){var t=B(e)?e:e.id;return"pie"===this.config.data_types[t]},s.prototype.isGaugeType=function(e){var t=B(e)?e:e.id;return"gauge"===this.config.data_types[t]},s.prototype.isDonutType=function(e){var t=B(e)?e:e.id;return"donut"===this.config.data_types[t]},s.prototype.isArcType=function(e){return this.isPieType(e)||this.isDonutType(e)||this.isGaugeType(e)},s.prototype.lineData=function(e){return this.isLineType(e)?[e]:[]},s.prototype.arcData=function(e){return this.isArcType(e.data)?[e]:[]},s.prototype.barData=function(e){return this.isBarType(e)?e.values:[]},s.prototype.lineOrScatterOrStanfordData=function(e){return this.isLineType(e)||this.isScatterType(e)||this.isStanfordType(e)?e.values:[]},s.prototype.barOrLineData=function(e){return this.isBarType(e)||this.isLineType(e)?e.values:[]},s.prototype.isSafari=function(){var e=window.navigator.userAgent;return 0<=e.indexOf("Safari")&&0>e.indexOf("Chrome")},s.prototype.isChrome=function(){var e=window.navigator.userAgent;return 0<=e.indexOf("Chrome")},s.prototype.initZoom=function(){var t=this,a=t.d3,i=t.config,r;return t.zoom=a.zoom().on("start",function(){if("scroll"===i.zoom_type){var o=a.event.sourceEvent;o&&"brush"===o.type||(r=o,i.zoom_onzoomstart.call(t.api,o))}}).on("zoom",function(){if("scroll"===i.zoom_type){var r=a.event.sourceEvent;r&&"brush"===r.type||(t.redrawForZoom(),i.zoom_onzoom.call(t.api,t.x.orgDomain()))}}).on("end",function(){if("scroll"===i.zoom_type){var o=a.event.sourceEvent;o&&"brush"===o.type||o&&r.clientX===o.clientX&&r.clientY===o.clientY||i.zoom_onzoomend.call(t.api,t.x.orgDomain())}}),t.zoom.updateDomain=function(){return a.event&&a.event.transform&&t.x.domain(a.event.transform.rescaleX(t.subX).domain()),this},t.zoom.updateExtent=function(){return this.scaleExtent([1,1/0]).translateExtent([[0,0],[t.width,t.height]]).extent([[0,0],[t.width,t.height]]),this},t.zoom.update=function(){return this.updateExtent().updateDomain()},t.zoom.updateExtent()},s.prototype.zoomTransform=function(e){var t=this,a=[t.x(e[0]),t.x(e[1])];return t.d3.zoomIdentity.scale(t.width/(a[1]-a[0])).translate(-a[0],0)},s.prototype.initDragZoom=function(){var e=this,t=e.d3,a=e.config,i=e.context=e.svg,r=e.margin.left+20.5,o=e.margin.top+.5;if("drag"===a.zoom_type&&a.zoom_enabled){var n=function(t){return t&&t.map(function(t){return e.x.invert(t)})},s=e.dragZoomBrush=t.brushX().on("start",function(){e.api.unzoom(),e.svg.select("."+Q.dragZoom).classed("disabled",!1),a.zoom_onzoomstart.call(e.api,t.event.sourceEvent)}).on("brush",function(){a.zoom_onzoom.call(e.api,n(t.event.selection))}).on("end",function(){if(null!=t.event.selection){var i=n(t.event.selection);a.zoom_disableDefaultBehavior||e.api.zoom(i),e.svg.select("."+Q.dragZoom).classed("disabled",!0),a.zoom_onzoomend.call(e.api,i)}});i.append("g").classed(Q.dragZoom,!0).attr("clip-path",e.clipPath).attr("transform","translate("+r+","+o+")").call(s)}},s.prototype.getZoomDomain=function(){var e=this,t=e.config,a=e.d3,i=a.min([e.orgXDomain[0],t.zoom_x_min]),r=a.max([e.orgXDomain[1],t.zoom_x_max]);return[i,r]},s.prototype.redrawForZoom=function(){var e=this,t=e.d3,a=e.config,i=e.zoom,r=e.x;a.zoom_enabled&&0!==e.filterTargetsToShow(e.data.targets).length&&(i.update(),a.zoom_disableDefaultBehavior||(e.isCategorized()&&r.orgDomain()[0]===e.orgXDomain[0]&&r.domain([e.orgXDomain[0]-1e-10,r.orgDomain()[1]]),e.redraw({withTransition:!1,withY:a.zoom_rescale,withSubchart:!1,withEventRect:!1,withDimension:!1}),t.event.sourceEvent&&"mousemove"===t.event.sourceEvent.type&&(e.cancelClick=!0)))},Z});