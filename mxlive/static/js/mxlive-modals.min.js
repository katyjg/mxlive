(function(a){a.fn.shake=function(b){let c=a.extend({interval:100,distance:5,times:4},b);a(this).css("position","relative");for(let d=0;d<c.times+1;d++)a(this).animate({left:0==d%2?c.distance:-1*c.distance},c.interval);a(this).animate({left:0},c.interval,function(){})}})(jQuery),function(a){a.fn.asyncForm=function(b){let c=a(this),d={url:a(this).data("form-action"),setup:function(b){b.find(".select").select2({theme:"bootstrap4"}),b.find("select[data-update-on]").each(function(){let b=a("[name=\""+a(this).data("update-on")+"\"]"),c=a(this),d=c.find("option:selected").val(),e=c.data("update-url");b.change(function(){if(b.val()){let f=e.replace(/\d+/,b.val());a.ajax({url:f,dataType:"json",success:function(b){c.empty(),a.each(b,function(b,e){c.append(a("<option>",{value:e[0],text:e[1],selected:d===e[0]}))}),c.trigger("change.select2")}})}})})},complete:function(a){a.url?a.modal?c.load(a.url):window.location.replace(a.url):window.location.reload()}},e=a.extend(d,b);a.ajax({type:"GET",url:e.url,success:function(a){c.html(a),e.setup(c),c.find(".modal").modal({backdrop:"static"}),c.find(".modal").on("hidden.bs.modal",function(){c.empty()})}}),c.off("click",":submit"),c.on("click",":submit",function(b){let d=c.find("form");if(b.preventDefault(),b.stopPropagation(),!d[0].checkValidity())return void d[0].reportValidity();let f=a(this);f.html("<i class=\"ti ti-reload spin\"></i>"),d.ajaxSubmit({type:"post",url:d.attr("action"),data:{submit:f.attr("value")},beforeSend:function(b){b.setRequestHeader("X-CSRFToken",a.cookie("csrftoken"))},success:function(b,d,f){let g=f.getResponseHeader("content-type")||"";if(/html/.test(g)){let d=a(b),f=c.find(".modal-content"),g=d.find(".modal-content");f.length&&g.length?(f.html(g.html()),e.setup(c)):(c.html(b),e.setup(c),c.find(".modal").modal({backdrop:"static"}))}else /json/.test(g)?(c.find(".modal").modal("hide").data("bs.modal",null),e.complete(b)):c.find(".modal").modal("hide").data("bs.modal",null)},error:function(){f.shake(),f.html("<i class=\"ti ti-alert\"></i>")}})})}}(jQuery),function(a){a.fn.loadModal=function(b){let c=a(this);a.ajax({type:"GET",url:b,success:function(a){c.html(a),c.find(".modal").modal({backdrop:"static"}),c.find(".modal").on("hidden.bs.modal",function(){c.empty()})}})}}(jQuery);function slugify(a){let b="";var c=$.trim(a);return b=c.replace(/[^a-z0-9-_]/gi,"-").replace(/-+/g,"-").replace(/^-|-$/g,""),b}function strip(a){return a.replace(/^\s*|\s*$/g,"")}