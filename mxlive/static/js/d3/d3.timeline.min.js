(function(){d3.timeline=function(){function a(b,c){if(!Array.isArray(b)&&Array.isArray(t(b))){var d={id:0,level:0};for(var e in b)b.hasOwnProperty(e)&&(d[e]=b[e]);return d.id=0,d.level=0,d.values=[],v=d,a(t(b),d),d.start=d3.min(d.values,function(a){return a.start}),d.end=d3.max(d.values,function(a){return a.end}),void h.push(d)}b.forEach(function(b){var d={level:0,id:u};for(var e in void 0!==c&&(d.parent=c),u++,b)b.hasOwnProperty(e)&&(d[e]=b[e]);Array.isArray(t(b))?(a(t(b),d),d.start=d3.min(d.values,function(a){return a.start}),d.end=d3.max(d.values,function(a){return a.end})):(d.start=g(i(b)),d.end=g(j(b))),d.lane=0,h.push(d),c&&(!c.values&&(c.values=[]),c.values.push(d)),void 0===c&&v.values.push(d)})}function b(){if(!1===r){var a=d3.min(h,function(a){return a.start}),b=d3.max(h,function(a){return a.end});l=[a,b]}else l=[g(m[0]),g(m[1])];n.domain(l).range([0,k[0]]),h.forEach(function(a){a.originalStart=a.start,a.originalEnd=a.end,a.start=n(a.start),a.end=n(a.end)})}function c(a,b){if(a.end<b.start||a.start>b.end)return!0;var c=a.filter(function(a){return a.start<=b.end&&a.end>=b.start});return 0===c.length}function d(a){var b=o.root;if(a.parent&&(b=o[a.parent.id]),void 0===b)return o[a.parent.id]=[[a]],b=o[a.parent.id],void p++;for(var d=b.length-1,e=0;e<=d;){if(c(b[e],a))return void b[e].push(a);e++}b[e]=[a]}function e(c){if(!arguments.length)return e;for(var g in v={id:"root",values:[]},h=[],o={root:[]},a(c),b(c),h.forEach(function(a){d(a)}),o)o[g].forEach(function(a,b){var c=Math.min,d=k[1]/o[g].length;d=c(d,s),a.forEach(function(a){a.y=b*d+q/2,a.dy=d-q,a.lane=b,a.dyp=1/o[g].length})});return v.values.forEach(f),h.sort(function(c,a){return c.level>a.level?1:c.level<a.level?-1:1}),h}function f(a){var b=Math.max;if(!a.parent)a.level=0;else{a.level=a.parent.level+1;var c=a.dyp*a.parent.dy;a.y=a.parent.y+a.lane*c+q/2,a.dy=b(1,c-q)}a.values&&a.values.forEach(f)}var g=function(a){return new Date(a)},h=[],i=function(a){return a.start},j=function(a){return a.end},k=[500,100],l=[-Infinity,1/0],m=[],n=d3.scaleLinear(),o={root:[]},p=1,q=0,r=!1,s=1/0,t=function(){return null},u=1,v={id:"root",values:[]};return e.childAccessor=function(a){return arguments.length?(t=a,e):t},e.dateFormat=function(a){return arguments.length?(g=a,e):g},e.bandStart=function(a){return arguments.length?(i=a,e):i},e.bandEnd=function(a){return arguments.length?(j=a,e):j},e.size=function(a){return arguments.length?(k=a,e):k},e.padding=function(a){return arguments.length?(q=a,e):q},e.extent=function(a){return arguments.length?(r=!0,m=a,0===a.length&&(r=!1),e):l},e.maxBandHeight=function(a){return arguments.length?(s=a,e):s},e}})();