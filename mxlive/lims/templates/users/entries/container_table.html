{% load markup %}

<div class="inline-list {{object.json_dict.type|lower}}-detail">
    <h3>Samples in {{object.json_dict.type|title}} &ldquo;{{object.name}}&rdquo;</h3>
    <table cellspacing="0" cellpadding="2" border="0" width="100%" id="sample-list-table">
        <thead>
            <tr class="header">
             	<th>Location</th>
                <th>Crystal</th>
                <th>Experiment</th>
                <th>Comments</th>
                {% if not admin %}{% if object.is_editable %}<th></th>{% endif %}{% endif %}
            </tr>
        </thead>
        <tbody>
        {% ifnotequal object.num_samples 0 %}
            {% ifequal object.json_dict.type "Cane" %}{% for loc, crystal in object.location_and_crystal reversed %}
                {% if crystal %}
                    <tr class="{% cycle 'odd' 'even'%}">
                        <td>{{ loc }}</td>
                        <td><a href="{% url "crystal-detail" crystal.pk %}">{{ crystal.name }}</a></td>
                        {% if crystal.experiment %}
                        <td><a href="{% url "group-detail" crystal.experiment.pk %}">{{ crystal.experiment.name }}</a></td>
                        {% else %}
                        <td>(None)</td>
                        {% endif %}
                        <td class="redirect limit"
                            href="{% url "crystal-detail" crystal.pk %}">{{ crystal.comments|default:"" }}</td>
                        <td>{% comment %}
                            {% if not admin %}{% if object.is_editable %}
                                <a class="remove"
                                   rel="{% url "container-remove-crystal" object.pk crystal.pk %}"
                                   href="#"
                                   onclick="remove_item(this);"
                                   title="Remove crystal from container"><span class="remove"></span></a>
                            {% endif %}{% endif %}{% endcomment %}
                        </td>
                    </tr>
                {% endif %}
            {% endfor %}

            {% else %}{% for loc, crystal in object.location_and_crystal %}
                {% if crystal %}
                    <tr class="{% cycle 'odd' 'even'%}">
                        <td>{{ loc }}</td>
                        <td><a href="{% url "crystal-detail" crystal.pk %}">{{ crystal.name }}</a></td>
                        {% if crystal.experiment %}
                        <td><a href="{% url "group-detail" crystal.experiment.pk %}">{{ crystal.experiment.name }}</a></td>
                        {% else %}
                        <td>(None)</td>
                        {% endif %}
                        <td class="redirect"
                            href="{% url "crystal-detail" crystal.pk %}">{{ crystal.comments|default:"" }}</td>
                        <td>{% comment %}
                            {% if not admin %}{% if object.is_editable %}
                                <a class="remove"
                                   rel="{% url "container-remove-crystal" object.pk crystal.pk %}"
                                   href="#"
                                   onclick="remove_item(this);"
                                   title="Remove crystal from container"><span class="remove"></span></a>
                            {% endif %}{% endif %}{% endcomment %}
                        </td>
                    </tr>
                {% endif %}
            {% endfor %}
            {% endifequal %}
        {% else %}                
                <tr><td colspan="20" align="center" class="list-empty">(No crystals in this container)</td></tr>
        {% endifnotequal %}           
        </tbody>
    </table>
</div>

