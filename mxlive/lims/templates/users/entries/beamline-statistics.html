{% extends "users/base.html" %}

{% load static %}
{% load icons %}

{% block page_heading %}
    <h3 class="text-condensed">
        <strong class="text-muted"> {{ beamline }}</strong> | {{ view.page_title }}
    </h3>
    <span class="text-muted">
        {{ object.name }}
    </span>
{% endblock %}

{% block object_tools %}
    {% now "Y" as yr %}
    <a href="{% url "yearly-usage" object.pk %}">
        {% show_icon label='Usage' icon='ti ti-md ti-stats-up' %}
    </a>
{% endblock %}

{% block object_status %}
    <div class="status-bar hidden-print">
        <div class="row">
            <h4 class="col my-0 p-2">
                <a href="{% url "yearly-statistics" object.pk %}"><span
                        class="badge badge-{% if year %}info{% else %}primary{% endif %}">Yearly</span></a>&nbsp;
                {% for yr in years %}
                    <a href="{% url "monthly-statistics" object.pk yr %}"><span
                            class="badge badge-{% if yr == year %}primary{% else %}info{% endif %}">{{ yr }}</span></a>
                {% endfor %}

            </h4>
        </div>
    </div>
{% endblock %}

{% block extra_css %}
    <link href="{% static "css/c3.min.css" %}" rel="stylesheet">
    <link href="{% static "css/reports.min.css" %}" rel="stylesheet">
{% endblock %}

{% block full %}
    <div class="row">
        <div id="data-stats" class="col-12"></div>
    </div>
{% endblock %}

{% block extra_js %}
    <script type="text/javascript" src="{% static "js/d3/d3.v5.min.js" %}"></script>
    <script type="text/javascript" src="{% static "js/d3/d3.legend.js" %}"></script>
    <script type="text/javascript" src="{% static "js/misc/showdown.min.js" %}"></script>
    <script type="text/javascript" src="{% static "js/misc/c3.min.js" %}"></script>
    <script type="text/javascript" src="{% static "js/mxlive-report.min.js" %}"></script>
    <script type="text/javascript">
        var report = {{ report | safe }}
        $(document).ready(function(){
            $('#data-stats').liveReport({
                data: report
            })
        });
    </script>
{% endblock %}