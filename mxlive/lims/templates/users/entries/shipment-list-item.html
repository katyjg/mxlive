{% load icons %}
<div class="list-group-item list-group-item-{% if shipment.status == shipment.STATES.ON_SITE %}primary{% elif shipment.status == shipment.STATES.DRAFT %}warning{% elif shipment.status == shipment.STATES.SENT %}success{% elif shipment.status == shipment.STATES.RETURNED and not user.is_superuser %}empty{% else %}default{% endif %}">
    <div class="row">
        <div class="col">
            <div class="tools-box float-right">
            {% if shipment.status >= shipment.STATES.ON_SITE %}
                <a  href="{% url "shipment-reports" shipment.pk %}" title="Go to Reports from this shipment">
                    {% show_icon label='Reports' badge=stats.reports icon='ti ti-1x ti-bar-chart-alt' color='info' %}
                </a>
                <a  href="{% url "shipment-data" shipment.pk %}" title="Go to Data from this shipment">
                    {% show_icon label='Data' badge=stats.data icon='ti ti-1x ti-layout-grid3' color='info' %}
                </a>
            {% endif %}
                <a class="separator"></a>
            {% if user.is_superuser and shipment.status <= shipment.STATES.ON_SITE and shipment.status >= shipment.STATES.SENT %}
                {% if shipment.status == shipment.STATES.ON_SITE %}
                    <a  data-link="{% url "shipment-return" shipment.pk %}" title="Return shipment">
                        {% show_icon label='Return' icon='ti ti-1x ti-location-arrow' %}
                    </a>
                {% else %}
                    <a  data-link="{% url "shipment-receive" shipment.pk %}" title="Receive shipment">
                        {% show_icon label='Receive' icon='ti ti-1x ti-shopping-cart-full' %}
                    </a>
                {% endif %}
            {% endif %}
            </div>
            <div class="box-status">
                <div class="text-center">
                    <div title="{% if shipment.status == shipment.STATES.ON_SITE %}On-site with location: {{ shipment.storage_location }}
                                {% elif shipment.status == shipment.STATES.SENT %}Sent on {{ shipment.date_shipped }}
                                {% elif shipment.status == shipment.STATES.RETURNED %}Returned on {{ shipment.date_returned }}{% endif %}"
                         class="{% if shipment.status == shipment.STATES.DRAFT %}ti ti-1x ti-clipboard
                                         {% elif shipment.status == shipment.STATES.SENT %}ti ti-1x ti-truck text-dark
                                         {% elif shipment.status == shipment.STATES.ON_SITE %}ti ti-1x ti-location-pin text-success
                                         {% elif shipment.status == shipment.STATES.RETURNED %}ti ti-1x ti-truck text-success
                                         {% elif shipment.status == shipment.STATES.ARCHIVED %}ti ti-1x ti-archive{% endif %}"></div>
                    <div><small>{% if shipment.status == shipment.STATES.DRAFT %}DRAFT
                                {% elif shipment.status == shipment.STATES.SENT %}{{ shipment.date_shipped|date:"M d"|upper }}
                                {% elif shipment.status == shipment.STATES.ON_SITE %}{{ shipment.date_received|date:"M d"|upper }}
                                {% elif shipment.status >= shipment.STATES.RETURNED %}{{ shipment.date_returned|date:"M d"|upper }}{% endif %}</small></div>
                </div>
            </div>
            <div class="box-info text-muted">
                <h5 class="text-condensed narrow-heading overflow ellipsis"><a class="text-muted" href="{% url "shipment-detail" shipment.pk %}" title='View Shipment "{{ shipment.name }}"'>
                    <strong>{% if user.is_superuser %}{{ shipment.project.name|upper }}{% else %}{{ shipment.identity }}{% endif %}</strong> |
                    {{ shipment.name }}
                </a></h5>
                <span class="overflow ellipsis">
                    <strong>{{ stats.containers }}</strong> Container{{ stats.containers|pluralize }} /
                    <strong>{{ stats.groups }}</strong> Group{{ stats.groups|pluralize }} /
                    <strong>{{ stats.samples }}</strong> Sample{{ stats.samples|pluralize }}</span>
            </div>
        </div>
    </div>
</div>