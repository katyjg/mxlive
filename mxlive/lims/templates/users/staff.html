{% extends "users/base.html" %}
{% load static %}
{% load link_list %}
{% load icons %}

{% block page_heading %}
    <h3 class="overflow ellipsis narrow-heading text-condensed"> <span class="text-muted">{{ user.username|upper }} |</span> Staff </h3>
    <span class="text-muted text-condensed hidden-xs">Start here to manage shipments, load containers on a beamline, view data, and more.</span>
{% endblock %}

{% block pre_js %}
    <script type="text/javascript" src="{% static "js/d3.min.js" %}"></script>
{% endblock %}

{% block object_tools %}
    <div class="tools-box">
        <a  href="{% url "access-list" %}">
            {% show_icon label="Remote" icon="ti ti-1x ti-rss-alt" %}
        </a>
        <a  href="{% url "session-list" %}">
            {% show_icon label="Sessions" icon="ti ti-1x ti-time" %}
        </a>
        <a  href="{% url "user-list" %}">
            {% show_icon label="Accounts" icon="ti ti-1x ti-user" %}
        </a>
        <div class="separator"></div>
        <a href="#!"  data-link="{% url "new-announcement" %}" title="Create Announcement">
            {% show_icon label="Add Info" icon="ti ti-1x ti-announcement" %}
        </a>
    </div>
{% endblock %}

{% block full %}
    <div class="row">
        <div class="col-12 col-sm-6 col-md-3">
            <div class="card mb-4">
                <div class="card-header"><h5 class="text-center text-wide text-muted m-0">BEAMLINES</h5></div>
                <div class="list-group list-group-flush list-group-hover">
                {% for am in automounters %}
                    <a href="{% url "beamline-detail" pk=am.beamline.pk %}" class="text-center list-group-item" style="overflow: auto;">
                            <div id="layout-{{ am.container.pk }}" class="layout-lg">
                                <h5 class="text-condensed">
                                    <strong><span class="text-muted">{{ am.beamline.acronym }}</span></strong> | {{ am.container.kind }}
                                </h5>
                                <hr/>
                            </div>
                            {% include "users/entries/container-layout.html" with container=am.container %}
                            {#% include "users/entries/layout-container.html" with object=am.container.pk kind=am.container.kind brief=True %#}
                    </a>
                {% endfor %}
                </div>
            </div>
            <div class="card mb-4">
                <div class="card-header"><h5 class="text-center text-wide text-muted m-0">ADAPTORS</h5></div>
                <div class="card-body">
                <div class="row">
                {% for container in containers %}
                {% include "users/entries/container-item.html" %}
                {% endfor %}
                </div>
                </div>
            </div>

        </div>
        <div class="col-12 col-sm-6">
            <div class="card mb-4">
                <div class="card-header"><h5 class="text-center text-wide text-muted m-0">SHIPMENTS</h5></div>
                <div class="list-group list-group-flush">
                    {% for shipment, stats in shipments %}
                        {% include "users/entries/shipment-list-item.html" %}
                    {% endfor %}
                    <div class="list-group-item empty">
                        <div class="row">
                        <div class="col">
                        <a href="#!" data-url="{% url "shipment-new" %}">

                            <div class="box-status pull-left">
                                <div class="text-center text-muted">
                                    <div title="Create a Shipment" class="ti ti-2 ti-plus"></div>
                                    <div><small>Start Now</small></div>
                                </div>
                            </div>
                            <div class="box-info">
                                <h4 class="text-condensed narrow-heading overflow ellipsis">Click here to start a new shipment!</h4>
                                <span class="overflow ellipsis">Follow the steps to enter your sample information</span>
                            </div>
                        </a>
                        </div>
                        </div>
                    </div>
                </div>
            </div>
            <div class="card mb-4">
                <div class="card-header"><h5 class="text-center text-wide text-muted m-0">ACTIVE SESSIONS</h5></div>
                <div class="list-group list-group-flush">
                {% for session, stats in sessions %}
                    {% include "users/entries/session-list-item.html" %}
                {% empty %}
                    <div class="list-group-item empty">
                        No active sessions at the moment.
                    </div>
                {% endfor %}
                </div>
            </div>
        </div>

        <div class="col-12 col-sm-3">
            {% load_announcements %}
        </div>
    </div>
{% endblock %}