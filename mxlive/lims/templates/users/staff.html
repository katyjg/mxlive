{% extends "users/base.html" %}
{% load link_list %}


{% block page_heading %}
    <h3 class="overflow ellipsis narrow-heading text-condensed"> <span class="text-muted">{{ user.username.upper }} |</span> Staff Portal</h3>
    <span class="text-muted text-condensed hidden-xs">Start here to manage shipments, load containers on a beamline, view data, and more.</span>
{% endblock %}

{% block object_tools %}
    <span class="box-tools pull-right">
        <a href="#!" class="pull-right" data-link="{% url "new-announcement" %}" title="Create Announcement">
            <i class="ti ti-1x ti-announcement"></i>
            <br/>
            <div class="tool-label">Add Info</div>
        </a>
    </span>
    <span class="box-tools pull-right">
        <a class="pull-right" href="{% url "session-list" %}">
            <i class="ti ti-1x ti-time"></i>
            <br/>
            <div class="tool-label">Sessions</div>
        </a>
        <a class="pull-right" href="{% url "user-list" %}">
            <i class="ti ti-1x ti-user"></i>
            <br/>
            <div class="tool-label">Accounts</div>
        </a>
        <a class="pull-right" href="{% url "access-list" %}">
            <i class="ti ti-1x ti-rss-alt"></i>
            <br/>
            <div class="tool-label">Remote</div>
        </a>
    </span>
{% endblock %}

{% block full %}
    <div class="row">
        <div class="col-xs-12 col-sm-6 col-md-3">
            <div class="list-group mb-4">
                <h5 class="list-group-item list-group-item-secondary text-center text-wide text-muted">BEAMLINES</h5>
                {% for am in automounters %}
                    <a href="{% url "beamline-detail" pk=am.beamline.pk %}" class="text-center list-group-item" style="overflow: auto;">
                        <div class="col-xs-12">
                            <div id="layout-{{ am.container.pk }}" class="layout-lg">
                                <h5 class="text-condensed">
                                    <strong><span class="text-muted">{{ am.beamline.acronym }}</span></strong> | {{ am.container.kind }}
                                </h5>
                                <hr/>
                            </div>
                            {#% include "users/entries/layout-container.html" with container=am.container brief=True %#}
                            {% include "users/entries/layout-container.html" with object=am.container.pk kind=am.container.kind brief=True %}
                        </div>
                    </a>
                {% endfor %}
            </div>
            <div class="list-group mb-4">
                <h5 class="list-group-item list-group-item-secondary text-center text-wide text-muted">ADAPTORS</h5>
                <div class="list-group-item">
                <div class="row">
                {% for container in containers %}
                {% include "users/entries/container-item.html" %}
                {% endfor %}
                </div>
                </div>
            </div>

        </div>
        <div class="col-xs-12 col-sm-6">
            <div class="list-group mb-4">
                <h5 class="list-group-item list-group-item-secondary text-center text-wide text-muted">SHIPMENTS</h5>
                {% for object in shipments %}
                    {% include "users/entries/shipment-list-item.html" with object=object %}
                {% endfor %}
                <div class="list-group-item empty">
                    <div class="row">
                    <div class="col">
                    <a href="#!" data-url="{% url "shipment-new" %}">

                        <div class="box-status pull-left">
                            <div class="text-center text-muted">
                                <div title="Create a Shipment" class="ti ti-2 ti-plus"></div>
                                <div><small>Start Now</small></div>
                            </div>
                        </div>
                        <div class="box-info">
                            <h4 class="text-condensed narrow-heading overflow ellipsis">Click here to start a new shipment!</h4>
                            <span class="overflow ellipsis">Follow the steps to enter your sample information</span>
                        </div>
                    </a>
                    </div>
                    </div>
                </div>
            </div>
            <div class="list-group mb-4">
                <h5 class="list-group-item list-group-item-secondary text-center text-wide text-muted">ACTIVE SESSIONS</h5>
                {% for session in sessions %}
                    {% include "users/entries/session-list-item.html" with session=session %}
                {% empty %}
                    <div class="list-group-item empty">
                        No active sessions at the moment.
                    </div>
                {% endfor %}
            </div>
        </div>

        <div class="col-xs-12 col-sm-3">
            {% load_announcements %}
        </div>
    </div>
{% endblock %}