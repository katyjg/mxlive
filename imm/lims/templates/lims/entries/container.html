{% extends "base.html" %}

{% load humanize %}

{% block headline %}
<h2>{{object.name}} ({{object.identity}})</h2>
{% endblock %}

{% block object-tools %}
<div class="object-tools">
    {% include "lims/tools.html" %}
    <ul class="toolbar">
        <li class="back-tool">
            <a href="{% url lims-container-list %}">Full List</a>
        </li>
    </ul>
</div>
{% endblock %}

{% block content %}

{% comment %}
<table class="entrysummary left" cellpadding="2" cellspacing="0" border="0" width="60%">
    <tr valign="top"><th>Type:</th><td>{{object.get_kind_display}}</td></tr>
    <tr valign="top"><th>Capacity:</th><td>{{object.capacity}}</td></tr>
    <tr valign="top"><th>Created:</th><td>{{object.created|naturalday}} at {{object.created|date:"H:i T"}}</td></tr>
    <tr valign="top"><th>Modified:</th><td>{{object.modified|naturalday}} at {{object.modified|date:"H:i T"}}</td></tr>
    <tr valign="top"><th>Status:</th><td>{{object.get_status_display}}</td></tr>
    <tr valign="top"><th>Completed:</th><td>{% if object.is_completed %}Yes{% else %} No {% endif %}</td></tr>
</table>

<img src="/img/container-{{object.get_kind_display|lower}}.png" style="float:right;clear: right; margin: 0.5em; padding-right: 2em; "/>

{% for loc, crystal in object.location_and_crystal %}
    {% if crystal %}
    <li class="crystal draggable-link-parent">
        <a href="{% url lims-crystal-detail crystal.id %}">{{ loc }} - {{ crystal.name }} ({{ crystal.identity }})</a>
    </li>
    {% else %}
    <li class="container droppable droppable-add" 
        accept="crystal" 
        parent="{{ object.id }}"
        rel="{% url lims-container-detail object.id %}"
        container_location="{{ loc }}">{{ loc }}</li>
    {% endif %}
{% endfor %}
{% endcomment %}

<!--img src="/img/container-{{object.get_kind_display|lower}}.png" style="clear: right; margin: 0.5em; padding-right: 2em; "/-->

{% ifequal object.json_dict.type "Cane" %}
    {% include "lims/entries/cane.html" %}
{% endifequal %}{% ifequal object.json_dict.type "Cassette" %}
    {% include "lims/entries/cassette.html" %}
{% endifequal %}{% ifequal object.json_dict.type "Uni-Puck" %}
        {% include "lims/entries/unipuck.html" %}
{% endifequal %}

<div id="add-crystal" class="hidden modal-content"></div>

{% include "lims/entries/popup.html" %}
{% endblock %}

{% block sidebar %}
	{% if not user.is_superuser %}
		<!--div id="crystals" class="widget droppable droppable-remove parent-stop" accept="crystal" data="{% url lims-crystal-container-list %}"-->
		<div id="crystals" class="widget droppable-remove parent-stop" data="{% url lims-crystal-container-list %}">
		    <h3>Crystals</h3>
		    <ul>
		        <li><a href="#">Content Not Loaded.</a></li>
		    </ul>
		    <a href="{% url lims-crystal-new %}" class="action add modal" rel="#add-crystal">add crystal</a>
		</div>
    {% endif %}
    {{ block.super }}
{% endblock %}

{% block script %}
{{ block.super }}
<script>
		function remove_item(element) {
			jQuery.ajax({
                type: "POST",
                url: element.rel,
                data: "",
                success: function() {
                    window.location.reload();
                }
            });
        }
</script>
{% endblock %}
