{% extends "base.html" %}
 
{% load humanize %}

{% block headline %}
<h2>{{object.name}} ({{object.identity}})</h2>
{% endblock %}

{% block object-tools %}
<div class="object-tools">
    {% include "lims/tools.html" %}
    <ul class="tools">
        <li>
            <a class="back-tool" href="{% url lims-experiment-list %}">Back to Full List</a>
        </li>
    </ul>
</div>
{% endblock %}

{% block content %}

{% comment %}
{% if request.user.is_superuser %}
    <span onclick="load_page('entry-scratchpad', '../{{object.id}}/edit/', '');" class="edit-tool">Edit</span>
{% endif %}
{% if not request.user.is_superuser %}
    <span onclick="linkto('../new/?clone={{object.id}}');" class="clone-tool">Clone</span>
    {% if object.is_editable %}
        <span onclick="load_page('entry-scratchpad', '../{{object.id}}/edit/', '');" class="edit-tool">Edit</span>
    {% endif %}
    {% if object.is_deletable %}
        <span onclick="load_page('entry-scratchpad', '../{{object.id}}/delete/', '');" class="delete-tool">Delete</span>
    {% endif %}
{% endif %}
{% endcomment %}

{% with object as dewar %}
    {% comment %}
    <table class="entrysummary" cellpadding="2" cellspacing="0" border="0" width="60%">
        <tr valign="top">
            <th>Created:</th>
            <td>{{dewar.created|naturalday}} at {{dewar.created|date:"H:i T"}}</td>
        </tr>
        <tr valign="top">
            <th>Modified:</th>
            <td>{{dewar.modified|naturalday}} at {{dewar.modified|date:"H:i T"}}</td>
        </tr>
        <tr valign="top">
            <th>Status:</th>
            <td>{{dewar.get_status_display}}</td>
        </tr>
        {% ifequal dewar.status dewar.STATES.ON_SITE %}
            <tr valign="top">
                <th>Location:</th>
                <td>{{dewar.storage_location|default:"Unknown"}}</td>
            </tr>
        {% endifequal %}
    </table>
    {% endcomment %}
    {% if dewar.container_set.count %}
        {% for container in dewar.container_set.all %}
            <li id="{{ container.id }}" class="container draggable-link-parent parent-stop ui-draggable" 
                rel="{% url lims-container-detail container.id %}">
                <a href="{% url lims-container-detail container.id %}">{{ container.label }} ({{ container.identity }})</a>
            </li>
        {% endfor %}
    {% else %}
        (No containers are assigned to this Dewar).
    {% endif %}

{% endwith %}

{% comment %}
{% include "lims/entries/dewar_contents.html" %}
{% include "lims/entries/dewar_treeview.html" %}
{% endcomment %}

<div id="add-container" class="hidden modal-content"></div>

{% include "lims/entries/popup.html" %}

{% endblock %}

{% block sidebar %}
    {% if not request.user.is_superuser %} {# We don't want these to show on the staff side #}
        <div id="containers" class="widget droppable droppable-remove parent-stop" accept="container" data="{% url lims-container-basic-list %}?dewar__isnull=True">
            <h3>Containers</h3>
            <ul>
                <li><a href="#">Content Not Loaded.</a></li>
            </ul>
            <a href="{% url lims-container-new %}" class="action add modal" rel="#add-container">add container</a>
        </div>
    {% endif %}
    {{ block.super }}
{% endblock %}
