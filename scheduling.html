

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>Scheduling &mdash; MxLIVE 2020.05.262 documentation</title>
  

  
  
  
  

  
  <script type="text/javascript" src="_static/js/modernizr.min.js"></script>
  
    
      <script type="text/javascript" id="documentation_options" data-url_root="./" src="_static/documentation_options.js"></script>
        <script type="text/javascript" src="_static/jquery.js"></script>
        <script type="text/javascript" src="_static/underscore.js"></script>
        <script type="text/javascript" src="_static/doctools.js"></script>
        <script type="text/javascript" src="_static/language_data.js"></script>
        <script async="async" type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/latest.js?config=TeX-AMS-MML_HTMLorMML"></script>
    
    <script type="text/javascript" src="_static/js/theme.js"></script>

    

  
  <link rel="stylesheet" href="_static/styles.css" type="text/css" />
  <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="next" title="Publications" href="publications.html" />
    <link rel="prev" title="Managing Shipments" href="staff-shipments.html" /> 
</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">
    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
          

          
            <a href="index.html" class="icon icon-home"> MxLIVE
          

          
          </a>

          
            
            
              <div class="version">
                2020.05.262
              </div>
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <p class="caption"><span class="caption-text">For MX Users:</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="dashboard.html">On the Dashboard</a></li>
<li class="toctree-l1"><a class="reference internal" href="shipping.html">Shipments</a></li>
<li class="toctree-l1"><a class="reference internal" href="sessions.html">Sessions</a></li>
<li class="toctree-l1"><a class="reference internal" href="data.html">Datasets &amp; Reports</a></li>
</ul>
<p class="caption"><span class="caption-text">For Beamline Staff:</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="starting.html">Getting Started</a></li>
<li class="toctree-l1"><a class="reference internal" href="staff-dashboard.html">Dashboard</a></li>
<li class="toctree-l1"><a class="reference internal" href="staff-dashboard.html#remote-connections">Remote Connections</a></li>
<li class="toctree-l1"><a class="reference internal" href="staff-dashboard.html#accounts">Accounts</a></li>
<li class="toctree-l1"><a class="reference internal" href="staff-dashboard.html#detailed-lists">Detailed Lists</a></li>
<li class="toctree-l1"><a class="reference internal" href="staff-beamlines.html">Beamlines and Automounters</a></li>
<li class="toctree-l1"><a class="reference internal" href="staff-shipments.html">Managing Shipments</a></li>
<li class="toctree-l1 current"><a class="current reference internal" href="#">Scheduling</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#facility-modes">Facility Modes</a></li>
<li class="toctree-l2"><a class="reference internal" href="#access-types">Access Types</a></li>
<li class="toctree-l2"><a class="reference internal" href="#beamtime">Beamtime</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#email-notifications">Email Notifications</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#downtime">Downtime</a></li>
<li class="toctree-l2"><a class="reference internal" href="#user-support">User Support</a></li>
<li class="toctree-l2"><a class="reference internal" href="#public-schedule">Public Schedule</a></li>
<li class="toctree-l2"><a class="reference internal" href="#statistics">Statistics</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="publications.html">Publications</a></li>
</ul>
<p class="caption"><span class="caption-text">For Developers:</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="apis.html">Application Program Interfaces</a></li>
<li class="toctree-l1"><a class="reference internal" href="reportsv2.html">Formatting Reports</a></li>
<li class="toctree-l1"><a class="reference internal" href="data-types.html">Data Types</a></li>
<li class="toctree-l1"><a class="reference internal" href="layouts.html">Container Types</a></li>
<li class="toctree-l1"><a class="reference internal" href="models.html">Models</a></li>
<li class="toctree-l1"><a class="reference internal" href="views.html">Ajax Views</a></li>
</ul>

            
          
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="index.html">MxLIVE</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="index.html">Docs</a> &raquo;</li>
        
      <li>Scheduling</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
            
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="scheduling">
<h1>Scheduling<a class="headerlink" href="#scheduling" title="Permalink to this headline">¶</a></h1>
<p>To enable the optional scheduling app in MxLIVE, make sure the following line is included in your <cite>settings.py</cite> file:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">LIMS_USE_SCHEDULE</span> <span class="o">=</span> <span class="kc">True</span>
</pre></div>
</div>
<p>By default, <code class="docutils literal notranslate"><span class="pre">HOURS_PER_SHIFT</span></code> is 8 (three shifts per day), but can be any factor of 24.</p>
<img alt="Staff Scheduling View" class="align-center" src="_images/schedule-staff-labelled.png" />
<div class="section" id="facility-modes">
<h2>Facility Modes<a class="headerlink" href="#facility-modes" title="Permalink to this headline">¶</a></h2>
<p>Facility modes are fetched on-the-fly from an API providing a JSON response. These modes are used for colour-coded
display on the MxLIVE schedule. Specify the location of the API in your <cite>settings.py</cite> file.:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">FACILITY_MODES</span> <span class="o">=</span> <span class="s2">&quot;https://external.site.com/api/schedule/modes/&quot;</span>
</pre></div>
</div>
<p>The response should be formatted in the following way, containing these fields at a minimum:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="p">[</span>
    <span class="p">{</span>
        <span class="s2">&quot;start&quot;</span><span class="p">:</span> <span class="s2">&quot;2020-05-24T14:00:00Z&quot;</span><span class="p">,</span>
        <span class="s2">&quot;end&quot;</span><span class="p">:</span> <span class="s2">&quot;2020-05-25T06:00:00Z&quot;</span><span class="p">,</span>
        <span class="s2">&quot;kind&quot;</span><span class="p">:</span> <span class="s2">&quot;D&quot;</span><span class="p">,</span>
    <span class="p">},</span> <span class="o">...</span>
<span class="p">]</span>
</pre></div>
</div>
<p>The “kind” value for each mode is used as a CSS class which is used to display background colours on the schedule. The
colours by default are tailored to the modes provided by the USO at the Canadian Light Source, but can be tailored to
any facility by editing Facility Modes through the Django administration site.</p>
<img alt="Facility Mode" class="align-center" src="_images/facility-modes.png" />
<p>The <strong>kind</strong> can be an individual value, or a comma-separated list. These are the CSS classes that will be applied to
shifts on the schedule to set the background color to <strong>Color</strong>. The <strong>description</strong> is used to build a legend at the
bottom of the schedule.</p>
</div>
<div class="section" id="access-types">
<h2>Access Types<a class="headerlink" href="#access-types" title="Permalink to this headline">¶</a></h2>
<p>Access Types are defined through the Django administration site. The details provided in the form of Access Types
informs the colour codes assigned to beamtime, and the template used to generate email notifications. Access Types are
also used for beamline statistics.</p>
<img alt="Access Type" class="align-center" src="_images/access-type.png" />
<p>For custom emails, the <strong>email subject</strong> and <strong>email body</strong> are strings formatted with the following information:</p>
<blockquote>
<div><ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">{name}</span></code> = The account’s <strong>Contact Person</strong> or <strong>First Name</strong> <strong>Last Name</strong> (if no contact person is listed)</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">{beamline}</span></code> = The scheduled beamline’s acronym</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">{start_date}</span></code> = The start date of the beamtime</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">{start_time}</span></code> = The starting time of the first shift of the beamtime</p></li>
</ul>
</div></blockquote>
</div>
<div class="section" id="beamtime">
<h2>Beamtime<a class="headerlink" href="#beamtime" title="Permalink to this headline">¶</a></h2>
<p>Beamtime is assigned to an account in MxLIVE. To schedule beamtime:</p>
<ol class="arabic simple">
<li><p>Select an unassigned shift as the first shift of the beamtime,</p></li>
<li><p>Select the final shift of the beamtime,</p></li>
<li><p>Complete and submit the form.</p></li>
</ol>
<img alt="Scheduling Beamtime" class="align-center" src="_images/schedule-beamtime.png" />
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>If beamtime is scheduled during shifts that have already been assigned, the existing beamtime is either
shortened to accommodate the new beamtime, or deleted completely if all shifts are being rescheduled.</p>
</div>
<div class="section" id="email-notifications">
<h3>Email Notifications<a class="headerlink" href="#email-notifications" title="Permalink to this headline">¶</a></h3>
<p>If <strong>Schedule Email Notification</strong> is selected, an email is scheduled for seven days prior to the start of the beamtime,
at 10am in the user’s timezone (if the user’s timezone cannot be determined based on the address in the account’s
profile, the <code class="docutils literal notranslate"><span class="pre">TIME_ZONE</span></code> specified in the <cite>settings.py</cite> file is used). If seven days prior to the beamtime falls on a
weekend, the email is scheduled for the preceding Friday.</p>
<p>Emails are sent to the <strong>Email Address</strong> (only editable by staff) and the <strong>Contact Email</strong> (user-editable) for the
account. Click on the small “Mail” icon to the left of the scheduled beamtime to edit details about the notification,
including the scheduled delivery time, email subject, and message.</p>
</div>
</div>
<div class="section" id="downtime">
<h2>Downtime<a class="headerlink" href="#downtime" title="Permalink to this headline">¶</a></h2>
<p>Downtime should be used to mark times when the beam was unexpectedly not available to users. The scope of the underlying
issue can be marked as “Facility” or “Beamline”, with details included in the comments. Those comments are available in
the Beamtime Summary statistics.</p>
<p>To schedule Downtime, first toggle the switch marked “CANC” in the top-right corner of the weekly calendar. Then select
the first and last shift of the downtime, and complete the form.</p>
<img alt="Scheduling Downtime" class="align-center" src="_images/schedule-downtime.png" />
</div>
<div class="section" id="user-support">
<h2>User Support<a class="headerlink" href="#user-support" title="Permalink to this headline">¶</a></h2>
<p>Click on an empty cell in the “Staff” column to assign beamline support. Any MxLIVE account specified with the Project Type
“Staff” can be scheduled for Beamline Support.</p>
<img alt="Scheduling User Support" class="align-center" src="_images/schedule-support.png" />
</div>
<div class="section" id="public-schedule">
<h2>Public Schedule<a class="headerlink" href="#public-schedule" title="Permalink to this headline">¶</a></h2>
<p>The schedule is available to all MxLIVE users through the dashboard of their account. To display the MxLIVE schedule on
a publicly visible website, insert the following HTML code:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="o">&lt;</span><span class="n">iframe</span> <span class="n">src</span><span class="o">=</span><span class="s2">&quot;https://example.com/calendar/view&quot;</span> <span class="n">style</span><span class="o">=</span><span class="s2">&quot;overflow: hidden; width: 100%;&quot;</span> <span class="n">scrolling</span><span class="o">=</span><span class="s2">&quot;no&quot;</span> <span class="n">frameborder</span><span class="o">=</span><span class="s2">&quot;0&quot;</span><span class="o">&gt;&lt;/</span><span class="n">iframe</span><span class="o">&gt;</span>
</pre></div>
</div>
<iframe src="https://mxlive.lightsource.ca/calendar/view" style="overflow: hidden; width: 100%;" frameborder="0"></iframe><p>By default, usernames of scheduled accounts are visible on the public schedule. If extra confidentiality is required,
the <strong>alias</strong> field in the user’s profile should be used. If the alias has a value, only the alias is visible publicly.</p>
</div>
<div class="section" id="statistics">
<h2>Statistics<a class="headerlink" href="#statistics" title="Permalink to this headline">¶</a></h2>
<p>Beamtime statistics are displayed side-by-side for multiple beamlines, and can be filtered by year.</p>
<img alt="Beamline Scheduling Statistics" class="align-center" src="_images/schedule-statistics.png" />
</div>
</div>


           </div>
           
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="publications.html" class="btn btn-neutral float-right" title="Publications" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="staff-shipments.html" class="btn btn-neutral float-left" title="Managing Shipments" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright 2010-2020, Canadian Light Source, Inc

    </p>
  </div> 

</footer>

        </div>
      </div>

    </section>

  </div>
  


  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>

  
  
    
   

</body>
</html>